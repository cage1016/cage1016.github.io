[{"categories":null,"content":"After solving the problem with Gon Sign ErrSecInternalComponent in the previous post, we can now use Gon to sign and notarize code in Github Action to create a complete release process.","date":"2022-12-08","objectID":"/posts/golang-base-alfred-code-sign-and-notarize/","tags":["gon","golang","codesign","certificate","alfred"],"title":"Golang Base Alfred Code Sign and Notarize","uri":"/posts/golang-base-alfred-code-sign-and-notarize/"},{"categories":null,"content":"Alfred is a great tool for improving Mac productivity, and Powerpack allows developers to develop their own workflows to make Alfred even more powerful. One problem when developing with Golang is that the artifact is a compiled binary, and there are security issues with running binary-based Alfred workflows on Mac OS. ","date":"2022-12-08","objectID":"/posts/golang-base-alfred-code-sign-and-notarize/:0:0","tags":["gon","golang","codesign","certificate","alfred"],"title":"Golang Base Alfred Code Sign and Notarize","uri":"/posts/golang-base-alfred-code-sign-and-notarize/"},{"categories":null,"content":"Steps The entire process of building the Golang-based Alfred workflow package for Github Action consists of several parts Golang Install, Test, Build ç­‰å¸¸è¦æ“ä½œ 1.Install Go 2.Run unit tests 3.update codecov Alfred package packaging and use Gon Code Sign, Notarrize preparation and practical operation 4.Import Code-Signing Certificates 5.Install gon via HomeBrew for code signing and app notarization 6.Build and pack 7.code sign and notarize Github Action Release 8.upload release assets - name: Install gon via HomeBrew for code signing and app notarization run: | brew tap mitchellh/gon brew install mitchellh/gon/gon - name: Import Code-Signing Certificates uses: Apple-Actions/import-codesign-certs@v1 with: # The certificates in a PKCS12 file encoded as a base64 string p12-file-base64: ${{ secrets.APPLE_DEVELOPER_CERTIFICATE_P12_BASE64 }} # The password used to import the PKCS12 file. p12-password: ${{ secrets.APPLE_DEVELOPER_CERTIFICATE_PASSWORD }} - name: code sign and notarize env: AC_USERNAME: ${{ secrets.AC_USERNAME }} AC_PASSWORD: ${{ secrets.AC_PASSWORD }} run: | # gon code sign cat \u003c\u003cEOF \u003e\u003e gon.json { \"source\" : [\".workflow/exe\"], \"bundle_id\" : \"com.kaichu.devtoys\", \"sign\" :{ \"application_identity\" : \"Developer ID Application: KAI CHU CHUNG\" } } EOF gon -log-level=debug -log-json ./gon.json # pack alfredworkflow cd .workflow plutil -replace version -string \"${{ env.tag }}\" info.plist zip -r ../\"DevToys-${{ env.tag }}.alfredworkflow\" . cd .. # zip alfredworkflow as zip archive for notarize zip -r \"DevToys-${{ env.tag }}.alfredworkflow.zip\" \"DevToys-${{ env.tag }}.alfredworkflow\" # gon notarize cat \u003c\u003cEOF \u003e\u003e notarize.json { \"notarize\": [{ \"path\": \"${PWD}/DevToys-${{ env.tag }}.alfredworkflow.zip\", \"bundle_id\": \"com.kaichu.devtoys\", \"staple\": false }] } EOF gon -log-level=debug -log-json ./notarize.json echo \"artifact=$(echo \"DevToys-${{ env.tag }}.alfredworkflow\")\" \u003e\u003e $GITHUB_ENV ","date":"2022-12-08","objectID":"/posts/golang-base-alfred-code-sign-and-notarize/:1:0","tags":["gon","golang","codesign","certificate","alfred"],"title":"Golang Base Alfred Code Sign and Notarize","uri":"/posts/golang-base-alfred-code-sign-and-notarize/"},{"categories":null,"content":"Prerequisite - name: Install gon via HomeBrew for code signing and app notarization run: | brew tap mitchellh/gon brew install mitchellh/gon/gon - name: Import Code-Signing Certificates uses: Apple-Actions/import-codesign-certs@v1 with: # The certificates in a PKCS12 file encoded as a base64 string p12-file-base64: ${{ secrets.APPLE_DEVELOPER_CERTIFICATE_P12_BASE64 }} # The password used to import the PKCS12 file. p12-password: ${{ secrets.APPLE_DEVELOPER_CERTIFICATE_PASSWORD }} - name: code sign and notarize env: AC_USERNAME: ${{ secrets.AC_USERNAME }} AC_PASSWORD: ${{ secrets.AC_PASSWORD }} run: | ... Prepare the relevant environment and environment variables and set them to Github (Settings -\u003e Secrets â€“\u003e Actions â€“\u003e New repository secret). secrets.APPLE_DEVELOPER_CERTIFICATE_P12_BASE64 secrets.APPLE_DEVELOPER_CERTIFICATE_PASSWORD secrets.AC_USERNAME secrets.AC_PASSWORD gon.json cat \u003c\u003cEOF \u003e\u003e gon.json { \"source\" : [\".workflow/exe\"], \"bundle_id\" : \"com.kaichu.devtoys\", \"sign\" :{ \"application_identity\" : \"Developer ID Application: KAI CHU CHUNG\" } } EOF Using Gon to provide code signatures for Golang-based executables of the Alfred workflow package # pack alfredworkflow cd .workflow plutil -replace version -string \"${{ env.tag }}\" info.plist zip -r ../\"DevToys-${{ env.tag }}.alfredworkflow\" . cd .. # zip alfredworkflow as zip archive for notarize zip -r \"DevToys-${{ env.tag }}.alfredworkflow.zip\" \"DevToys-${{ env.tag }}.alfredworkflow\" After the code has been signed, package the complete Alfred workflow as .alfredworkflow. Since .alfredworkflow is not a file format supported by Notarize, we will need to package it again as a .zip file for subsequent work. notarize.json cat \u003c\u003cEOF \u003e\u003e notarize.json { \"notarize\": [{ \"path\": \"${PWD}/DevToys-${{ env.tag }}.alfredworkflow.zip\", \"bundle_id\": \"com.kaichu.devtoys\", \"staple\": false }] } EOF Because .zip packaging does not support staple action, in order to avoid subsequent staple operation failure, so here first set staple to false. ","date":"2022-12-08","objectID":"/posts/golang-base-alfred-code-sign-and-notarize/:2:0","tags":["gon","golang","codesign","certificate","alfred"],"title":"Golang Base Alfred Code Sign and Notarize","uri":"/posts/golang-base-alfred-code-sign-and-notarize/"},{"categories":null,"content":"Result { \"logFormatVersion\": 1, \"jobId\": \"90eac292-fde7-4391-9a8c-1db0210c93aa\", \"status\": \"Accepted\", \"statusSummary\": \"Ready for distribution\", \"statusCode\": 0, \"archiveFilename\": \"DevToys-1.7.1.alfredworkflow.zip\", \"uploadDate\": \"2022-12-07T15:45:54Z\", \"sha256\": \"f7de035836559b9f105d5ba96b2b8bcda0d50a0802202b2fdf204e2bcee0d387\", \"ticketContents\": [ { \"path\": \"DevToys-1.7.1.alfredworkflow.zip/DevToys-1.7.1.alfredworkflow/exe\", \"digestAlgorithm\": \"SHA-256\", \"cdhash\": \"3733bbfae584c96a736b65f589c53edba490148f\", \"arch\": \"x86_64\" }, { \"path\": \"DevToys-1.7.1.alfredworkflow.zip/DevToys-1.7.1.alfredworkflow/exe\", \"digestAlgorithm\": \"SHA-256\", \"cdhash\": \"111858b884a1ee1e11dca11628a7a3cf09183010\", \"arch\": \"arm64\" } ], \"issues\": null } After the entire Github Action is successfully executed, you will get a Ready for distribution log and receive an email notification about it. ","date":"2022-12-08","objectID":"/posts/golang-base-alfred-code-sign-and-notarize/:3:0","tags":["gon","golang","codesign","certificate","alfred"],"title":"Golang Base Alfred Code Sign and Notarize","uri":"/posts/golang-base-alfred-code-sign-and-notarize/"},{"categories":null,"content":"Reference The full github Action configuration file can be found at https://github.com/cage1016/alfred-devtoys/blob/master/.github/workflows/release.yml ","date":"2022-12-08","objectID":"/posts/golang-base-alfred-code-sign-and-notarize/:4:0","tags":["gon","golang","codesign","certificate","alfred"],"title":"Golang Base Alfred Code Sign and Notarize","uri":"/posts/golang-base-alfred-code-sign-and-notarize/"},{"categories":null,"content":"Skaffold V2 extends the platforms and architectures supported by Skaffold, introduces Cloud Run as a supported deployer, and now supports building and deploying from ARM and x86 architectures. Skaffold V2 also provides enhanced support for CI/CD and GitOps workflows, introduces Skaffold rendering, validation and kpt integration. Most importantly, all existing Skaffold configurations are fully compatible with Skaffold V2, so upgrading from V1 is as easy as running a Skaffold fix","date":"2022-12-07","objectID":"/posts/devfest22-taipei-skaffold2-deep-dive/","tags":["devfest","skaffold","buildpack"],"title":"Devfest22 Taipei Skaffold2 Deep Dive","uri":"/posts/devfest22-taipei-skaffold2-deep-dive/"},{"categories":null,"content":" Slideshare: DevFest 2022 - Skaffold 2 Deep Dive Taipei.pdf A brief review of what i have shared at the Devfest from 2018 to 2021. Devfest19 Build Go Kit Microservices at Kubernetes With Ease Devfest20 How to Debug Microservices on Kubernetes as a Pros Coscup X Ruby Conf Tw 2021 Google Cloud Buildpacks - COSCUP Devfest21 Taipei Artifact Registry Introduction Devfest22 Taichung Cloud Workstation Introduction At 2022 Taipei GDG Devfest session, i talk about the new features of Skaffold 2, a very developer-friendly tool that will help you if you are a Kubernetes application developer. Although this was said to be an deep dive session on Skaffold 2, we surveyed the audience about their use of Skaffold. Most of the people who attended the conference had not used it beyond that. The questions asked focused on the underlying technology used by Skaffold 2, such as the way containers are built via buildpack rather than `Dockerfileâ€™, applicabilityï¼Œbarriers to entry and the role of Skaffold in CI/CD, etc. These are actually good questions to ask. Skaffold is a developer-centric tool designed to enable developers to quickly develop, test, and deploy applications on Kubernetes. The pipeline phase is flexible and can be chosen according to your preferences and scenarios. For example, I personally prefer to use buildpack instead of Dockerfile, but what if Iâ€™m dealing with a non-mainstream scenario? In that case, you can still choose to use Dockerfile to build containers with full autonomy and control. ","date":"2022-12-07","objectID":"/posts/devfest22-taipei-skaffold2-deep-dive/:0:0","tags":["devfest","skaffold","buildpack"],"title":"Devfest22 Taipei Skaffold2 Deep Dive","uri":"/posts/devfest22-taipei-skaffold2-deep-dive/"},{"categories":null,"content":"Timeline From this picture, we can see that Skaffold is actually developing very fast v0.1.0 was released on 2018/3/6, and after 46 releases, it was released as v1.1.0 on 2019/12/21. v1.1.0 was released, and after 72 iterations in 3 years, it was released on 2022/10/21 as v.2.0.0. ","date":"2022-12-07","objectID":"/posts/devfest22-taipei-skaffold2-deep-dive/:1:0","tags":["devfest","skaffold","buildpack"],"title":"Devfest22 Taipei Skaffold2 Deep Dive","uri":"/posts/devfest22-taipei-skaffold2-deep-dive/"},{"categories":null,"content":"Highlights \u0026 New Features ğŸ’» Support for deploying to ARM, X86 or Multi-Arch K8s clusters from your x86 or ARM machine ğŸ‘Ÿ New Cloud Run Deployer brings the power of Skaffold to Google Clouds serverless container runtime ğŸ“œ Skaffold render phase has been split from deploy phase providing increased granularity of control for GitOps workflows ğŸš¦New Skaffold verify phase enables improved testing capabilities making Skaffold even better as a CI/CD tool âš™ Tighter integration with kpt lets you more dynamically manage large amounts of configuration and keep it in sync Release v2.0.0 Release Â· GoogleContainerTools/skaffold Skaffold V2 extends the platforms and architectures supported by Skaffold, introduces Cloud Run as a supported deployer, and now supports building and deploying from ARM and x86 architectures. Skaffold V2 also provides enhanced support for CI/CD and GitOps workflows, introduces Skaffold rendering, validation and kpt integration. Most importantly, all existing Skaffold configurations are fully compatible with Skaffold V2, so upgrading from V1 is as easy as running a Skaffold fix. ","date":"2022-12-07","objectID":"/posts/devfest22-taipei-skaffold2-deep-dive/:2:0","tags":["devfest","skaffold","buildpack"],"title":"Devfest22 Taipei Skaffold2 Deep Dive","uri":"/posts/devfest22-taipei-skaffold2-deep-dive/"},{"categories":null,"content":"Skaffold Pipeline Stages Skaffold Architecture/Pipeline Stages is the core of Skaffold, which provides a Pipeline architecture around Build, Test, Tag, and Deploy. If you are familiar with the usage and application of each Pipeline Stage, you will be more familiar with the use of Skaffold and you will be able to use Skaffold more freely to develop, test and deploy applications. ","date":"2022-12-07","objectID":"/posts/devfest22-taipei-skaffold2-deep-dive/:3:0","tags":["devfest","skaffold","buildpack"],"title":"Devfest22 Taipei Skaffold2 Deep Dive","uri":"/posts/devfest22-taipei-skaffold2-deep-dive/"},{"categories":null,"content":"Tips \u0026 Tricks Skaffold is also integrated with existing IDEs (VSCode / IntellJ) / Google Cloud Shell / Cloud Workstation for quick and easy use. Code Code Cloud Code (v1.20.4, Nov 2022) not support Skaffold 2 yet, current build-in skaffold version is v1.39.3 ","date":"2022-12-07","objectID":"/posts/devfest22-taipei-skaffold2-deep-dive/:4:0","tags":["devfest","skaffold","buildpack"],"title":"Devfest22 Taipei Skaffold2 Deep Dive","uri":"/posts/devfest22-taipei-skaffold2-deep-dive/"},{"categories":null,"content":"Gon is a tool developed by Hashicorp founder Mitchell Hashimoto that makes the whole process of code signing easy. This article documents the problems I encountered with Gon code sign and how I solved them.","date":"2022-11-15","objectID":"/posts/gon-sign-errsecinternalcomponent/","tags":["gon","golang","codesign","certificate","alfred"],"title":"Gon Sign ErrSecInternalComponent","uri":"/posts/gon-sign-errsecinternalcomponent/"},{"categories":null,"content":"Recently, Iâ€™ve been using Golang with deanishe/awgo to write Alfred Workflow, which I use a ton. alfred-pdf2image - Convert PDF to image with Alfred alfred-devtoys - A Swiss Army knife for developers for Alfred alfred-paletter - Extract palette from an image ak - A generator for golang alfred workflow that helps you create boilerplate code. alfred-opencc - Open Chinese Convert é–‹æ”¾ä¸­æ–‡è½‰æ› alfred-timelog - You could leverage Alfred and Google Sheets to track your time with ease. The goal is to track your time in a way that is easy to understand how much time you spend on. alfred-fork-open - Alfred 5 workflow for opening folders in Fork. In addtion to use them by myself, I also want to share them with others and publish them to Alfred App Community Forum, which is a website that hosts Alfred workflows forum and allows users to share their workflows with others. When Apple introduced MacOS Catalina, it came with security features to ensure that you only use trusted binary files. This requires that binary files be signed and notarized by Apple itself, otherwise youâ€™ll get an error. This problem is encountered when using the Golang base Alfred Workflow. developer cannot verified Of course, it is possible to allow forced enable in the MacOS â€œSecurity and Privacy Preferencesâ€, but this would create a security problem for other users because there is no way to determine if the application being run is trusted. The correct way to do this is to request a â€œDeveloper ID Applicationâ€ certificate and add the certificate to the compile command at compile timeã€‚Cause all of my workflows are written in Golang and publish by Github Action. So, this article document the problems I encountered with Gon code sign and how I solved them by following the steps below from Build, notarize, and sign Golang binaries for MacOS with GitHub Actions Â· KenCochrane.com ","date":"2022-11-15","objectID":"/posts/gon-sign-errsecinternalcomponent/:0:0","tags":["gon","golang","codesign","certificate","alfred"],"title":"Gon Sign ErrSecInternalComponent","uri":"/posts/gon-sign-errsecinternalcomponent/"},{"categories":null,"content":"Gon Gon is a tool that allows you to sign and notarize your binaries with a single command and developed by Hashicorp founder Mitchell Hashimoto ","date":"2022-11-15","objectID":"/posts/gon-sign-errsecinternalcomponent/:1:0","tags":["gon","golang","codesign","certificate","alfred"],"title":"Gon Sign ErrSecInternalComponent","uri":"/posts/gon-sign-errsecinternalcomponent/"},{"categories":null,"content":"Gon Prerequisite: Acquiring a Developer ID Certificate Login to Apple Developer and create a new certificate. Visit Certificates, Identifiers \u0026 Profiles Click the + button to add a new certificate and select â€œDeveloper ID Applicationâ€ at Software part and continue to follow the steps to create a new certificate. Download Developer ID Application certificate and double click to install it into your keychain. Verify that the certificate is installed by running the following command $ security find-identity -v | grep Developer 2) 20DFD3FCBB8283C498F07D784871F91353A270D3 \"Developer ID Application: Name (5ST5F35WQV)\" ","date":"2022-11-15","objectID":"/posts/gon-sign-errsecinternalcomponent/:2:0","tags":["gon","golang","codesign","certificate","alfred"],"title":"Gon Sign ErrSecInternalComponent","uri":"/posts/gon-sign-errsecinternalcomponent/"},{"categories":null,"content":"Gon local code sign When certificate is ready, we could use Gon to sign the binary file with gon.json configuare file. gon.json { \"source\" : [\"./exe\"], \"bundle_id\" : \"com.kaichu.example.c\", \"apple_id\": { \"username\" : \"\u003cyour-email\u003e\", \"password\": \"@env:AC_PASSWORD\" }, \"sign\" :{ \"application_identity\" : \"Developer ID Application: KAI CHU CHUNG\" } } $ gon -log-level=debug -log-json ./gon.json ==\u003e âœï¸ Signing files... {\"@level\":\"info\",\"@message\":\"executing codesigning\",\"@module\":\"sign\",\"@timestamp\":\"2022-11-16T09:33:32.508890+08:00\",\"command_args\":[\"codesign\",\"-s\",\"Developer ID Application: KAI CHU CHUNG\",\"-f\",\"-v\",\"--timestamp\",\"--options\",\"runtime\",\"./exe\"],\"command_path\":\"/usr/bin/codesign\",\"files\":[\"./exe\"]} {\"@level\":\"error\",\"@message\":\"error codesigning\",\"@module\":\"sign\",\"@timestamp\":\"2022-11-16T09:33:32.599347+08:00\",\"err\":\"exit status 1\",\"output\":\"./exe: replacing existing signature\\nWarning: unable to build chain to self-signed root for signer \\\"Developer ID Application: KAI CHU CHUNG (5ST5F35WQV)\\\"\\n./exe: errSecInternalComponent\\n\"} â—ï¸ Error signing files: error signing: ./exe: replacing existing signature Warning: unable to build chain to self-signed root for signer \"Developer ID Application: KAI CHU CHUNG (5ST5F35WQV)\" ./exe: errSecInternalComponent BOOM, we got an error ./exe: errSecInternalComponent when we try to sign the binary file. ","date":"2022-11-15","objectID":"/posts/gon-sign-errsecinternalcomponent/:3:0","tags":["gon","golang","codesign","certificate","alfred"],"title":"Gon Sign ErrSecInternalComponent","uri":"/posts/gon-sign-errsecinternalcomponent/"},{"categories":null,"content":"Root Cause Certificates not trusted This error is caused by the certificate is not trusted by the system and does not work that even we force enable trust manually in keychain. We could fix this by adding the intermediate certificate to the keychain. We could download the intermediate certificate from Apple PKI - Apple website Apple PKI There are two intermediate certificates for Developer ID Application certificate, we could download same type as Developer ID Application certificate we request in the beginning and install them into the keychain. Developer ID - G1 (Expiring 02/01/2027 22:12:15 UTC) Developer ID - G2 (Expiring 09/17/2031 00:00:00 UTC) Certificates verified ","date":"2022-11-15","objectID":"/posts/gon-sign-errsecinternalcomponent/:4:0","tags":["gon","golang","codesign","certificate","alfred"],"title":"Gon Sign ErrSecInternalComponent","uri":"/posts/gon-sign-errsecinternalcomponent/"},{"categories":null,"content":"Gon local code sign (success) Re run the gon command again, we could see the binary file is signed successfully. $ gon -log-level=debug -log-json ./gon.json ==\u003e âœï¸ Signing files... {\"@level\":\"info\",\"@message\":\"executing codesigning\",\"@module\":\"sign\",\"@timestamp\":\"2022-11-16T14:05:09.694431+08:00\",\"command_args\":[\"codesign\",\"-s\",\"Developer ID Application: KAI CHU CHUNG\",\"-f\",\"-v\",\"--timestamp\",\"--options\",\"runtime\",\"./exe\"],\"command_path\":\"/usr/bin/codesign\",\"files\":[\"./exe\"]} {\"@level\":\"info\",\"@message\":\"codesigning complete\",\"@module\":\"sign\",\"@timestamp\":\"2022-11-16T14:05:10.537608+08:00\",\"output\":\"./exe: replacing existing signature\\n./exe: signed Mach-O universal (x86_64 arm64) [exe]\\n\"} Code signing successful âš ï¸ No items to notarize You must specify a 'notarize' section or a 'source' section plus a 'zip' or 'dmg' section in your configuration to enable packaging and notarization. Without these sections, gon will only sign your input files in 'source'. Verify the binary file is signed successfully by running the following command $ codesign -dvv exe Executable=/Users/kaichuchung/tmp/c/exe Identifier=exe Format=Mach-O universal (x86_64 arm64) CodeDirectory v=20500 size=12015 flags=0x10000(runtime) hashes=370+2 location=embedded Signature size=9058 Authority=Developer ID Application: KAI CHU CHUNG (5ST5F35WQV) Authority=Developer ID Certification Authority Authority=Apple Root CA Timestamp=Nov 16, 2022 at 00:26:11 Info.plist=not bound TeamIdentifier=5ST5F35WQV Runtime Version=10.9.0 Sealed Resources=none Internal requirements count=1 size=164 Now, we could use gon to sign and notarize the binary file successfully. The next step is to use gon to sign and notarize the binary file in Github Action relase pipeline. ","date":"2022-11-15","objectID":"/posts/gon-sign-errsecinternalcomponent/:5:0","tags":["gon","golang","codesign","certificate","alfred"],"title":"Gon Sign ErrSecInternalComponent","uri":"/posts/gon-sign-errsecinternalcomponent/"},{"categories":null,"content":"Google announce Gloud Workstation preview version on 2022/10/11. In this year DevFest Taichung 2022, I share Cloud Workstation Introduction. Introduce how to set up Cloud Workstation, use cases and Demo","date":"2022-10-30","objectID":"/posts/devfest22-taichung-cloud-workstation-introduction/","tags":["cloudworkstation","devfest"],"title":"Devfest22 Taichung Cloud Workstation Introduction","uri":"/posts/devfest22-taichung-cloud-workstation-introduction/"},{"categories":null,"content":" Slideshare: DevFest 2022 - Cloud Workstation Introduction TaiChung Google announce Gloud Workstation preview version on 2022/10/11. In this year DevFest Taichung 2022, I share Cloud Workstation Introduction. Introduce how to set up Cloud Workstation, use cases and Demo. ","date":"2022-10-30","objectID":"/posts/devfest22-taichung-cloud-workstation-introduction/:0:0","tags":["cloudworkstation","devfest"],"title":"Devfest22 Taichung Cloud Workstation Introduction","uri":"/posts/devfest22-taichung-cloud-workstation-introduction/"},{"categories":null,"content":"Simple Tips Itâ€™s quick easy to create workstation cluster, configuration and workstation. We could leverage Open VSX Registry to install extension on basic editor Code-OSS. In reality, we might not found all extension we userd before on Open VSX Registry. Although both of them are open source project, but still quick different a little bit. Due to Cloud Workation is containerization, so it retains some flexibility in terms of scalability. For instance. Cloud Workstation has alredy integrate with Cloud Code, basically itâ€™s a plugin for VSCode with few cli tool like gcloud, skaffold but helm. Therefore, we could use Dockerfile to build our own image with helm. In this way, we could use helm in Cloud Workstation container base on our own image. In ecosytem, Cloud Workstation intergrate with Jetbrain IDEs. We could get same development experience as local workstation base on pre defined Jetrain base container image with JetBrains Gateway but few knows issues still not support for now. Debug on Kubernetes Debug a locally running Cloud Run service Finally, due to Cloud Workstation is preview version now, all of them are subject to change. We could expect more features and better experience in the future. Basically, itâ€™s a good start for those developer who want to seprarate development environment from local workstation. ","date":"2022-10-30","objectID":"/posts/devfest22-taichung-cloud-workstation-introduction/:0:1","tags":["cloudworkstation","devfest"],"title":"Devfest22 Taichung Cloud Workstation Introduction","uri":"/posts/devfest22-taichung-cloud-workstation-introduction/"},{"categories":null,"content":"The preconfigured base images provided by Cloud Workstations contain only a minimal environment with IDE, basic Linux terminal and language tools and a sshd server. To expedite the environment setup of specific development use cases, you can create custom container images that extend these base images to pre-install tools and dependencies and that run automation scripts.","date":"2022-10-25","objectID":"/posts/cloud-workstation-with-hugo-env/","tags":["workstation","docker","hugo"],"title":"Cloud Workstation With Hugo Env","uri":"/posts/cloud-workstation-with-hugo-env/"},{"categories":null,"content":"The preconfigured base images provided by Cloud Workstations contain only a minimal environment with IDE, basic Linux terminal and language tools and a sshd server. To expedite the environment setup of specific development use cases, you can create custom container images that extend these base images to pre-install tools and dependencies and that run automation scripts. Base container image provided by Cloud Worksation Image Description us-central1-docker.pkg.dev/cloud-workstations-images/predefined/code-oss:latest Cloud Workstations base editor based on Code-OSS. (Default). us-central1-docker.pkg.dev/cloud-workstations-images/predefined/base:latest Base image with no IDE installed. us-central1-docker.pkg.dev/cloud-workstations-images/predefined/clion:latest CLion IDE. Accessible only through JetBrains Gateway us-central1-docker.pkg.dev/cloud-workstations-images/predefined/goland:latest GoLand IDE. Accessible only through JetBrains Gateway. us-central1-docker.pkg.dev/cloud-workstations-images/predefined/intellij-ultimate:latest IntelliJ IDEA Ultimate IDE. Accessible only through JetBrains Gateway. us-central1-docker.pkg.dev/cloud-workstations-images/predefined/phpstorm:latest PhpStorm IDE. Accessible only through JetBrains Gateway. us-central1-docker.pkg.dev/cloud-workstations-images/predefined/pycharm:latest PyCharm Professional IDE. Accessible only through JetBrains Gateway. us-central1-docker.pkg.dev/cloud-workstations-images/predefined/rider:latest Rider IDE. Accessible only through JetBrains Gateway. us-central1-docker.pkg.dev/cloud-workstations-images/predefined/rubymine:latest RubyMine IDE. Accessible only through JetBrains Gateway. us-central1-docker.pkg.dev/cloud-workstations-images/predefined/webstorm:latest WebStorm IDE. Accessible only through JetBrains Gateway. ","date":"2022-10-25","objectID":"/posts/cloud-workstation-with-hugo-env/:0:0","tags":["workstation","docker","hugo"],"title":"Cloud Workstation With Hugo Env","uri":"/posts/cloud-workstation-with-hugo-env/"},{"categories":null,"content":"Hugo env Build Hugo development environment by GCP cloud workstation Use us-central1-docker.pkg.dev/cloud-workstations-images/predefined/code-oss:latest base container image Install Hugo Install Code-OSS Open VSX Registry extenions better-toml vscode-markdownlint change-case FROM us-central1-docker.pkg.dev/cloud-workstations-images/predefined/code-oss:latest RUN sudo apt update # VARIANT can be either 'hugo' for the standard version or 'hugo_extended' for the extended version. ARG VARIANT=hugo # VERSION can be either 'latest' or a specific version number ARG VERSION=latest # Download Hugo RUN apt-get update \u0026\u0026 apt-get install -y ca-certificates openssl git curl \u0026\u0026 \\ rm -rf /var/lib/apt/lists/* \u0026\u0026 \\ case ${VERSION} in \\ latest) \\ export VERSION=$(curl -s https://api.github.com/repos/gohugoio/hugo/releases/latest | grep \"tag_name\" | awk '{print substr($2, 3, length($2)-4)}') ;;\\ esac \u0026\u0026 \\ echo ${VERSION} \u0026\u0026 \\ wget -O ${VERSION}.tar.gz https://github.com/gohugoio/hugo/releases/download/v${VERSION}/${VARIANT}_${VERSION}_Linux-64bit.tar.gz \u0026\u0026 \\ tar xf ${VERSION}.tar.gz \u0026\u0026 \\ mv hugo /usr/bin/hugo # Download Extension RUN wget https://open-vsx.org/api/bungcip/better-toml/0.3.2/file/bungcip.better-toml-0.3.2.vsix \u0026\u0026 \\ unzip bungcip.better-toml-0.3.2.vsix \"extension/*\" \u0026\u0026\\ mv extension /opt/code-oss/extensions/better-toml RUN wget https://open-vsx.org/api/DavidAnson/vscode-markdownlint/0.48.1/file/DavidAnson.vscode-markdownlint-0.48.1.vsix \u0026\u0026 \\ unzip DavidAnson.vscode-markdownlint-0.48.1.vsix \"extension/*\" \u0026\u0026\\ mv extension /opt/code-oss/extensions/markdownlint RUN wget https://open-vsx.org/api/wmaurer/change-case/1.0.0/file/wmaurer.change-case-1.0.0.vsix \u0026\u0026 \\ unzip wmaurer.change-case-1.0.0.vsix \"extension/*\" \u0026\u0026\\ mv extension /opt/code-oss/extensions/change-case # Hugo dev server port EXPOSE 1313 # [Optional] Uncomment this section to install additional OS packages you may want. # RUN apt-get update \u0026\u0026 export DEBIAN_FRONTEND=noninteractive \\ \u0026\u0026 apt-get -y install --no-install-recommends webp $ docker build -t cage1016/hugo-evn . ","date":"2022-10-25","objectID":"/posts/cloud-workstation-with-hugo-env/:0:1","tags":["workstation","docker","hugo"],"title":"Cloud Workstation With Hugo Env","uri":"/posts/cloud-workstation-with-hugo-env/"},{"categories":null,"content":"Workstation Setup workation base container image at workstation configuration docker.io/cage1016/hugo-env:latest We could let Service Account field empty if base container image is public. Create workstation by previous configuration Start workstaion and luanch it. Clone git repo from https://github.com/526avijitgupta/gokarna.git Develop Hugo $ cd exampleSite/ $ hugo server -D We need to enable gcloud cli port-forward for local live preview Visit http://localhost:1313 Enjoying Hugo development. ","date":"2022-10-25","objectID":"/posts/cloud-workstation-with-hugo-env/:0:2","tags":["workstation","docker","hugo"],"title":"Cloud Workstation With Hugo Env","uri":"/posts/cloud-workstation-with-hugo-env/"},{"categories":null,"content":"Since Mac OS finally removed support for Python2 in 12.3, the workflows written in Python2 in Alfred 4 are no longer available. The amowu/alfred-chinese-converter I was using before is also no longer updated (it's still in Alfred 2). So I built one with Golang + awgo + opencc, eliminating the dependency on Python, and Alfred upgrades no longer run into Python version problems.","date":"2022-07-10","objectID":"/posts/alfred-open-chinese-convert/","tags":["alfred","alfred4-workflow","opencc","golang","awgo"],"title":"Alfred Open Chinese Convert","uri":"/posts/alfred-open-chinese-convert/"},{"categories":null,"content":"Introduction Since Mac OS finally removed support for Python2 in 12.3, the workflows written in Python2 in Alfred 4 are no longer available. The amowu/alfred-chinese-converter I was using before is also no longer updated (itâ€™s still in Alfred 2). So I built one with Golang + deanishe/awgo + longbridgeapp/opencc, eliminating the dependency on Python, and Alfred upgrades no longer run into Python version problems. ","date":"2022-07-10","objectID":"/posts/alfred-open-chinese-convert/:1:0","tags":["alfred","alfred4-workflow","opencc","golang","awgo"],"title":"Alfred Open Chinese Convert","uri":"/posts/alfred-open-chinese-convert/"},{"categories":null,"content":"alfred-opencc default keyword occ launch alfred-opencc Total support 8 translation methods. Be able to enable/disable for each translation method indvidual. Simplified Chinese to Traditional Chinese Traditional Chinese to Simplified Chinese Simplified Chinese to Traditional Chinese (Taiwan Standard) Traditional Chinese (Taiwan Standard) to Simplified Chinese Simplified Chinese to Traditional Chinese (Hong Kong variant) Traditional Chinese (Hong Kong variant) to Simplified Chinese Simplified Chinese to Traditional Chinese (Taiwan Standard) with Taiwanese idiom Traditional Chinese (Taiwan Standard) to Simplified Chinese with Mainland Chinese idiom Please visit Releases Â· cage1016/alfred-opencc to download latest version alfred-opencc workflow ","date":"2022-07-10","objectID":"/posts/alfred-open-chinese-convert/:2:0","tags":["alfred","alfred4-workflow","opencc","golang","awgo"],"title":"Alfred Open Chinese Convert","uri":"/posts/alfred-open-chinese-convert/"},{"categories":null,"content":"gokit-todo, gokit-todo-frontend are applications developed with low dependencies on code suites and simple tasks on Kubernetes. We can easily migrate to Google App Engine for CI/CD development process using Google Cloud Build and Github repo.","date":"2022-03-27","objectID":"/posts/deploy-gokit-todo-to-gae-with-cloud-build-from-github-repo/","tags":["gokit","todomvc","gcp","gae","postgres","cloudsql"],"title":"Deploy Gokit Todo to GAE With Cloud Build From Github Repo","uri":"/posts/deploy-gokit-todo-to-gae-with-cloud-build-from-github-repo/"},{"categories":null,"content":"gokit-todo https://github.com/cage1016/gokit-todo todomvc full stack demo project. react + backend API by gokit microservice toolkit. include unit test, integration test, e2e test, github action ci https://github.com/cage1016/gokit-todo-frontend gokit todo frotnend: React todomvc gokit-doto (Microservices backend API with Postgres database) and gokit-todo-frontend (React todomvc) are demo applications developed for Kubernetes with Ingress (Istio/Nginx-ingress). You can also quickly start an entire application with a database via docker-compose. Feel free to try it out by following the guide in the repo. ","date":"2022-03-27","objectID":"/posts/deploy-gokit-todo-to-gae-with-cloud-build-from-github-repo/:1:0","tags":["gokit","todomvc","gcp","gae","postgres","cloudsql"],"title":"Deploy Gokit Todo to GAE With Cloud Build From Github Repo","uri":"/posts/deploy-gokit-todo-to-gae-with-cloud-build-from-github-repo/"},{"categories":null,"content":"migrate gokit-todo gokit-todo-frontent to Google App Engine with Cloud SQL Before we migrated our Kubernetes application to Google App Engine. We first need to have some understanding of Google App Engine. Make sure our ideas work. Google App Engine is a Pass (Platform as a Service) service, which means we only need to focus on application development. So we can reuse gokit-todo, gokit-todo-frontend source code and deploy to Google App Engine through app.yaml configuration âœ… Google App Engine support standard-runtime (Python, Java, Node.js, PHP, Ruby, Go) and flexible-runtime (Go, Java 8, PHP 5/7, Python 2.7/3.6, .NET, Node.js, Ruby, Custom runtime) Choose standard runtime Go 1.16 for gokit-todo as it is a pure backend API microservice âœ… Chosee standard-runtime Node.js 16 for gokit-todo-frontentd as it is React frontend application âœ… We can choose Cloud SQL (Postgres) as our database to gokit-todo application in Google App Engine environment. You must use Cloud SQL proxy postgres driver cloudsqlpostgres to connect to Cloud SQL cause Cloud SQL will handle the connection authentication and authorization automatically. âœ… We can choose Google Cloud Build to handle CI/CD pipeline workflow and fully integrate with Github repo. There is most important things is you need to grant project default Google Cloud service account project-number@cloudbuild.gserviceaccount.com with enough permissions to build and deploy your application. âœ… Architecture Above is the whole architecture of our application gokit-todo-gae leverage with gokit-todo and gokit-todo-frontend as git submodule. Using a project with git submodules avoids the overhead of interfering with the application source code. ","date":"2022-03-27","objectID":"/posts/deploy-gokit-todo-to-gae-with-cloud-build-from-github-repo/:2:0","tags":["gokit","todomvc","gcp","gae","postgres","cloudsql"],"title":"Deploy Gokit Todo to GAE With Cloud Build From Github Repo","uri":"/posts/deploy-gokit-todo-to-gae-with-cloud-build-from-github-repo/"},{"categories":null,"content":"Google App Engine Itâ€™s very basic setup for our demo scenario. Just enable Google App Engine service in Google Cloud project and we will leverage Google Cloud Build to handle all depoyment jobs gcloud app create --region=asia-east1 ","date":"2022-03-27","objectID":"/posts/deploy-gokit-todo-to-gae-with-cloud-build-from-github-repo/:3:0","tags":["gokit","todomvc","gcp","gae","postgres","cloudsql"],"title":"Deploy Gokit Todo to GAE With Cloud Build From Github Repo","uri":"/posts/deploy-gokit-todo-to-gae-with-cloud-build-from-github-repo/"},{"categories":null,"content":"Cloud SQL You can create a Cloud SQL instance in Google Cloud Console or gcloud sql instances create command. The following gcloud command will create a Cloud SQL. gcloud sql instances create todo --database-version=POSTGRES_11 --cpu=1 --memory=3840MiB --region=asia-east1 --root-password=password --storage-size=10GB --storage-type=SSD When Cloud SQL instance is created then we need to crate a demo database. gcloud sql databases create todo -i todo Itâ€™s quick simple step to create a Cloud SQL instance and a demo database via gcloud command. Cloud SQL instance setup with Public IP address as default and you can also setup with Private IP address as your want. Make sure you enable VPC network for your private IP address Cloud SQL instance. ","date":"2022-03-27","objectID":"/posts/deploy-gokit-todo-to-gae-with-cloud-build-from-github-repo/:4:0","tags":["gokit","todomvc","gcp","gae","postgres","cloudsql"],"title":"Deploy Gokit Todo to GAE With Cloud Build From Github Repo","uri":"/posts/deploy-gokit-todo-to-gae-with-cloud-build-from-github-repo/"},{"categories":null,"content":"Google Cloud Build As previous mentioned that all CI/CD jobs are handled by Google Cloud Build. We need to create a bunch of Cloud Build configurations to build and deploy our application. We added gokit-todo and gokit-todo-frontend application as project git submodule. We create a Cloud Build configuration for gokit-todo and gokit-todo-frontend and each of them could trigger another cloud build trigger to deploy application. Itâ€™s useful tips to trigger Cloud Build trigger by RESTful API in one Cloud Build steps. curl -d '{\"branchName\":\"master\"}' -X POST -H \"Content-type: application/json\" \\ -H \"Authorization: Bearer $(gcloud config config-helper --format='value(credential.access_token)')\" \\ https://cloudbuild.googleapis.com/v1/projects/\u003cgcp-project\u003e/triggers/\u003ccloudbuild-trigger-id\u003e:run Trigger trigger gokit-todo and gokit-todo-frontend by cloudbuild.api.yaml åŠ cloudbuild.default.yaml Itâ€™s also to deploy Google App Engine dispatch router dispatch.yaml settings through cloudbuild.dispatch.yaml All of Cloud Build settings ","date":"2022-03-27","objectID":"/posts/deploy-gokit-todo-to-gae-with-cloud-build-from-github-repo/:5:0","tags":["gokit","todomvc","gcp","gae","postgres","cloudsql"],"title":"Deploy Gokit Todo to GAE With Cloud Build From Github Repo","uri":"/posts/deploy-gokit-todo-to-gae-with-cloud-build-from-github-repo/"},{"categories":null,"content":"gokit-todo-gae cage1016/gokit-todo-gae . â”œâ”€â”€ api // gokit-todo submodule as api service â”œâ”€â”€ default // gokit-todo-frontend as default service â”œâ”€â”€ .gitmodules â”œâ”€â”€ cloudbuild.api.yaml // deploy api service (Manual) â”œâ”€â”€ cloudbuild.default.yaml // deploy default service (Manual) â”œâ”€â”€ cloudbuild.dispatch.yaml // deploy dispatch.yaml â””â”€â”€ dispatch.yaml // gokit-todo-gae dispatch yaml You can see above project file structure (gokit-todo-gae) is same as previous architecture diagram. The operation process is as follows Frontend developer push code to Github repo gokit-todo-frontend ğŸ‘‰ trigger gokit-todo-frontend will be triggered and do their steps job and trigger gokit-todo-gae-deploy-default trigger by RESTFul API at last step ğŸ‘‰ trigger gokit-todo-gae-deploy-default will build and deploy gokit-todo-frontend application to Google App Engine. cloudbuild.yaml cloudbuild.default.yaml Backend developer push code to Github repo gokit-todo ğŸ‘‰ trigger gokit-todo will be triggered and do their steps job (application testing) and trigger gokit-todo-gae-deploy-api trigger by RESTFul API at last step ğŸ‘‰ trigger gokit-todo-gae-deploy-api will build and deploy gokit-todo application to Google App Engine. cloudbuild.yaml cloudbuild.api.yaml Itâ€™s also easy to update Google App Engine dispatch routing setting by push dispatch.yaml changed to Github repo gokit-todo-gae ğŸ‘‰ trigger gokit-todo-gae-deploy-dispatch will update dispatch routing to Google App Engine cloudbuild.dispatch.yaml ","date":"2022-03-27","objectID":"/posts/deploy-gokit-todo-to-gae-with-cloud-build-from-github-repo/:6:0","tags":["gokit","todomvc","gcp","gae","postgres","cloudsql"],"title":"Deploy Gokit Todo to GAE With Cloud Build From Github Repo","uri":"/posts/deploy-gokit-todo-to-gae-with-cloud-build-from-github-repo/"},{"categories":null,"content":"summary Google App Engine is easy to get started with. In particular, for simple applications like this demo, the Google App Engine standard-runtime offers a free tier of 28 instance-hours per day. We can migrate pre Kubernetes application gokit-todo and gokit-todo-frontend to Google App Engine without any code modified, just leverage with requirement app.yaml and Google App Engine could collaborate with GitHub Repo and Google Cloud Build well. Q Why donâ€™t we use Github build-in CI/CD Github action instead of Google Cloud Build ? A Yes, You could do HTTP request to trigger Google Cloud Build trigger in Github Action but have to handle request authentication by yourself. Google Cloud Build will auto handle those request authentication automatically source code gokit-todo https://github.com/cage1016/gokit-todo gokit-todo-frontend https://github.com/cage1016/gokit-todo-frontend gokit-todo-gae https://github.com/cage1016/gokit-todo-gae ","date":"2022-03-27","objectID":"/posts/deploy-gokit-todo-to-gae-with-cloud-build-from-github-repo/:7:0","tags":["gokit","todomvc","gcp","gae","postgres","cloudsql"],"title":"Deploy Gokit Todo to GAE With Cloud Build From Github Repo","uri":"/posts/deploy-gokit-todo-to-gae-with-cloud-build-from-github-repo/"},{"categories":null,"content":"Recently, I have encountered the need of document localization in my work environment, and the commonly used Google Translate, DeepL Translate, and Wason Language Translator all provide document translation. Wason Language Translator provides a free Lite solution, so I use Wason Language Translator offers a free Lite solution, so use Golang to package Language Translator - IBM Cloud API for cli to make it easier to use.","date":"2022-03-06","objectID":"/posts/wason-language-translator-cli/","tags":["wason","translator","cli","golang"],"title":"Wason Language Translator CLI","uri":"/posts/wason-language-translator-cli/"},{"categories":null,"content":"Using text translation is a common situation in daily life, such as Google Translateã€DeepL Translate, Wason Language Translator and other frequently used services. All of the above services basically support the translation of documents (docx, pptx, pdf, etc.), but the difference is the cost and accuracy of translation. Cloud Translation |Â Google Cloud: Google Cloud Translator provides full document translation, the overall translation effect is better, but there is no free quota, you need to bind a settlement account to use. Wason Language Translator Demo: IBM Cloud also provides file translation. After applying for an account, there is a free plan of 2 MB per file. The overall translation effect is worse than Google Cloud Translate. This article basically encapsulates Language Translator - IBM Cloud API Docs into cli to facilitate file translation ","date":"2022-03-06","objectID":"/posts/wason-language-translator-cli/:0:0","tags":["wason","translator","cli","golang"],"title":"Wason Language Translator CLI","uri":"/posts/wason-language-translator-cli/"},{"categories":null,"content":"Wason Language Translator Lite Plan Language Translator - IBM Cloud(https://cloud.ibm.com/apidocs/language-translator) The Lite plan gets you started with 1,000,000 characters per month at no cost and includes the default translation models. When you upgrade to a paid plan, you can create custom models. ","date":"2022-03-06","objectID":"/posts/wason-language-translator-cli/:1:0","tags":["wason","translator","cli","golang"],"title":"Wason Language Translator CLI","uri":"/posts/wason-language-translator-cli/"},{"categories":null,"content":"Usage Visit ğŸ‘‰ releases to download latest binary file Visit ğŸ‘‰ Language Translator - IBM Cloud apply an IBM Cloud account, create Language Translator instance. copy apiKey åŠ url API_KEY=\u003creplace-your-api-key\u003e URL=\u003creplace-url\u003e cat \u003c\u003cEOF \u003e\u003e $HOME/.wason-translator-cli.yaml api_key: ${API_KEY} url: ${URL} version: 2018-05-01 EOF Translat document by cli and the supported formats are .doc, .docx, .ppt, .pptx, .xls, .xlsx, .rtf, .odt, .odp, .ods, .pdf, .htm, .html, .xml, .json, .txt Upload document to translate download translted docuemt file delete translted docuemt file ","date":"2022-03-06","objectID":"/posts/wason-language-translator-cli/:2:0","tags":["wason","translator","cli","golang"],"title":"Wason Language Translator CLI","uri":"/posts/wason-language-translator-cli/"},{"categories":null,"content":"Source Code cage1016/wason-translator-cli: IBM Cloud Language Translator CLI (document translate) ","date":"2022-03-06","objectID":"/posts/wason-language-translator-cli/:3:0","tags":["wason","translator","cli","golang"],"title":"Wason Language Translator CLI","uri":"/posts/wason-language-translator-cli/"},{"categories":null,"content":"2022 ç¬¬ä¸€å ´ Taiwan Hong Kong Cloud Study Jam å·²ç¶“é–‹å§‹, æ™‚é–“å¾ 2022/1/19 - 2022/2/7ã€‚GDG Cloud Taipei ä¹Ÿèˆ‰è¾¦äº† Taiwan \u0026 Hong Kong Cloud Study Jam Together é‚€è«‹å¤§å®¶åœ¨ 2022/1/25 19:30 - 21:30 ä¸Šç·šä¸€èµ·å®Œæˆ Cloud Study Jam, åœ¨ Meetup æ´»å‹•é–‹ç«‹ä¹‹å¾Œæœ‰æœ‹å‹å¯«ä¿¡ä¾†å•é–‹é€šçš„å•é¡Œï¼Œæ‰€ä»¥é‚„æ˜¯æ•´ç†äº†ä¸€ä¸‹è³‡æ–™ä¾†å¹«åŠ©æ–°æœ‹å‹é †åˆ©é€šé–‹å–å¾—30 å¤©å…è²»çš„Google Cloud Skills Boost è¨‚é–±","date":"2022-01-23","objectID":"/posts/taiwan-hong-kong-cloud-study-jam-guide/","tags":["GloudStudyJam","meetup","gdg"],"title":"Taiwan Hong Kong Cloud Study Jam Guide","uri":"/posts/taiwan-hong-kong-cloud-study-jam-guide/"},{"categories":null,"content":"Taiwan Hong Kong Cloud Study Jam (Google offical) é‚€è«‹å°ç£èˆ‡æ¸¯æ¾³çš„é–‹ç™¼äººå“¡ä¸€èµ·å­¸ç¿’ Google Cloud çš„ç›¸é—œæŠ€è¡“ã€‚ Cloud Study Jam æ˜¯ä¸€é …åœ¨ç·šè‡ªå­¸è¨ˆåŠƒï¼Œç‚ºå°ç£åŠæ¸¯æ¾³çš„é–‹ç™¼äººå“¡æä¾›æ“ä½œèˆ‡å­¸ç¿’ Google Cloud Labçš„æ©Ÿæœƒï¼ŒåŒæ™‚æä¾›èˆ‡åœ¨åœ° Google é–‹ç™¼è€…ç¤¾ç¾¤ä¸€èµ·å­¸ç¿’çš„æ©Ÿæœƒã€‚ 2022 ç¬¬ä¸€å ´ Taiwan Hong Kong Cloud Study Jam å·²ç¶“é–‹å§‹ Taiwan \u0026 Hong Kong Cloud Study Jam - æ´»å‹•é¦–é  æ´»å‹•æ™‚é–“: Jan. 19, 2022 17:00 - Feb. 9, 2022 23:59 ","date":"2022-01-23","objectID":"/posts/taiwan-hong-kong-cloud-study-jam-guide/:1:0","tags":["GloudStudyJam","meetup","gdg"],"title":"Taiwan Hong Kong Cloud Study Jam Guide","uri":"/posts/taiwan-hong-kong-cloud-study-jam-guide/"},{"categories":null,"content":"Taiwan \u0026 Hong Kong Cloud Study Jam Together (GDG Cloud Taipei) GDG Cloud Taipei ä¹Ÿé–‹äº†ä¸€å€‹ç·šä¸Šçš„ Meetupï¼Œé‚€è«‹å¤§å®¶ä¸€èµ·ä¸Šç·šå®Œæˆ Cloud Study Jam Lab Meetup event link ğŸ‘ˆ è«‹ä¸Š GDG Cloud Taipei çš„æ´»å‹•é é¢å ±å æ´»å‹•æ™‚é–“: 2022/1/25 19:30 - 21:30 ","date":"2022-01-23","objectID":"/posts/taiwan-hong-kong-cloud-study-jam-guide/:2:0","tags":["GloudStudyJam","meetup","gdg"],"title":"Taiwan Hong Kong Cloud Study Jam Guide","uri":"/posts/taiwan-hong-kong-cloud-study-jam-guide/"},{"categories":null,"content":"Guide GDG Cloud Taipei Meetup æ´»å‹•é–‹ç«‹ä¹‹å¾Œï¼Œä¹Ÿæœ‰æœ‹å‹å¯«ä¿¡ä¾†å• Qwiklab çš„å•é¡Œï¼Œå†ä¾†å®˜æ–¹çš„ä½¿ç”¨æ‰‹å†Šæ˜¯ 2021 çš„ç‰ˆæœ¬ï¼Œå°æ–¼åƒåŠ é Cloud Study Jam çš„æœ‹å‹æ‡‰è©²æ²’æœ‰å¤ªå¤§çš„å•é¡Œï¼Œä¸éå¯«ä¿¡ä¾†çš„æœ‹å‹å•çš„æœ‹å‹çœ‹èµ·ä¾†æ¯”è¼ƒæ˜¯æ²’æœ‰åƒåŠ é Cloud Study Jamï¼Œæ‰€ä»¥ GDG Cloud Taipei å°± fork äº†ä¸€ä»½æ›´æ–°äº†ä¸€äº›å…§å®¹ Cloud Study Jam 2022 TW/HK User Guide - GDG Cloud Taipei Updated - Google Slides ğŸ‘‡ é€™å€‹é€£çµå…§å®¹è·Ÿä¸Šé¢æ˜¯ä¸€è‡³çš„ é€™é‚Šæœ‰å¹¾é»èªªæ˜ä¸€ä¸‹ æ´»å‹•æ˜¯ Google å®˜æ–¹èˆ‰è¾¦çš„ï¼Œè«‹ä¾ç…§å®˜æ–¹çš„æ´»å‹•å ±åé é¢ï¼Œå¦‚æœå ±åäº†æ²’æœ‰æ”¶åˆ° Emailï¼Œè«‹é€£çµ¡ support@qwiklabs.com or è‡³ 2022 TWHK Cloud Study Jam - Google Groups (mailing list) ç™¼å•è«‹æ±‚å”åŠ© å ±åæˆåŠŸç™»å…¥å¾Œï¼ŒQwiklabs æœƒé å…ˆçµ¦ä½  9 å€‹ credit (ä¸éæˆ‘è€é—†åæ‡‰ä»–åªæœ‰ 5 å€‹ credit ğŸ˜…)ã€‚åŸå‰‡ä¸Šå°±æ˜¯æ‹¿é€™ 9 å€‹ credit å»å®Œæˆ Quest list starter ğŸ‘‡ å…¶ä¸­ä¸€å€‹ Lab ä¾†æ› 30 å¤©å…è²»çš„Google Cloud Skills Boost è¨‚é–±, è¨˜å¾— Start Lab çš„æ™‚é–“è¦ \u003e 5 åˆ†é˜ Create and Manage Cloud Resources Set Up and Configure a Cloud Environment in Google Cloud Implement DevOps in Google Cloud åœ¨é¸é»ä»»ä½•ä¸€å€‹ Quest list starter â˜ é€£çµéƒ½æœƒå¸¶æœ‰ä¸€å€‹ qlcampaign çš„å€¼ ğŸ‘‡ ï¼Œé–‹é€šç•¶ä¸‹ä¸è¦äº‚é»åˆ‡æ› URLï¼Œé€™å€‹å€¼ä¸è¦‹äº†æœƒå°è‡³é–‹é€šå¤±æ•— (éå¸¸é‡è¦) ä½¿ç”¨ç„¡ç—•è¦–çª—ä¾†æ“ä½œï¼Œç›´æ¥åœ¨ Open Google Console æŒ‰éˆ•å³éµé–‹å•Ÿç„¡ç—•è¦–çª—å³å¯ï¼ŒUserName æœƒç›´æ¥å¸¶éå» é€™ä¸€æ¬¡æŒ‡å®šçš„ QWIKLABS QUESTS Introductory Create and Manage Cloud Resources Perform Foundational Infrastructure Tasks in Google Cloud Fundamental Build a Website on Google Cloud Automating Infrastructure on Google Cloud with Terraform Implement DevOps in Google Cloud Monitor and Log with Google Cloud Operations Suite Ensure Access \u0026 Identity in Google Cloud Service Serverless Cloud Run Development Cloud Architecture Networking in Google Cloud DevOps Essentials Understanding Your Google Cloud Costs Advanced Cloud Architecture: Design, Implement, and Manage Deploy to Kubernetes in Google Cloud Set Up and Configure a Cloud Environment in Google Cloud Build and Secure Networks in Google Cloud Secure Workloads in Google Kubernetes Engine Optimize Costs for Google Kubernetes Engine Migrate MySQL data to Cloud SQL using Database Migration VM Migration Migrating MySQL data to Cloud SQL using Database Migration Service Anthos Service Mesh Network Performance and Optimization Expert Deploy and Manage Cloud Environments with Google Cloud ","date":"2022-01-23","objectID":"/posts/taiwan-hong-kong-cloud-study-jam-guide/:3:0","tags":["GloudStudyJam","meetup","gdg"],"title":"Taiwan Hong Kong Cloud Study Jam Guide","uri":"/posts/taiwan-hong-kong-cloud-study-jam-guide/"},{"categories":null,"content":"èº«ç‚ºä¸€å€‹å·¥ç¨‹å¸«ï¼Œæ—¥å¸¸ä½¿ç”¨ Markdown ä¾†è¨˜éŒ„å„ç¨®æ±è¥¿å·²ç¶“æ˜¯å¾ˆç¿’æ…£çš„æ–¹å¼ã€‚åœ¨éå¾€ç¶“é©—æ‰¾å·¥ä½œå¿…å‚™çš„ Resume æ˜¯å¦ä¹Ÿå¯ä»¥ä½¿ç”¨ Markdown ä¾†ç·¨å¯«? æŠŠ Resume å¼„çš„ç°¡å–®ä¹¾æ·¨ç¾è§€æ˜¯ä¸€ä»¶ä¸å¤ªå®¹æ˜“çš„äº‹ã€‚ä¹‹å‰å‰›å¥½æ‰¾åˆ°ä¸€å€‹ä¸éŒ¯çš„é–‹æºå°ˆæ¡ˆï¼Œ fork äº†ä¸€ä»½ä¾†ä¿®æ”¹ä¸€ä¸‹è‡ªå·±æ‰€éœ€çš„éƒ¨ä»½, cage1016/react-resume-site æœ¨åŠç°¡æ­· | ä¸€æ¬¾ç”¨ Markdown å°±èƒ½å¯«å‡ºå¥½çœ‹ç°¡æ­·(resume)çš„åœ¨ç·šå·¥å…·","date":"2022-01-22","objectID":"/posts/react-resume-site-write-resume-by-markdown/","tags":["react","vscode","markdown","devcontainer","buildpacks","nginx"],"title":"React Resume Site - Write Resume by Markdown","uri":"/posts/react-resume-site-write-resume-by-markdown/"},{"categories":null,"content":"åœ¨ä¹‹å‰æ‰¾å·¥ä½œçš„ç¶“é©—ç•¶ä¸­ï¼Œæœ‰è¢«è¦æ±‚éåªæ”¶ 104 æ ¼å¼çš„ Resumeï¼Œæ‰¾å€‹å·¥ä½œé‚„è¦å¡«å¯«ä¸€äº›æ²’æœ‰ç›¸é—œçš„æ¬„ä½ï¼Œé‚£å€‹å¹´ä»£åªå¥½å¿ä¸€ä¸‹ ","date":"2022-01-22","objectID":"/posts/react-resume-site-write-resume-by-markdown/:0:0","tags":["react","vscode","markdown","devcontainer","buildpacks","nginx"],"title":"React Resume Site - Write Resume by Markdown","uri":"/posts/react-resume-site-write-resume-by-markdown/"},{"categories":null,"content":"resumeworkshop å‰å¹¾å¤©çš„ Vscode Channel å‰›å¥½æœ‰çœ‹åˆ°æ•™ä½ å¦‚æœä½¿ç”¨ Github dev + Github Page çš„æ–¹å¼çµ¦è‡ªå·±æ­ä¸€å€‹ç°¡æ˜“çš„ Resume ç¶²é  (Full workshop ğŸ‘‰ https://aka.ms/resumeworkshop)ã€‚ç°¡å–®ä¾†èªªå°±æ˜¯ä½¿ç”¨ HTML + CSS ä¾†å‘ˆç¾ï¼Œæ­é… Github Dev + CodeSwing Extension ä¾†è®“å·¥ä½œæµç¨‹å®¹æ˜“ä¸€é» Pros: å¿«é€Ÿ CodeSwing åŠ å¿«å·¥ä½œæ•ˆç‡ Cons: ç°¡å–®çš„æ¨¡ç‰ˆ æƒ³å¢åŠ ç¾è§€éœ€è¦èŠ±å¾ˆå¤šæ™‚é–“èª¿æ•´ HTML + CSS ","date":"2022-01-22","objectID":"/posts/react-resume-site-write-resume-by-markdown/:1:0","tags":["react","vscode","markdown","devcontainer","buildpacks","nginx"],"title":"React Resume Site - Write Resume by Markdown","uri":"/posts/react-resume-site-write-resume-by-markdown/"},{"categories":null,"content":"React resume site èº«ç‚ºä¸€å€‹å·¥ç¨‹å¸«ï¼Œæ—¥å¸¸ä½¿ç”¨ Markdown ä¾†è¨˜éŒ„å„ç¨®æ±è¥¿å·²ç¶“æ˜¯å¾ˆç¿’æ…£çš„æ–¹å¼ã€‚åœ¨éå¾€ç¶“é©—æ‰¾å·¥ä½œå¿…å‚™çš„ Resume æ˜¯å¦ä¹Ÿå¯ä»¥ä½¿ç”¨ Markdown ä¾†ç·¨å¯«? æŠŠ Resume å¼„çš„ç°¡å–®ä¹¾æ·¨ç¾è§€æ˜¯ä¸€ä»¶ä¸å¤ªå®¹æ˜“çš„äº‹ã€‚ä¹‹å‰å‰›å¥½æ‰¾åˆ°ä¸€å€‹ä¸éŒ¯çš„é–‹æºå°ˆæ¡ˆï¼Œ fork äº†ä¸€ä»½ä¾†ä¿®æ”¹ä¸€ä¸‹è‡ªå·±æ‰€éœ€çš„éƒ¨ä»½, cage1016/react-resume-site: æœ¨åŠç®€å†|ä¸€æ¬¾ç”¨ Markdownå°±èƒ½å†™å‡ºå¥½çœ‹ç®€å†(resume)çš„åœ¨çº¿å·¥å…·ã€‚ åŠ å…¥çš„ vscode devcontainer - é–‹ç™¼æ™‚å¯ä»¥æœ‰æ•ˆçš„éš”é›¢ç³»çµ±ç’°å¢ƒï¼ŒContainer æ˜¯å¥½ç‰© å¢åŠ äº† linkedIn åŠ slideshare çš„ fontawesome Icon ä½¿ç”¨ Github Action é€é Buildpack ä¾†æ‰“åŒ…æˆ Container image: react-resume-site/release.yml ä½¿ç”¨ Markdown ä¾†ç·¨å¯« å¯ä»¥ embed åœ–ç‰‡ã€‚å¦‚ï¼šGithub Readme status anuraghazra/github-readme-stats: Dynamically generated stats for your github readmes å¾ˆå®¹æ˜“è±å¯Œé é¢ å¯ä»¥ import/export Markdown æª”æ¡ˆ å¯ä»¥è¼¸å‡º PDF æª” (å¾ˆé‡è¦çš„åŠŸèƒ½) Docker run ç«‹å³äº«æœ‰ ğŸ¤˜ ","date":"2022-01-22","objectID":"/posts/react-resume-site-write-resume-by-markdown/:2:0","tags":["react","vscode","markdown","devcontainer","buildpacks","nginx"],"title":"React Resume Site - Write Resume by Markdown","uri":"/posts/react-resume-site-write-resume-by-markdown/"},{"categories":null,"content":"çŸ¥è­˜é» èº«ç‚ºä¸€å€‹ä¸€ç›´æ¨è–¦å¤§å®¶ä½¿ç”¨ Cloud Native Buildpacks çš„äººï¼Œæœ¬æ¬¡æ‰“åŒ… Container Image ç•¶ç„¶ä¹Ÿè¦ç”¨ä¸€ä¸‹ã€‚React resume site æ˜¯ä¸€å€‹ Node.js çš„æ‡‰ç”¨ç¨‹å¼ã€‚ç¾åœ¨å¤§å®¶å¸¸ç”¨å‰å¾Œç«¯æ¶æ§‹åˆ†é›¢çš„æ¢ä»¶ä¸‹ï¼Œå‰ç«¯è‡ªå·±çš„ CI/CD Pipeline æœ€çµ‚ç”¢ç‰©æ˜¯ä¸€å † HTML + CSS + JS ç­‰ç­‰çš„éœæ…‹æª”æ¡ˆï¼Œä¸Š Container Image æ™‚å°±å¯ä»¥æ­é… Nginx ä½¿ç”¨ã€‚ç›¸è¼ƒå°ˆæ¡ˆæœ¬èº«ä½¿ç”¨çš„ Dockerfile å–®ç´”æŠŠæ•´å€‹å°ˆæ¡ˆç›´æ¥æ”¾åœ¨ Container ä¸ŠåŸ·è¡Œçš„ä½œæ³•æ˜¯æ¯”è¼ƒå°‘ç”¨çš„ å‰ç½®ä½œæ¥­å°±æ˜¯é€é npm run build ç”¢å‡ºæœ€å¾Œçš„éœæ…‹æª”æ¡ˆ ä½¿ç”¨ gcr.io/paketo-buildpacks/nginx buildpack ä¾† Serving é€™äº›éœæ…‹æª”æ¡ˆ Builder çš„éƒ¨ä»½é…åˆ gcr.io/paketo-buildpacks/nginxï¼Œä½¿ç”¨ paketobuildpacks/builder:base æº–å‚™ react-resume-site/nginx.conf Nginx Config æº–å‚™ react-resume-site/mime.types mime.types æº–å‚™ react-resume-site/project.toml åœ¨æ‰“åŒ… Container Image å¯ä»¥æ’é™¤ä¸€äº›ä¸éœ€è¦çš„æª”æ¡ˆ (Optional) pack build ghcr.io/cage1016/react-resume-site:0.1.0 --buildpack gcr.io/paketo-buildpacks/nginx --builder paketobuildpacks/builder:base ... ===\u003e DETECTING paketo-buildpacks/nginx 0.5.2 ===\u003e ANALYZING Previous image with name \"ghcr.io/cage1016/react-resume-site:0.1.0\" not found ===\u003e RESTORING ===\u003e BUILDING Paketo Nginx Server Buildpack 0.5.2 Resolving Nginx Server version Candidate version sources (in priority order): buildpack.toml -\u003e \"1.21.*\" Selected Nginx Server version (using buildpack.toml): 1.21.4 Executing build process Installing Nginx Server 1.21.4 Completed in 222ms Configuring build environment PATH -\u003e \"$PATH:/layers/paketo-buildpacks_nginx/nginx/sbin\" Configuring launch environment PATH -\u003e \"$PATH:/layers/paketo-buildpacks_nginx/nginx/sbin\" Writing profile.d/configure.sh Calls executable that parses templates in nginx conf ===\u003e EXPORTING Adding layer 'paketo-buildpacks/nginx:nginx' Adding 1/1 app layer(s) Adding layer 'launcher' Adding layer 'config' Adding layer 'process-types' Adding label 'io.buildpacks.lifecycle.metadata' Adding label 'io.buildpacks.build.metadata' Adding label 'io.buildpacks.project.metadata' Setting default process type 'web' Saving ghcr.io/cage1016/react-resume-site:0.1.0... *** Images (sha256:cfe7259ffd44b824ab32146427ea06186c8dc2185c44a0125f035572a0125b96): ghcr.io/cage1016/react-resume-site:0.1.0 Successfully built image ghcr.io/cage1016/react-resume-site:0.1.0 ","date":"2022-01-22","objectID":"/posts/react-resume-site-write-resume-by-markdown/:2:1","tags":["react","vscode","markdown","devcontainer","buildpacks","nginx"],"title":"React Resume Site - Write Resume by Markdown","uri":"/posts/react-resume-site-write-resume-by-markdown/"},{"categories":null,"content":"Usage Pull Container Image docker pull ghcr.io/cage1016/react-resume-site:0.1.0 Run Container Image docker run --rm --env PORT=8080 -p 8080:8080 ghcr.io/cage1016/react-resume-site:0.1.0 Visit http://localhost:8080 ","date":"2022-01-22","objectID":"/posts/react-resume-site-write-resume-by-markdown/:3:0","tags":["react","vscode","markdown","devcontainer","buildpacks","nginx"],"title":"React Resume Site - Write Resume by Markdown","uri":"/posts/react-resume-site-write-resume-by-markdown/"},{"categories":null,"content":"æœ¨åŠç®€å† https://www.mujicv.com/ é€™é‚Šé‚„æœ‰æ›´å¤šçš„æ¨¡ç‰ˆå¯ä»¥ä¸‹è¼‰ ","date":"2022-01-22","objectID":"/posts/react-resume-site-write-resume-by-markdown/:4:0","tags":["react","vscode","markdown","devcontainer","buildpacks","nginx"],"title":"React Resume Site - Write Resume by Markdown","uri":"/posts/react-resume-site-write-resume-by-markdown/"},{"categories":null,"content":"æœ€è¿‘å·¥ä½œä¸Šæœ‰ä½¿ç”¨ [Apache JMeter](https://jmeter.apache.org/) çš„éœ€æ±‚ï¼Œä½¿ç”¨çš„æƒ…å¢ƒå¾ˆç°¡å–®ï¼Œåœ¨ç¡¬é«”æœ‰æ”¯æ´çš„æƒ…æ³ä¸‹é€²è¡Œéœæ…‹ website çš„å£“åŠ›æ¸¬è©¦ï¼Œæ‰€ä»¥è¨˜éŒ„ä¸€ä¸‹æœ€è¿‘çš„å·¥ä½œå…§å®¹","date":"2021-12-23","objectID":"/posts/build-jmeter-docker-with-plugins/","tags":["jmeter","docker","s390x","ghcr.io"],"title":"Build Jmeter Docker With Plugins","uri":"/posts/build-jmeter-docker-with-plugins/"},{"categories":null,"content":"æœ€è¿‘å·¥ä½œä¸Šæœ‰ä½¿ç”¨ Apache JMeter çš„éœ€æ±‚ï¼Œä½¿ç”¨çš„æƒ…å¢ƒå¾ˆç°¡å–®ï¼Œåœ¨ç¡¬é«”æœ‰æ”¯æ´çš„æƒ…æ³ä¸‹é€²è¡Œéœæ…‹ website çš„å£“åŠ›æ¸¬è©¦ï¼Œæ‰€ä»¥è¨˜éŒ„ä¸€ä¸‹æœ€è¿‘çš„å·¥ä½œå…§å®¹ static website: cage1016/static-website-example: Static website to use with Cloud Academy labs Nginx: nginx:1.20.2-alpine Jmeter with Plugins: cage1016/docker-jmeter Jmeter Test Plan Usage ","date":"2021-12-23","objectID":"/posts/build-jmeter-docker-with-plugins/:0:0","tags":["jmeter","docker","s390x","ghcr.io"],"title":"Build Jmeter Docker With Plugins","uri":"/posts/build-jmeter-docker-with-plugins/"},{"categories":null,"content":"Static website To be used with Cloud Academy labs. é€™æ˜¯ä¸€å€‹å–è‡ª Cloud Academy labs å»ºç«‹çš„éœæ…‹ç¶²é ï¼Œå‰›å¥½å¯ä»¥æ‹¿ä¾†ä½œç‚º Jmeter å£“åŠ›æ¸¬è©¦çš„ç¶²é ï¼Œæ­é… Nginx ä¸€èµ·ä½¿ç”¨ Dockerfile FROM nginx:1.20.2-alpine COPY health /usr/share/nginx/html COPY default.conf /etc/nginx/conf.d/default.conf COPY assets /usr/share/nginx/html/assets COPY error /usr/share/nginx/html/error COPY images /usr/share/nginx/html/images COPY index.html /usr/share/nginx/html docker build -t ghcr.io/cage1016/nginx-website-gz:0.1.0 . Container images ghcr.io/cage1016/nginx-website:0.1.0 ghcr.io/cage1016/nginx-website-gz:0.1.0 ","date":"2021-12-23","objectID":"/posts/build-jmeter-docker-with-plugins/:1:0","tags":["jmeter","docker","s390x","ghcr.io"],"title":"Build Jmeter Docker With Plugins","uri":"/posts/build-jmeter-docker-with-plugins/"},{"categories":null,"content":"Jmeter åœ¨é€²è¡Œ Jmeter éƒ¨ä»½æ™‚ï¼Œè€ƒæ…®åˆ°æ¸¬è©¦ç’°å¢ƒä»¥ command line å·¥å…·é€²è¡Œç‚ºä¸»æ¯”è¼ƒæ–¹ä¾¿ï¼Œæ‰€ä»¥é¸æ“‡äº† Jmeter çš„ Docker ç‰ˆæœ¬ justb4/jmeterï¼Œä¸éé‡åˆ°é€™å€‹ç‰ˆæœ¬ä¸æ”¯æ´ IBM s390x çš„æ¶æ§‹ã€‚å¦å¤–åœ¨ azure devops - Using JMeter plugins with justb4/jmeter Docker image results in error - Stack Overflow æœ‰çœ‹åˆ° justb4/jmeter ä½¿ç”¨ Plugin å ±å‡ºä¸€äº›å•é¡Œï¼Œæ‰€ä»¥å°±è‡ªå·±åŒ…å•¦ æ‰¾åˆ°ç›¸é—œçš„ Dockerfile ä¸‹è¼‰ Jmeter åŠé¡å¤–æ‰€éœ€çš„ Plugins æ‰¾åˆ°ç›¸é—œçš„ Dockerfile æ„Ÿè¬ Google / Githubã€‚linux-on-ibm-z/dockerfile-examples é›–ç„¶æ²’æœ‰åœ¨ç¶­è­·äº†ï¼Œä¸éå¯ä»¥è®“æˆ‘å€‘å¤§è‡³çŸ¥é“éœ€è¦é‚£äº›éƒ¨ä»¶ï¼ŒåŸºæœ¬æ¶æ§‹å¯ä»¥ä½¿ç”¨ (Base imageã€openjdk ç­‰ç­‰) ä¸‹è¼‰ Jmeter åŠé¡å¤–æ‰€éœ€çš„ Plugins æ‰€éœ€çš„ Jmeter åŠé¡å¤–æ‰€éœ€çš„ Plugins éƒ½å¯ä»¥é€é Central Repository: kg/apc é€™å€‹ç¶²ç«™å¾— Dockerfile ... # Download from git and build RUN mkdir -p /tmp/dependencies \\ \u0026\u0026 wget https://archive.apache.org/dist/jmeter/binaries/apache-jmeter-$JMETER_VER.tgz -O /tmp/dependencies/apache-jmeter-$JMETER_VER.tgz \\ \u0026\u0026 mkdir -p /opt \\ \u0026\u0026 tar -xvzf /tmp/dependencies/apache-jmeter-$JMETER_VER.tgz -C /opt \\ ; # plugins RUN wget ${JMETER_PLUGINS_DOWNLOAD_URL}/jmeter-plugins-manager/${JMETER_PLUGINS_MANAGER_VERSION}/jmeter-plugins-manager-${JMETER_PLUGINS_MANAGER_VERSION}.jar -O $JMETER_HOME/lib/ext/jmeter-plugins-manager-${JMETER_PLUGINS_MANAGER_VERSION}.jar \\ \u0026\u0026 wget ${JMETER_PLUGINS_DOWNLOAD_URL}/cmdrunner/$CMDRUNNER_VERSION/cmdrunner-$CMDRUNNER_VERSION.jar -O $JMETER_HOME/lib/cmdrunner-$CMDRUNNER_VERSION.jar \\ \u0026\u0026 java -cp $JMETER_HOME/lib/ext/jmeter-plugins-manager-${JMETER_PLUGINS_MANAGER_VERSION}.jar org.jmeterplugins.repository.PluginManagerCMDInstaller \\ \u0026\u0026 cd ${JMETER_HOME}/bin \u0026\u0026 ./PluginsManagerCMD.sh install jpgc-mergeresults \\ \u0026\u0026 cd ${JMETER_HOME}/bin \u0026\u0026 ./PluginsManagerCMD.sh install jpgc-synthesis \\ \u0026\u0026 cd ${JMETER_HOME}/bin \u0026\u0026 ./PluginsManagerCMD.sh install jpgc-cmd \\ \u0026\u0026 cd ${JMETER_HOME}/bin \u0026\u0026 ./PluginsManagerCMD.sh install jpgc-casutg \\ \u0026\u0026 cd ${JMETER_HOME}/bin \u0026\u0026 ./PluginsManagerCMD.sh install jpgc-json \\ \u0026\u0026 cd ${JMETER_HOME}/bin \u0026\u0026 ./PluginsManagerCMD.sh install jpgc-graphs-additional \\ \u0026\u0026 cd ${JMETER_HOME}/bin \u0026\u0026 ./PluginsManagerCMD.sh status \\ ... Dockerfile docker-jmeter/Dockerfile docker-jmeter/Dockerfile.s390x Container images ghcr.io/cage1016/jmeter:5.4.1 ","date":"2021-12-23","objectID":"/posts/build-jmeter-docker-with-plugins/:2:0","tags":["jmeter","docker","s390x","ghcr.io"],"title":"Build Jmeter Docker With Plugins","uri":"/posts/build-jmeter-docker-with-plugins/"},{"categories":null,"content":"Jmeter Test Plan åœ¨æº–å‚™å¥½äº†éœæ…‹ç¶²ç«™åŠ Docker ç‰ˆæœ¬çš„ Jmeter ä¹‹å¾Œï¼Œæ¥ä¸‹ä¾†å°±æ˜¯æ±ºå®š Jmeter Test Planï¼Œç”±æ–¼æœ€çµ‚æ¸¬è©¦æœƒæœ‰ç¡¬é«”åŠ é€Ÿæ”¯æ´çš„éƒ¨ä»½ï¼Œæƒ…å¢ƒå°±æ˜¯é‡å° Nginx + Nginx å•Ÿç”¨ gzip åŠŸèƒ½ä¾†å°æ¯”ï¼Œå› æ­¤ Test Plan å°±æœƒæ˜¯ä»¥ HTTP Request ç‚ºä¸» Jmeter ä¸­ä¹Ÿæä¾›äº† Test Script Recorder çš„å·¥å…·ï¼Œå¯ä»¥æ­é… Jmeter Proxy + Firefox ä¸€èµ·ä½¿ç”¨ï¼Œé€™æ¨£å°±å¯ä»¥çœå»æ‰‹å‹•å»ºç«‹é‚£äº› HTTP Request ç¹é–çš„å‹•ä½œï¼Œéå¸¸çš„æ–¹ä¾¿ docker-jmeter-s390x/ap.jmx ","date":"2021-12-23","objectID":"/posts/build-jmeter-docker-with-plugins/:3:0","tags":["jmeter","docker","s390x","ghcr.io"],"title":"Build Jmeter Docker With Plugins","uri":"/posts/build-jmeter-docker-with-plugins/"},{"categories":null,"content":"Usage åœ¨æº–å‚™å¥½ Test Plan ä¹‹å¾Œå°±å¯ä»¥é€é Docker ç‰ˆæœ¬çš„ Jmeter ç›´æ¥åŸ·è¡Œ Pull Docker image for x86 or x390x $ docker pull ghcr.io/cage1016/nginx-website-gz:0.1.0 $ docker pull ghcr.io/cage1016/nginx-website:0.1.0 $ docker pull ghcr.io/cage1016/jmeter:5.4.1 Dowonload jmeter.sh and test jmx ap.jmx $ wget https://raw.githubusercontent.com/cage1016/docker-jmeter/master/jmeter.sh \u0026\u0026 chmod +x jmeter.sh $ wget https://raw.githubusercontent.com/cage1016/docker-jmeter/master/ap.jmx Start Nginx with gz $ docker run --rm -d -p 8080:80 ghcr.io/cage1016/nginx-website-gz:0.1.0 #or $ podman run --rm -d -p 8080:80 ghcr.io/cage1016/nginx-website-gz:0.1.0 Run Jmeter with Docker $ ./jmeter.sh Error: Please specify JMX using -f. Usage: jmeter.sh [-d \u003cdeamon\u003e] [-i \u003cjmeter_docker_image\u003e] [-f \u003cjmx_file\u003e] [-t \u003ctest_folder\u003e] [-z \u003cenable_tar_html\u003e] [-l \u003cjmeterVariablesList\u003e] -d : Deamon, docker/podman (default: docker) -t : Test directory (default: ./tmp) -i : Jmeter docker image -f : Specify JMX file -l : Specify env list of Jmeter in following format: prop01=XXX,bbb=YYY,ccc=ZZZ -z : Enable tar html report (default: false) Example1: jmeter.sh -f ap.jmx Example2: jmeter.sh -i ghcr.io/cage1016/jmeter:5.4.1 -f ap.jmx Example3: jmeter.sh -i ghcr.io/cage1016/jmeter:5.4.1 -f ap.jmx -l prop01=XXX,prop02=YYY Run test ap.jmx $ ./jmeter.sh -i ghcr.io/cage1016/jmeter:5.4.1 -f ap.jmx -t ap -z true -l TARGET_HOST=localhost,TARGET_PORT=8080,THREADS=1,RAMD_UP=1,DURATION=10 docker run --rm --name jmeter --network host -i -v ${PWD}:${PWD} -w ${PWD} ghcr.io/cage1016/jmeter:5.4.1 ap.jmx -l ap/jmeter.jtl -j ap/jmeter.log -JTARGET_HOST=localhost -JTARGET_PORT=8080 -JTHREADS=1 -JRAMD_UP=1 -JDURATION=10 -o ap/report -e Creating summariser \u003csummary\u003e Created the tree successfully using ap.jmx Starting standalone test @ Wed Dec 29 08:39:40 GMT 2021 (1640767180391) Waiting for possible Shutdown/StopTestNow/HeapDump/ThreadDump message on port 4445 Warning: Nashorn engine is planned to be removed from a future JDK release summary = 8157 in 00:00:10 = 812.8/s Avg: 1 Min: 0 Max: 36 Err: 0 (0.00%) Tidying up ... @ Wed Dec 29 08:39:50 GMT 2021 (1640767190744) ... end of run ==== jmeter.log ==== See jmeter log in ap/jmeter.log ==== Raw Test Report ==== See Raw test report in ap/ap.jmx.jtl ==== HTML Test Report ==== See HTML test report in ap/report/index.html ==== Tar report ==== See Tar file in ap/1640767193.tar.gz æª¢è¦–ç”¢å‡º ./ap/jmeter.log: Jmeter åŸ·è¡Œçš„ Log æª”æ¡ˆ ./ap/jmeter.jtl: Jmeter UI Linstern è¼‰å…¥è³‡æ–™ ./ap/report/index.html: HTLM å ±è¡¨ ","date":"2021-12-23","objectID":"/posts/build-jmeter-docker-with-plugins/:4:0","tags":["jmeter","docker","s390x","ghcr.io"],"title":"Build Jmeter Docker With Plugins","uri":"/posts/build-jmeter-docker-with-plugins/"},{"categories":null,"content":"Jmeter Youtube toturial ","date":"2021-12-23","objectID":"/posts/build-jmeter-docker-with-plugins/:5:0","tags":["jmeter","docker","s390x","ghcr.io"],"title":"Build Jmeter Docker With Plugins","uri":"/posts/build-jmeter-docker-with-plugins/"},{"categories":null,"content":"Alfred æ˜¯ä¸€å€‹åœ¨ Mac ä¸Šé¢å¢åŠ ç”Ÿç”¢åŠ›çš„å·¥å…·ï¼Œèˆ‰å‡¡å·¥ç¨‹å¸«å¸¸ç”¨çš„ Githubã€Google Drive æœå°‹åˆ° LeetCode Search ç­‰åŸéƒ½å¯ä»¥åœ¨ Alfred å®Œæˆï¼Œç°¡ç›´å°±æ˜¯å¤ªæ–¹ä¾¿äº†ã€‚è‡ªå·±ä¹Ÿæœ‰æ›¾ç¶“æƒ³è¦é–‹ç™¼è‡ªå·±çš„ Alfred æ‡‰ç”¨ï¼Œç›´åˆ°é‡åˆ° deanishe/awgo ä¹‹å¾Œå°±åƒæ’¿åˆ°å¯¶ä¸€æ¨£ï¼Œä½œç‚ºä¸€å€‹ Gopher ä¹Ÿæ‰¾åˆ°é©åˆçš„å·¥å…·ä¾†é–‹ç™¼è‡ªå·±çš„ Alfred æ‡‰ç”¨ã€‚","date":"2021-12-07","objectID":"/posts/alfred-change-case/","tags":["awgo","alfred","vscode","pyenv","githubaction"],"title":"Alfred Change Case","uri":"/posts/alfred-change-case/"},{"categories":null,"content":"Alfred 4 for Mac Alfred is an award-winning app for macOS which boosts your efficiency with hotkeys, keywords, text expansion and more. Search your Mac and the web, and be more productive with custom actions to control your Mac. Alfred - Productivity App for macOS Alfred æ˜¯ä¸€å€‹åœ¨ Mac ä¸Šé¢å¢åŠ ç”Ÿç”¢åŠ›çš„å·¥å…·ï¼Œèˆ‰å‡¡å·¥ç¨‹å¸«å¸¸ç”¨çš„ Githubã€Google Drive æœå°‹åˆ° LeetCode Search ç­‰åŸéƒ½å¯ä»¥åœ¨ Alfred å®Œæˆï¼Œç°¡ç›´å°±æ˜¯å¤ªæ–¹ä¾¿äº†ã€‚è‡ªå·±ä¹Ÿæœ‰æ›¾ç¶“æƒ³è¦é–‹ç™¼è‡ªå·±çš„ Alfred æ‡‰ç”¨ï¼Œç›´åˆ°é‡åˆ° deanishe/awgo: Go library for Alfred 3 + 4 workflows ä¹‹å¾Œå°±åƒæ’¿åˆ°å¯¶ä¸€æ¨£ï¼Œä½œç‚ºä¸€å€‹ Gopher ä¹Ÿæ‰¾åˆ°é©åˆçš„å·¥å…·ä¾†é–‹ç™¼è‡ªå·±çš„ Alfred æ‡‰ç”¨ã€‚ ","date":"2021-12-07","objectID":"/posts/alfred-change-case/:1:0","tags":["awgo","alfred","vscode","pyenv","githubaction"],"title":"Alfred Change Case","uri":"/posts/alfred-change-case/"},{"categories":null,"content":"Change case alfred workflow This is change case tools inspired by change-case - Visual Studio Marketplace and wrapper by ku/go-change-case. Quickly change the case of a string or latest clipboard string and copy it to the clipboard. ","date":"2021-12-07","objectID":"/posts/alfred-change-case/:2:0","tags":["awgo","alfred","vscode","pyenv","githubaction"],"title":"Alfred Change Case","uri":"/posts/alfred-change-case/"},{"categories":null,"content":"Select Change Case options ","date":"2021-12-07","objectID":"/posts/alfred-change-case/:2:1","tags":["awgo","alfred","vscode","pyenv","githubaction"],"title":"Alfred Change Case","uri":"/posts/alfred-change-case/"},{"categories":null,"content":"Change Case by specific option directly ç”±æ–¼è‡ªå·±å¹³å¸¸å°æ–¼æ–‡ä¸²è½‰æ›çš„éœ€æ±‚ä¸å°ï¼Œåœ¨ vscode ä¸­å¯ä»¥ä¾è³´ change-case - Visual Studio Marketplace ä¾†å®Œæˆéœ€æ±‚ï¼›ä¸éè‹¥åœ¨ vscode ç’°å¢ƒä¹‹å¤–å°±æ²’æœ‰é‚£éº¼æ–¹ä¾¿ï¼Œä¹Ÿå°±æ˜¯é€™ä¸€æ¬¡ slide project - cage1016/alfred-change-case çš„ç”±ä¾† ","date":"2021-12-07","objectID":"/posts/alfred-change-case/:2:2","tags":["awgo","alfred","vscode","pyenv","githubaction"],"title":"Alfred Change Case","uri":"/posts/alfred-change-case/"},{"categories":null,"content":"alfred-change-case æœ¬æ¬¡æœ‰ä½¿ç”¨åˆ°ä¸‹é¢çš„çŸ¥è­˜é» deanishe/awgo: Go library for Alfred 3 + 4 workflows: Go library for Alfred 3 + 4 workflows ku/go-change-case: a golang port of npm package change-case pyenv + virtualenv + pip æº–å‚™ Python ç’°å¢ƒ + workflow-install.py ä¾†å°‡ .workflow æ‰€éœ€çš„æª”æ¡ˆå‹•æ…‹å®‰è£è‡³ Alfred ä¸­ï¼Œåœ¨ vscode çš„ç’°å¢ƒä¸­æ­é… vscode çš„ tasks ä¾†åŸ·è¡Œéå¸¸æ–¹ä¾¿ go build prepare-info.plist install Github action ä½¿ç”¨ runs-on: macOS-latest ä¾†æ‰“åŒ…æ•´å€‹ .alfredworkflow ä¸¦ä¸Šå‚³è‡³ Github release asset ä¸­ï¼Œå»ºç«‹ä¸€å€‹ Release å°±å¯ä»¥å®Œæˆç™¼ä½ˆçš„å‹•ä½œ ","date":"2021-12-07","objectID":"/posts/alfred-change-case/:2:3","tags":["awgo","alfred","vscode","pyenv","githubaction"],"title":"Alfred Change Case","uri":"/posts/alfred-change-case/"},{"categories":null,"content":"å¿ƒå¾— é€™ä¸€æ¬¡çš„ cage1016/alfred-change-case çš„å­—ä¸²è½‰æ›åŸºæœ¬å°è£ ku/go-change-case ç‚ºåŸºç¤è½‰æ›æˆ Alfred çš„ workflowã€‚åœ¨ deanishe/awgo: Go library for Alfred 3 + 4 workflows ä¸Šå–®ç´”é€²è¡Œç°¡å–®çš„æµç¨‹æ“ä½œï¼Œä½œç‚ºä¸€å€‹ Gopher ä¾†èªªæ˜¯è¦ºå¾—é–‹ç™¼éç¨‹å¾ˆæµæš¢ï¼Œé€™ä¸€æ¬¡çš„é–‹ç™¼ç¶“é©—å¯ä»¥å¾ˆå¿«çš„è¤‡è£½åˆ°å…¶ä»–çš„ Alfred workflow å°ˆæ¡ˆ Source code: cage1016/alfred-change-case Download: change-case-1.0.0.alfredworkflow ","date":"2021-12-07","objectID":"/posts/alfred-change-case/:3:0","tags":["awgo","alfred","vscode","pyenv","githubaction"],"title":"Alfred Change Case","uri":"/posts/alfred-change-case/"},{"categories":null,"content":"Artifact Registry å¯ä»¥èªªæ˜¯ Container Registry çš„é€²åŒ–ç‰ˆï¼Œå¯è®“è²´æ©Ÿæ§‹é›†ä¸­ç®¡ç†å®¹å™¨æ˜ åƒæª”å’Œèªè¨€å¥—ä»¶ (ä¾‹å¦‚ Maven å’Œ npm)ã€‚Artifact Registry èˆ‡ Google Cloud çš„å·¥å…·å’ŒåŸ·è¡Œéšæ®µå…¨æ–¹ä½æ•´åˆï¼Œä¸¦ä¸”æ”¯æ´åŸç”Ÿæ§‹ä»¶é€šè¨Šå”å®šï¼Œè®“æ‚¨è¼•é¬†èˆ‡æŒçºŒæ•´åˆ/æŒçºŒæ¨é€è»Ÿé«”æ›´æ–° (CI/CD) å·¥å…·æ•´åˆï¼Œé€²è€Œè¨­å®šè‡ªå‹•åŒ–ç®¡é“ã€‚ Slideshare Devfest 2021â€™ - Artifact Registry Introduction (Taipei) ","date":"2021-11-30","objectID":"/posts/devfest21-taipei-artifact-registry-introduction/:0:0","tags":["devfest","container","registry","helm","artifact"],"title":"Devfest21 Taipei Artifact Registry Introduction","uri":"/posts/devfest21-taipei-artifact-registry-introduction/"},{"categories":null,"content":"åŠŸèƒ½æ€§ ä½œç‚º Container Registry ä¸‹ä¸€ä»£é€šç”¨è§£æ±ºæ–¹æ¡ˆçš„ç¹¼ä»»è€… Artifact Registry é™¤äº†å»¶çºŒåŸæœ‰çš„åŠŸèƒ½ä¹‹å¤–å¢åŠ äº†å° Package é¡å‹çš„æ”¯æŒ Container images: Docker, Helm Language packages: Java, Node.js, Python OS packages (Preview): Debian, RPM Aritfact Registry åœ¨ Container image çš„æ”¯æŒäº† Docker V2, OCI Image Format äºŒç¨®æ ¼å¼ã€‚åœ¨ Aritfact Registry å¯¦ä½œäº† OCI Specification + Helm 3 æ”¯æŒäº† chart packages in OCI format çš„åŠŸèƒ½ï¼Œä¹Ÿå› ç‚ºæˆ‘å€‘å¯ä»¥æŠŠ Helm chart å„²å­˜åœ¨ Artifact registry ä¹‹ä¸­ï¼Œé€™å€‹ä¹Ÿè§£æ±ºäº†ä¸Šä¸€ä»£ï¼Œæˆ‘å€‘çš„ Container image å¯ä»¥æ”¾åœ¨ Container Registry è€Œæˆ‘å€‘çš„ç§æœ‰çš„ Helm chart å»éœ€è¦ä½¿ç”¨ Helm + GCS plugin ä¾†æ­é…ä½¿ç”¨ Container Registry + Helm + GCS plugin Artifact Registry This is a tip æƒ³æŠŠ Helm chart å„²å­˜åœ¨ Artifact Registry æ™‚ï¼Œéœ€è¦æ³¨æ„ Helm çš„ç‰ˆæœ¬ï¼ŒHelm åœ¨ Release Helm 3.7.0 Â· helm/helm æŠŠå°æ–¼ oci experimental ç›¸é—œçš„ subcommand ç§»é™¤äº†ï¼Œæ‰€ä»¥ 3.7.0 ä»¥ä¸Šçš„ç‰ˆæœ¬å°±å¿…éœ€å…ˆé€é helm package ç”¢å‡º tgz æª”æ¡ˆï¼Œå†å°‡ tgz æ¨é€è‡³ Artifact Registry ","date":"2021-11-30","objectID":"/posts/devfest21-taipei-artifact-registry-introduction/:1:0","tags":["devfest","container","registry","helm","artifact"],"title":"Devfest21 Taipei Artifact Registry Introduction","uri":"/posts/devfest21-taipei-artifact-registry-introduction/"},{"categories":null,"content":"éˆæ´»æ€§ Multiple repositories Artifact Registry å¢åŠ äº†åœ¨åŒä¸€å€‹ GCP Project å¯ä»¥å»ºç«‹å‡ºå€‹ Repositoryï¼Œå¯ä»¥åˆ†åˆ¥å°æ‡‰åˆ°ä¸åŒçš„å±¬æ€§ (Container images / Language packages / OS packages)ï¼Œå–®ä¸€ Repository å¯ä»¥æŒ‡å®šè‡³ç‰¹åˆ¥çš„ Zone æˆ–æ˜¯ Regionï¼Œå…¶ä¸­ä¸€å€‹ç‰¹é»æ˜¯è¢«æŒ‡æ´¾çš„æ¯ä¸€å€‹ Region éƒ½ç›¸éš” 100 è‹±é‡Œä»¥ä¸Šã€‚å¥½è™•æ˜¯æœ‰ç•°åœ°å‚™æ´çš„æ¦‚å¿µï¼Œå£è™•æœƒåæ‡‰åœ¨ Billing ä¸Šé¢ï¼Œè·¨ Region Egress æ˜¯æœƒæ”¶è²»çš„ ç¸½ä¹‹å¤šäº†æ­é…çš„å¯èƒ½æ€§ï¼Œå¤§å®¶å¯ä»¥ä¾ç…§ä½¿ç”¨å ´æ™¯ä¾†é¸æ“‡è‡ªå·±é©åˆçš„çµ„åˆ ","date":"2021-11-30","objectID":"/posts/devfest21-taipei-artifact-registry-introduction/:2:0","tags":["devfest","container","registry","helm","artifact"],"title":"Devfest21 Taipei Artifact Registry Introduction","uri":"/posts/devfest21-taipei-artifact-registry-introduction/"},{"categories":null,"content":"å®‰å…¨æ€§ IAM Role å®‰å…¨æ€§ä¸€ç›´æ˜¯å¾ˆé‡è¦çš„é¡Œç›®ã€‚åœ¨ä¸Šä¸€ä»£æƒ³æŠŠ Helm Chart éƒ¨ç½²åœ¨ GCP å¹³å°ä¸Šå°±æœƒä½¿ç”¨ Helm + GCS pluginã€‚åœ¨é€™ç¨®çµ„åˆä¹‹ä¸‹æ¬Šé™æ§ç®¡å°±æœƒè®Šæˆ GCS æª”æ¡ˆçš„å„²å–æ¬Š roles/storage.objectViewer roles/storage.legacyBucketWriter roles/storage.admin è€Œ Aritfact Registry åœ¨å®‰å…¨æ€§ç®¡æ§é€™ä¸€å¡Šæä¾›æ›´ç´°ç²’åº¦çš„å½ˆæ€§ï¼Œè®“æˆ‘å€‘å¯ä»¥è·Ÿæ“šä½¿ç”¨å ´æ™¯æŒ‡æ´¾é©åˆçš„æ¬Šé™ä¾†é™ä½å®‰å…¨é¢¨éšª Project Owner roles/artifactregistry.repoAdmin roles/artifactregistry.admin Project Editor roles/artifactregistry.writer Project Viewer roles/artifactregistry.reader ","date":"2021-11-30","objectID":"/posts/devfest21-taipei-artifact-registry-introduction/:3:0","tags":["devfest","container","registry","helm","artifact"],"title":"Devfest21 Taipei Artifact Registry Introduction","uri":"/posts/devfest21-taipei-artifact-registry-introduction/"},{"categories":null,"content":"Summary Summary Info Artifact Registry is the recommended service for managing container images. Container Registry is still supported but will only receive critical security fixes Artifact Registry ä½œç‚º Container Registry çš„é€²åŒ–ç‰ˆï¼Œé™¤äº†ä¿ç•™ Container Registry åŸæœ‰çš„åŠŸèƒ½ä¹‹å¤–ï¼Œæˆ‘å€‘å¯ä»¥çœ‹åˆ°å¾ åŠŸèƒ½æ€§ éˆæ´»æ€§ å®‰å…¨æ€§ ä¸Šé¢çš„åŠ å¼·ã€‚è€Œå®˜æ–¹ä¹Ÿæœ‰è²å, Container Registry é™¤äº†å®‰å…¨æ€§ä¿®å¾©ä¹‹å¤–ä¸æœƒå†æœ‰æ–°åŠŸèƒ½çš„è¨ˆåŠƒï¼Œèªªæ˜æ–‡ä»¶ä¹Ÿæœ‰é·ç§»çš„æ•™å­¸æ–‡ä»¶å¯ä»¥åƒè€ƒ æœ€å¾Œé‚„æ˜¯å†å¼·èª¿ï¼Œå¤§å®¶é‚„æ˜¯éœ€è¦é‡å°è‡ªå·±çš„ä½¿ç”¨å ´æ™¯ä¾†é¸æ“‡çµ„åˆï¼Œæ‰æœƒç”¨çš„é–‹å¿ƒï¼Œçœ‹åˆ° Billing ä¹Ÿé–‹å¿ƒ ","date":"2021-11-30","objectID":"/posts/devfest21-taipei-artifact-registry-introduction/:4:0","tags":["devfest","container","registry","helm","artifact"],"title":"Devfest21 Taipei Artifact Registry Introduction","uri":"/posts/devfest21-taipei-artifact-registry-introduction/"},{"categories":null,"content":"å› ç‚º Covid-19 çš„åŸå› ï¼Œå»å¹´ Cloud Next 20' è‡¨æ™‚æ”¹æˆç·šä¸Šæ´»å‹• (7 æœˆ 14 æ—¥ â€“ 9 æœˆ 8 æ—¥) æŒçºŒäº†2å€‹æœˆã€‚ä»Šå¹´ Cloud Next 21' å°±å¦‚åŒä»¥å‰ç‚ºæœŸ 3 å¤© (10æœˆ 12 æ—¥ â€“ 10 æœˆ 14 æ—¥)çš„æ´»å‹•ï¼Œåªæ˜¯æ”¹ç‚ºç·šä¸Šã€‚æœ¬æ¬¡ Meetup ?å°±åœ¨æ­£å¼æ´»å‹•å‰è·Ÿå¤§å®¶ä»‹ç´¹ä¸€ä¸‹å¦‚ä½•è©²å®‰æ’è‡ªå·±çš„ Session","date":"2021-10-13","objectID":"/posts/cloud-next-21-pre-event/","tags":["GoogleCloudNext"],"title":"Cloud Next 21 Pre Event","uri":"/posts/cloud-next-21-pre-event/"},{"categories":null,"content":"å› ç‚º Covid-19 çš„åŸå› ï¼Œå»å¹´ Cloud Next 20â€™ è‡¨æ™‚æ”¹æˆç·šä¸Šæ´»å‹• (7 æœˆ 14 æ—¥ â€“ 9 æœˆ 8 æ—¥) æŒçºŒäº†2å€‹æœˆã€‚ä»Šå¹´ Cloud Next 21â€™ å°±å¦‚åŒä»¥å‰ç‚ºæœŸ 3 å¤© (10æœˆ 12 æ—¥ â€“ 10 æœˆ 14 æ—¥)çš„æ´»å‹•ï¼Œåªæ˜¯æ”¹ç‚ºç·šä¸Šã€‚æœ¬æ¬¡ Meetup ?å°±åœ¨æ­£å¼æ´»å‹•å‰è·Ÿå¤§å®¶ä»‹ç´¹ä¸€ä¸‹å¦‚ä½•è©²å®‰æ’è‡ªå·±çš„ Session ","date":"2021-10-13","objectID":"/posts/cloud-next-21-pre-event/:0:0","tags":["GoogleCloudNext"],"title":"Cloud Next 21 Pre Event","uri":"/posts/cloud-next-21-pre-event/"},{"categories":null,"content":"Top five things to experience at Next â€™21 Kick off each morning with a keynote Customize your content Engage with experts Dive into demos Explore the impact of DEI ","date":"2021-10-13","objectID":"/posts/cloud-next-21-pre-event/:1:0","tags":["GoogleCloudNext"],"title":"Cloud Next 21 Pre Event","uri":"/posts/cloud-next-21-pre-event/"},{"categories":null,"content":"åœ¨é–‹ç™¼ Kubernetes æ‡‰ç”¨ç¨‹å¼æ™‚å¸¸ä½¿ç”¨ NATS ä¾†ä½œç‚ºå…§éƒ¨ Pub/Sub å‚³ééåŒæ­¥è¨Šæ¯æ™‚ä½¿ç”¨ï¼Œæœ‰æ™‚å€™ä¹Ÿæœ‰å°å¤–é–‹æ”¾çš„éœ€æ±‚ã€‚è€Œåœ¨æœ¬åœ°æ©Ÿå™¨é–‹ç™¼æ™‚æœƒæ¡ç”¨è¼•é‡çš„ k8s cluster è§£æ±ºæ–¹æ¡ˆï¼Œå¦‚ Kind, k3s, minikube ç­‰ä¾†æ¸›è¼•æœ¬åœ°é–‹ç™¼è³‡åŸçš„å£“åŠ›ï¼Œä¸éåŸºæ–¼ container çš„æ–¹å¼é‚„æ˜¯æœ‰ä¸€äº›é™åˆ¶ï¼Œæœ¬ç¯‡æ–‡ç« ä»¥ k3s ç‚ºåŸºç¤ä¾†æ­è¨­é–‹å•Ÿ TLS çš„ NATS æœå‹™å™¨åœ¨æœ¬åœ°çš„ä½¿ç”¨æ–¹å¼ã€‚","date":"2021-08-11","objectID":"/posts/k3s-nats-tls-openssl/","tags":["k3s","tls","nats","k8s"],"title":"K3s Nats tls by openssl","uri":"/posts/k3s-nats-tls-openssl/"},{"categories":null,"content":" é€é k3d å»ºç«‹æœ¬åœ° k3s clusterã€‚å› ç‚º \u0008k3s ä¹Ÿæ˜¯é€é docker ä¾†æ‘¸æ“¬ k8s clusterï¼Œæ‰€ä»¥é€é k3s æœ¬èº« port mapping çš„é…ç½®ä¾†å°å¤–é–‹æ”¾ 8080:80 åŠ 4222:31400 äºŒå€‹ portã€‚ 8080:80 çµ¦ hashicorp/http-echo ç”¨ã€‚è€Œ 4222:31400 æ˜¯å°æ‡‰ NATS nodeport ç”¨ k3d cluster create dev -p 8080:80@loadbalancer -p 8443:443@loadbalancer -p \"4222:31400@server[0]\" å»ºç«‹ hashicorp/http-echoã€‚ç­‰å¾…æ‰€æœ‰çš„ Pod åŠæœå‹™å°±ç·’å¾Œï¼Œå°±å¯ä»¥é€é http://localhost:8080 ä¾†è®€å– hashicorp/http-echo kubectl run --image hashicorp/http-echo --port 80 echo -- -listen=:80 --text=\"Hello from echo\" kubectl expose pod echo --port 80 --target-port 80 --type NodePort --name echo cat \u003c\u003cEOF | kubectl apply -f - apiVersion: extensions/v1beta1 kind: Ingress metadata: name: echo-ingress annotations: kubernetes.io/ingress.class: traefik spec: rules: - http: paths: - path: / pathType: Prefix backend: serviceName: echo servicePort: 80 EOF ä¸‹ä¸€å€‹æ­¥é©Ÿå°±æ˜¯å»ºç«‹ NATSã€‚å› ç‚ºé€™ä¸€æ¬¡æˆ‘å€‘è¦å»ºç«‹çš„æ˜¯æœ‰å•Ÿç”¨ TLS çš„ NATS æœå‹™å™¨ã€‚è€Œ TLS çš„éƒ¨ä»½æˆ‘å€‘æ¡ç”¨ self signed çš„æ–¹å¼ä¾†å»ºç«‹ï¼Œå¯¦éš›ä½¿ç”¨å°±çœ‹æœ€çµ‚éƒ¨ç½²çš„æƒ…æ³ä¾†æ±ºå®šæ˜¯èª°ä¾†ç”¢å‡º cluster æœ‰éœ€çš„ TLSï¼Œè€Œæœ¬ Demo å°±æ–¹ä¾¿çš„æ–¹å¼è‡ªå»º é¦–å…ˆå»ºç«‹æ‰€éœ€çš„ certificate.conf æª”æ¡ˆã€‚å…¶ä¸­ IP åŠ DNS å¯ä»¥ä¾ç…§éœ€æ±‚é€²è¡Œä¿®æ”¹ cat \u003c\u003cEOF \u003e\u003e certificate.conf [req] default_bits = 2048 prompt = no default_md = sha256 req_extensions = req_ext distinguished_name = dn [dn] C = TW ST = New Taipei City O = Your organization CN = localhost [req_ext] subjectAltName = @alt_names [alt_names] DNS.1 = kubernetes DNS.2 = kubernetes.default DNS.3 = kubernetes.default.svc DNS.4 = kubernetes.default.svc.cluster DNS.5 = kubernetes.default.svc.cluster.local DNS.6 = localhost IP.1 = 127.0.0.1 IP.2 = 172.17.34.52 IP.3 = 192.168.0.15 [v3_ext] authorityKeyIdentifier=keyid,issuer:always basicConstraints=CA:FALSE keyUsage=keyEncipherment,dataEncipherment extendedKeyUsage=serverAuth,clientAuth subjectAltName=@alt_names EOF ç”¢ç”Ÿ NATS æœå‹™å™¨æœ‰éœ€çš„ TLS æª”ï¼ŒåŠä¹‹å¾Œæä¾›çµ¦ Client ä½¿ç”¨çš„ client1.crt client1.key ca.crt client2.crt client2.key ca.crtã€‚é€™é‚Šä½¿ç”¨çš„æ–¹å¼æ˜¯é€é opensslï¼Œæœ‰æ•ˆæ—¥æœŸä¹Ÿæ˜¯ demo æ–¹ä¾¿å…ˆè¨­ç‚º 1000 å¤©ã€‚å¦å¤–æˆ‘å€‘å°‡å•Ÿç”¨ NATS tls verifyAndMap çš„åŠŸèƒ½ã€‚æ‰€ä»¥æˆ‘å€‘åœ¨ certificate.conf çš„ Subject Alternative Name (SAN) æœƒæŒ‡å®š emailï¼Œç•¶ NATS æœ‰é–‹å•Ÿ verifyAndMap å°±æœƒæª¢æŸ¥ Subject Alternative Name (SAN) cat \u003c\u003cEOF \u003e\u003e gen.sh #!/bin/bash # Move to root directory... mkdir -p keys cd keys # Generate the Certificate Files openssl genrsa -out ca.key 2048 openssl req -x509 -new -nodes -key ca.key -subj \"/CN=localhost\" -days 1000 -out ca.crt # server openssl genrsa -out server.key 2048 openssl req -new -key server.key -out server.csr -config ../certificate.conf openssl x509 -req -in server.csr -CA ca.crt -CAkey ca.key \\ -CAcreateserial -out server.crt -days 1000 \\ -extensions v3_ext -extfile ../certificate.conf # client1 openssl genrsa -out client1.key 2048 openssl req -new -key client1.key -out client1.csr -config ../certificate.conf openssl x509 -req -in client1.csr -CA ca.crt -CAkey ca.key \\ -CAcreateserial -out client1.crt -days 1000 \\ -extensions v3_ext -extfile \u003c(cat $(PWD)/certificate.conf | sed 's/IP.3 = 192.168.0.15/\u0026\\nemail.1 = client1@example.com/') echo $(PWD) # client2 openssl genrsa -out client2.key 2048 openssl req -new -key client2.key -out client2.csr -config ../certificate.conf openssl x509 -req -in client2.csr -CA ca.crt -CAkey ca.key \\ -CAcreateserial -out client2.crt -days 1000 \\ -extensions v3_ext -extfile ../certificate.conf EOF chmod +x ./gen.sh ./gen.sh æˆ‘å€‘ç”¢ç”Ÿäº†äºŒçµ„ client tls keypairã€‚æˆ‘å€‘åœ¨ç”¢ç”Ÿ client1 çš„ tls æª”æ¡ˆæ™‚åŠ å…¥é¡å¤–çš„ Subject Alternative Name (SAN) è³‡è¨Š email:client1@example.com step: A zero trust swiss army knife for working with X509, OAuth, JWT, OATH OTP, etc. step-cli | Automate Certificates \u0026 Common Cryptography Primitives step certificate inspect keys/client1.crt Certificate: Data: Version: 3 (0x2) Serial Number: 11938605982689757523 (0xa5ae72e347938953) Signature Algorithm: SHA1-RSA Issuer: CN=localhost Validity Not Before: Aug 19 03:20:51 2021 UTC Not After : May 15 03:20:51 2024 UTC Subject: C=TW,ST=New Taipei City,O=Your organization,CN=localhost Subject Public Key Info: Public Key Algorithm: RSA Public-Key: (2048 bit) Modulus: ... Exponent: 65537 (0x10001) X509v3 extensions: X509v3 Authority Key Identifier: keyid X509v3 Basic Constraints: CA:FALSE X509v3 Key Usage: K","date":"2021-08-11","objectID":"/posts/k3s-nats-tls-openssl/:0:0","tags":["k3s","tls","nats","k8s"],"title":"K3s Nats tls by openssl","uri":"/posts/k3s-nats-tls-openssl/"},{"categories":null,"content":"TR409-1 Google æŠ€è¡“ x å…¬å…±åƒèˆ‡ x é–‹æº Google Cloud Buildpacks å‰–æèˆ‡å¯¦è¸ - COSCUP 2021 | Conference for Open Source Coders, Users, and Promoters CNCF çš„ Cloud Native Buildpacks å°ˆæ¡ˆå·²ç¶“åœ¨ 2020 å·²ç¶“å¾ Sandbox é …ç›®è®Šæˆæˆäº† Incubation é …ç›®ã€‚Cloud Native Buildpacks (CNB) çš„å‡ºç¾å®šç¾©äº†è½‰æ›ç¨‹å¼ç¢¼è‡³ OCI çš„æ¨™æº–ï¼Œå¯ä»¥è®“é–‹ç™¼äººå“¡å°ˆæ³¨åœ¨æœ¬èº«åŠŸèƒ½ä¸Šé¢ï¼Œå°‡å®‰å…¨æ€§åŠä¾è³´å¥—ä»¶æ‰“åŒ…ç›¸é—œçš„éƒ¨ä»½äº¤ç”± CNB è² è²¬ã€‚ Google ä¹Ÿä¾ç…§äº†CNB çš„è¦ç¯„é–‹æºäº† Google ç‰ˆçš„ Google Cloud Buildpacksï¼Œä¹Ÿåœ¨ 2019 Google Cloud Next ä¸Šå®£å¸ƒ Cloud Run (Cloud Run Button), GKE, Anthos, App Engine, Cloud functions ç­‰æœå‹™æ”¯æ´ä½¿ç”¨ Google Cloud Buildpacksã€‚ æœ¬å ´æ¬¡æœƒä»‹ç´¹ CNB çš„ç™¼å±•æ­·å²åŠ Google é–‹æºçš„ Google Cloud Buildpacks å‰–æèˆ‡å¯¦è¸ Q\u0026A buildpack çš„ runtime image æ˜¯ä¸å¯ä»¥è¢«æ›´æ”¹çš„æ˜¯åªåœ¨ local éœ€è¦ Reproducible çš„é™åˆ¶ï¼Œå–®ç´”çš„ä½¿ç”¨è€…éœ€è¦äº†è§£çš„æ˜¯æ€éº¼ä½¿ç”¨é€™å€‹å·¥å…·? ä¹‹å‰åˆ†äº«è·Ÿ Buildpack ç›¸é—œçš„ä¸»é¡Œ Buildpack Tips and Tricks - KaiChu Build Your Buildpack - KaiChu Github Assets Cnb - KaiChu Pack 0.19.0 Solved Invalid Cross Device Link at Google Cloud Build - KaiChu ç¸½çš„ä¾†èªª Buildpack çš„å‡ºç¾ï¼Œæä¾›äº†ä¸€å€‹å¾ Source to container image çš„æ–¹å¼ï¼Œè®“é–‹ç™¼äººå“¡å¯ä»¥å¾ Dockerfile ä¸­è§£æ”¾ï¼Œå°ˆæ³¨åœ¨å•†æ¥­é‚è¼¯çš„éƒ¨ä»½ï¼Œå°‡ container image çš„å®‰å…¨æ€§ã€æ¯ä¸€å±¤æ€éº¼å †ç–Šç­‰éƒ¨ä»½äº¤çµ¦ Buildpack æ‰€è¦ç¯„çš„æ–¹å¼å»ä½œã€‚Dockerfile åœ¨æŸäº›å ´æ™¯é‚„æ˜¯å¾ˆå¥½ç”¨ï¼Œåœ¨é©åˆçš„å ´æ™¯æ™‚æ©Ÿå¼•å…¥ Buildpack å¯ä»¥è®“å·¥ä½œæµç¨‹æ›´ç‚ºç°¡åŒ– Google Cloud Buildpacks æ˜¯ä¸€å€‹ 100% ç›¸å®¹ Cloud Native Buildpacks çš„ä¸€å€‹å¯¦ä½œã€‚é¡ä¼¼æœ‰å¯¦ä½œçš„é‚„æœ‰ Paketo åŠ Heroku æ‰€æä¾›çš„ç‰ˆæœ¬ï¼Œç•¶ç„¶å„å®¶å¯¦ä½œå‡ºä¾†çš„ Builder é™¤äº†ç›¸å®¹è¦ç¯„ä¹‹å¤–é‚„æœƒåŠ ä¸Šè‡ªå®¶ç¨æœ‰çš„æ±è¥¿ï¼Œå¦‚ Google Cloud Buildpacks å°±å¢åŠ äº† Google Cloud Platfrom ä¸­ç‰¹æœ‰çš„ Cloud Function å…¥ç´š: æ¯ä¸€å€‹ Builder çš„åƒæ•¸ä¸ç›¡ç›¸åŒï¼Œä½¿ç”¨å‰éœ€åƒè€ƒä½¿ç”¨èªªæ˜ã€‚Google Cloud Buildpacks å·²ç¶“æ”¯æŒ Cloud Run, GKE, Anthos, App Engine, Cloud Functionã€‚è¨€è©±éƒ¨ä»½ä¹Ÿæœ‰ Go, Node.js, Python, Java, Net Core ç­‰ï¼Œåœ¨é–‹ç™¼å·¥å…·éŠä¸­ä¹Ÿæœ‰ skaffold, pack, tekton, kpack ä¹Ÿå¯ä»¥æ­é… gcloud åŠ Google Cloud Build ä¸€èµ·ä½¿ç”¨ã€‚ åˆç´š: ä¾ç…§ Cloud Native Buildpacks çš„è¦ç¯„å¯¦ä½œè‡ªå·±çš„ Buildpack (shell ç‰ˆæœ¬) ä¸­ç´š: ä½¿ç”¨ç¬¬ä¸‰æ–¹å·¥å…·ä¾†å»ºæ§‹ Buildpack, å¦‚ paketo-buildpacks/packitã€‚åœ¨é–±è®€ Google Cloud Buildpacks çš„é–‹æ”¶æºå§‹ç¢¼å¾Œï¼Œä½ æœƒç™¼ç¾é€™å€‹å°ˆæ¡ˆä¹Ÿæ˜¯ä½¿ç”¨åŒæ¨£çš„æ–¹å¼ä¾†å»ºæ§‹å‡º Google ç‰ˆçš„ Builpackï¼Œä¸éç”¨çš„æ˜¯ Google è‡ªå·±å¯« Libraryï¼Œæœ€çµ‚é€é Bazel æ‰“åŒ…æˆç›¸å®¹ Cloud Native Buildpacks çš„æ ¼å¼ã€‚ ","date":"2021-08-02","objectID":"/posts/coscup-x-ruby-conf-tw-2021-google-cloud-buildpacks/:0:1","tags":["pack","buildpacks","google","coscup"],"title":"Coscup X Ruby Conf Tw 2021 Google Cloud Buildpacks","uri":"/posts/coscup-x-ruby-conf-tw-2021-google-cloud-buildpacks/"},{"categories":null,"content":"è¨˜éŒ„å¦‚ä½•åœ¨æœ¬æ©Ÿç«¯ä½¿ç”¨ KIND/K3d é–‹ç™¼ Kubernetes æ‡‰ç”¨ç¨‹å¼æ™‚å¦‚æœéœ€è¦ä½¿ç”¨ NATS æ™‚ï¼Œåœ¨ä¸ä½¿ç”¨ Ingress æ™‚å¿«é€Ÿ Expose NTAS çµ¦ Client ä½¿ç”¨","date":"2021-07-30","objectID":"/posts/nats-quick-expose-for-local-test/","tags":["nats","k3d","kind","kubernetes"],"title":"NATS quick expose for local test","uri":"/posts/nats-quick-expose-for-local-test/"},{"categories":null,"content":"bitnami/nats https://github.com/bitnami/charts/tree/master/bitnami/nats/#installing-the-chart ç‚ºäº†æœ¬æ©Ÿç«¯ä½¿ç”¨ KIND/K3d ç‚ºåŸºç¤é–‹ç™¼ Kubernetes æœ‰ NATS ä»‹æ¥éœ€æ±‚æ™‚ï¼Œå¯ä»¥é€é Helm ä¾†å¿«é€Ÿéƒ¨ç½²ä¸”åªæœ‰é–‹ç™¼éœ€æ±‚ï¼Œå°±å¯ä»¥ä½¿ç”¨ bitnami/nats çš„ç‰ˆæœ¬ä¾†ä½¿ç”¨ã€‚æ‰€ä»¥åœ¨ NATS çš„ Expose æ–¹å¼ä½¿ç”¨ NodePort å°‡ NATS client 4222 æŒ‡å®šçµ¦ 31400 helm install nats \\ --set auth.enabled=false \\ --set client.service.type=NodePort \\ --set client.service.nodePort=31400 \\ bitnami/nats --create-namespace --namespace nats å¾… Helm å®‰è£å®Œ bitnami/nats å¯ä»¥æª¢è¦– nats-client $ k -n nats get svc NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE nats-client NodePort 10.96.104.5 \u003cnone\u003e 4222:31400/TCP 20m nats-cluster ClusterIP 10.96.97.123 \u003cnone\u003e 6222/TCP 20m nats-headless ClusterIP None \u003cnone\u003e 4222/TCP,6222/TCP 20m nats-monitoring ClusterIP 10.96.124.235 \u003cnone\u003e 8222/TCP 20m ","date":"2021-07-30","objectID":"/posts/nats-quick-expose-for-local-test/:1:0","tags":["nats","k3d","kind","kubernetes"],"title":"NATS quick expose for local test","uri":"/posts/nats-quick-expose-for-local-test/"},{"categories":null,"content":"Kubernetes Cluster ","date":"2021-07-30","objectID":"/posts/nats-quick-expose-for-local-test/:2:0","tags":["nats","k3d","kind","kubernetes"],"title":"NATS quick expose for local test","uri":"/posts/nats-quick-expose-for-local-test/"},{"categories":null,"content":"KIND KIND_NATS_PORT=4222 cat \u003c\u003cEOF \u003e\u003e kind-config.yaml kind: Cluster apiVersion: kind.x-k8s.io/v1alpha4 name: kind-testbed nodes: - role: control-plane # port forward 80 on the host to 80 on this node extraPortMappings: - containerPort: 31400 hostPort: ${KIND_NATS_PORT} # optional: set the bind address on the host # 0.0.0.0 is the current default # optional: set the protocol to one of TCP, UDP, SCTP. # TCP is the default protocol: TCP EOF # create local kind cluster kind create cluster --config kind-config.yaml ","date":"2021-07-30","objectID":"/posts/nats-quick-expose-for-local-test/:2:1","tags":["nats","k3d","kind","kubernetes"],"title":"NATS quick expose for local test","uri":"/posts/nats-quick-expose-for-local-test/"},{"categories":null,"content":"K3d K3D_NATS_PORT=4223 cat \u003c\u003cEOF \u003e\u003e k3d-config.yaml apiVersion: k3d.io/v1alpha2 name: k3d-testbed kind: Simple servers: 1 ports: - port: ${K3D_NATS_PORT}:31400 nodeFilters: - server[*] EOF # create local k3d cluster k3d cluster create --config k3d-config.yaml ","date":"2021-07-30","objectID":"/posts/nats-quick-expose-for-local-test/:2:2","tags":["nats","k3d","kind","kubernetes"],"title":"NATS quick expose for local test","uri":"/posts/nats-quick-expose-for-local-test/"},{"categories":null,"content":"Docker é€™æ™‚å€™æˆ‘å€‘å°±å¯ä»¥è¼•é¬†é€é :::4223 åŠ 0.0.0.0:4222 ä¾†é€£æ¥äºŒå€‹ k8s å…§éƒ¨çš„ NATS æœå‹™ $ docker ps ... PORTS NAMES ... 0.0.0.0:4223-\u003e31400/tcp, :::4223-\u003e31400/tcp k3d-k3d-testbed-server-0 ... 127.0.0.1:65264-\u003e6443/tcp, 0.0.0.0:4222-\u003e31400/tcp kind-testbed-control-plane ","date":"2021-07-30","objectID":"/posts/nats-quick-expose-for-local-test/:2:3","tags":["nats","k3d","kind","kubernetes"],"title":"NATS quick expose for local test","uri":"/posts/nats-quick-expose-for-local-test/"},{"categories":null,"content":"Pack 0.19.0 çµ‚æ–¼ç™¼ä½ˆäº†ï¼Œé€™ä¸€å€‹ç‰ˆæœ¬åŒ…å«äº†è§£æ±ºåœ¨ Google Cloud Build ä¸ŠåŸ·è¡Œ Pack æœƒé‡åˆ° Invalid Cross Device Link çš„éŒ¯èª¤ã€‚é€™ç¯‡æ–‡ç« è©³ç´°èªªæ˜äº†é‡åˆ°çš„å•é¡Œã€å›å ± Issue åŠè§£æ±ºçš„æ–¹å¼","date":"2021-06-17","objectID":"/posts/pack-solved-invalid-cross-device-link-at-google-cloud-build/","tags":["pack","cloudbuild","buildpacks"],"title":"Pack 0.19.0 Solved Invalid Cross Device Link at Google Cloud Build","uri":"/posts/pack-solved-invalid-cross-device-link-at-google-cloud-build/"},{"categories":null,"content":"åœ¨å‰å¹¾ç¯‡ä»‹ç´¹ Pack æ™‚å°±æœ‰æä¾› Google Cloud Build ä½¿ç”¨ Pack ä¾†å»ºæ§‹ Container image æ™‚å› ç‚º Pack çš„ Cached é è¨­ç›®éŒ„è¨­ç½®çš„æ–¹å¼å°è‡³ Google Cloud Build éç¨‹ä¸­é‡åˆ° Google Cloud Build çš„éŒ¯èª¤è¨Šæ¯ï¼Œç•¶æ™‚å°±æœ‰å›å ±é€™å€‹å•é¡Œ cloudb build gcr.io/k8s-skaffold/pack got invalid cross-device link ERROR with custom buildpack Â· Issue #135 Â· GoogleCloudPlatform/buildpacks Create temporary registry cache alongside intended destination by briandealwis Â· Pull Request #1183 Â· buildpacks/pack é›–ç„¶æ˜¯ä½¿ç”¨ GoogleCloudPlatform/buildpacks ä¸­é‡åˆ°çš„å•é¡Œï¼Œä¸éå¯¦éš›ä¸Šåº•å±¤ä¹Ÿæ˜¯å»å‘¼å« buildpacks/packï¼Œæ‰€ä»¥é€™å€‹ invalid cross-device link åªèƒ½ç­‰åˆ° pack ç™¼ä½ˆ 0.19.0 æ‰èƒ½è§£æ±º(ç•¶æ™‚çš„ Roadmap å°±æ’å®šé€™å€‹ç‰ˆæœ¬æœƒåŒ…å«) çµ‚æ–¼ Release pack v0.19.0 Â· buildpacks/pack åœ¨ 19 å¤©å‰ç™¼ä½ˆäº†ï¼Œæˆ‘å€‘åœ¨ Google Cloud Build ä¸Šä½¿ç”¨ Pack ä¾†å»ºæ§‹ Container image å°±ä¸éœ€è¦ä½¿ç”¨ workaround çš„æ–¹å¼ï¼Œä¹Ÿå¯ä»¥äº«å— Google Cloud Build parallel æ¸›å°‘æ•´é«”åŸ·è¡Œæ™‚é–“çš„å¥½è™• ","date":"2021-06-17","objectID":"/posts/pack-solved-invalid-cross-device-link-at-google-cloud-build/:0:0","tags":["pack","cloudbuild","buildpacks"],"title":"Pack 0.19.0 Solved Invalid Cross Device Link at Google Cloud Build","uri":"/posts/pack-solved-invalid-cross-device-link-at-google-cloud-build/"},{"categories":null,"content":"Before steps: - name: gcr.io/k8s-skaffold/pack entrypoint: sh env: - TMPDIR=/builder/home/.pack args: - -exc - | pack build --builder=gcr.io/buildpacks/builder:v1 --env=GOOGLE_BUILDABLE=cmd/streamsvc/main.go --descriptor=project-asset.toml 100 pack build --builder=gcr.io/buildpacks/builder:v1 --path=internal/app/apitest 101 - name: gcr.io/k8s-skaffold/pack entrypoint: sh args: - -exc - | pack build --builder=gcr.io/buildpacks/builder:v1 --env=GOOGLE_BUILDABLE=cmd/ws/main.go --descriptor=project-default.toml 200 ","date":"2021-06-17","objectID":"/posts/pack-solved-invalid-cross-device-link-at-google-cloud-build/:0:1","tags":["pack","cloudbuild","buildpacks"],"title":"Pack 0.19.0 Solved Invalid Cross Device Link at Google Cloud Build","uri":"/posts/pack-solved-invalid-cross-device-link-at-google-cloud-build/"},{"categories":null,"content":"After steps: - name: gcr.io/retailbase-dev/pack:v0.19.0 entrypoint: sh args: - -exc - | pack build --builder=gcr.io/buildpacks/builder:v1 --env=GOOGLE_BUILDABLE=cmd/streamsvc/main.go --descriptor=project-asset.toml 100 pack build --builder=gcr.io/buildpacks/builder:v1 --path=internal/app/apitest 101 - name: gcr.io/retailbase-dev/pack:v0.19.0 entrypoint: sh args: - -exc - | pack build --builder=gcr.io/buildpacks/builder:v1 --env=GOOGLE_BUILDABLE=cmd/ws/main.go --descriptor=project-default.toml 200 Pack 0\u0008.19.0 å°±ä¸éœ€è¦ç‰¹åˆ¥æŒ‡å®š TMPDIR=/builder/home/.pack åƒæ•¸ï¼Œé€™æ¨£æˆ‘å€‘å¯ä»¥ä¾ç…§éœ€æ±‚ä¾†é…ç½®é©åˆçš„æ­¥é©Ÿ gcr.io/k8s-skaffold/pack Skaffold team ç¶­è­·çš„ gcr.io/k8s-skaffold/pack ç‰ˆæœ¬é‚„æ²’æœ‰æ›´æ–°è‡³ v0.19.0ã€‚gcr.io/k8s-skaffold/pack 0.19.0 support Â· Issue #6028 Â· GoogleContainerTools/skaffoldï¼Œåœ¨å®˜æ–¹é‚„æ²’æœ‰æ›´æ–°ä¹‹å‰å¤§å®¶å¯ä»¥åƒè€ƒ å®˜æ–¹çš„æ–¹å¼è‡ªè¡Œæ‰“åŒ… ","date":"2021-06-17","objectID":"/posts/pack-solved-invalid-cross-device-link-at-google-cloud-build/:0:2","tags":["pack","cloudbuild","buildpacks"],"title":"Pack 0.19.0 Solved Invalid Cross Device Link at Google Cloud Build","uri":"/posts/pack-solved-invalid-cross-device-link-at-google-cloud-build/"},{"categories":null,"content":"åœ¨ä¸Šä¸€ç¯‡æ–‡ç«  ï¼¶elero åˆæ¢èˆ‡å¯¦è¸ä¸­æˆ‘å€‘çœ‹åˆ°äº†ä½œç‚ºä¸€å€‹é–‹æºçš„ Kubernetes é›†ç¾¤å‚™ä»½å’Œé·ç§»å·¥å…·å®šç¾©äº†é‚£äº› CRD ä¾†é”æˆå‚™ä»½é·ç§»çš„å‹•ä½œã€‚åœ¨ä¹‹å¾Œå°±å°å…§ä½œäº†ä¸€ä»½ç°¡å ±åŸºæ–¼ Velero 1.6 ç‰ˆæœ¬çš„æ–‡ä»¶å¾ä»‹ç´¹/å®‰è£/åŸºæœ¬ä½¿ç”¨åˆ° Demo çš„å¯¦ä½œç•¶ä¸­çš„å¿ƒå¾—ï¼Œæ–‡ç¯‡æ–‡ç« å°±æ˜¯ç°¡å ±çš„æ‘˜è¦","date":"2021-06-15","objectID":"/posts/velero-research-report/","tags":["velero","restic","kind","minio","gke","kubernetes","rocketchat"],"title":"Velero åˆæ¢ç°¡å ±","uri":"/posts/velero-research-report/"},{"categories":null,"content":" Velero åˆæ¢èˆ‡å¯¦è¸ - KaiChu Velero åˆæ¢èˆ‡å¯¦è¸æ˜¯ç ”ç©¶ Velero çš„ä¸€äº›å¿ƒå¾—ï¼ŒåŠä½¿ç”¨ Velero + Restic é€²è¡Œè·¨ Provider é·ç§»é›†ç¾¤çš„åŸç†ã€æ³¨æ„äº‹é …åŠæ“ä½œçš„éç¨‹ï¼ŒæˆåŠŸçš„å°‡ Mac æœ¬åœ°çš„ KIND k8s ä¸­çš„ Rocketchat workload ç„¡ç¸«çš„é·ç§»åˆ° GKE ä¸­ï¼Œä¸­é–“çš„éç¨‹é‚„ç®—æ˜¯ç°¡å–®æ–¹ä¾¿(å¦‚æœæ²’æœ‰è·¨ Provider æœ‰ Cloud Provider çš„åŸç”Ÿæ”¯æ´æœƒæ›´å¿«é€Ÿ)ï¼Œç®—æ˜¯ä¸€å€‹é–‹æºå‹å¥½çš„é›†ç¾¤é·ç§»å·¥å…·ï¼Œä¸éé­”é¬¼ç¸½æ˜¯è—åœ¨ç´°ç¯€ä¸­ï¼Œå®˜æ–¹æ–‡ä»¶æœ€å¥½æ˜¯å¥½å¥½çš„çœ‹ä¸€çœ‹ï¼Œè¦äº†è§£å…¶ä¸­çš„é™åˆ¶ æœ¬ä»½ç°¡å ±å°±æ˜¯åŸºæ–¼é€™å€‹å‰æä¹‹ä¸‹ç”¢ç”Ÿçš„ï¼Œåœ¨æ•´å€‹ Velero çš„ç ”ç©¶éç¨‹ä¸­åé¥‹çš„å¿ƒå¾—ã€‚å¾ Velero ä»‹ç´¹/å®‰è£/åŸºæœ¬ä½¿ç”¨æ–¹å¼/å¯¦è¸ã€‚ç°¡å ±çš„å…§å®¹ä¹ŸåŒæ™‚ç™¼ä½ˆåœ¨ Velero search \u0026 practice 20210609ï¼Œå¦å¤–å†è£œå……å¹¾ç¨® Kubernetes é·ç§»é¡å‹æ“ä½œçš„èªªæ˜ ","date":"2021-06-15","objectID":"/posts/velero-research-report/:0:0","tags":["velero","restic","kind","minio","gke","kubernetes","rocketchat"],"title":"Velero åˆæ¢ç°¡å ±","uri":"/posts/velero-research-report/"},{"categories":null,"content":"Backup from KIND and Restore to KIND Backup from KIND and Restore to KIND KIND æ˜¯ä¸€å€‹ä½¿ç”¨ Docker container åœ¨æœ¬åœ°è·‘ Kubernetes é›†ç¾¤çš„ä¸€å€‹æ±ºè§£æ–¹æ¡ˆï¼Œé©åˆä½œä¸€äº›æ¸¬è©¦ç”¨ã€‚åœ¨æˆ‘å€‘æåˆ° Velero å‚™ä»½æ™‚åŒ…å«äº†äºŒå€‹éƒ¨ä»½ï¼Œä¸€æ˜¯ Kubernetes ç¯„åœå…§çš„è³‡æº(æœƒ tar èµ·ä¾†å„²æ”¾åœ¨ bucket ä¸­)ï¼Œå¦ä¸€ç¨®å°±æ˜¯æ°¸ä¹…ç£ç¢Ÿå€ Velero æœƒå‚™ä»½æ‰€æœ‰é¡å‹çš„æ°¸ä¹…ç£ç¢Ÿå€(hostpath é™¤å¤–)ã€‚æˆ‘å€‘åœ¨æœ¬åœ°ä½¿ç”¨ KIND éƒ¨ç½² Kubernetes ä¹Ÿæ²’æœ‰å¦‚é›²ç«¯ä¾›æ‡‰å•†ä¸€æ¨£æœ‰è‡ªå‹•æ°¸ä¹…ç£ç¢Ÿå€ä½ˆå»ºçš„åŠŸèƒ½ï¼Œæ‰€ä»¥æˆ‘å€‘å¿…éœ€å¦‚ä¸Šåœ–æ‰€ç¤ºï¼Œæ‰‹å‹•åœ¨ KIND Kuberneretes ä¸­é…ç½®æœ¬åœ°æ°¸ä¹…ç£ç¢Ÿå€(ç¶å®š KIND node) å‰ç½®ä½œæ¥­å®Œæˆä¹‹å¾Œï¼Œå°±å¯ä»¥æ­é… Restic + Minio ä¸€èµ·å®Œæˆåœ¨æœ¬åœ° Kuberetes ä¸­å° Rocketchat å‚™ä»½åŠå¾©åŸçš„æ“ä½œ ","date":"2021-06-15","objectID":"/posts/velero-research-report/:1:0","tags":["velero","restic","kind","minio","gke","kubernetes","rocketchat"],"title":"Velero åˆæ¢ç°¡å ±","uri":"/posts/velero-research-report/"},{"categories":null,"content":"Backup from GKE and Restore to GKE Backup from GKE and Restore to GKE é›²ç«¯ä¾›æ‡‰å•†æä¾›çš„ Kubernetes é›†ç¾¤å°æ–¼æ°¸ä¹…ç£ç¢Ÿå€éƒ½æœ‰è‡ªå‹•ä½ˆå»ºçš„åŠŸèƒ½ï¼Œæ‰€ä»¥é–‹ç™¼è€…åªéœ€è¦è²æ˜ç›¸é—œçš„ PVC å³å¯ï¼Œå°æ–¼ä¸‰å¤§é›²ç«¯æ‡‰å•† (AWS, GCP, Azure) éƒ½æœ‰ Velero ç¶­è­·æä¾›å°æ‡‰çš„ Plugin åŠå°æ¥èªªæ˜ï¼Œä¸”ä¸‰å¤§é›²ç«¯æ‡‰å•†çš„ Kubernetes é›†ç¾¤ä¹Ÿéƒ½æœ‰æ”¯æ´åŸç”Ÿçš„æ°¸ä¹…ç£ç¢Ÿå€å¿«ç…§åŠŸèƒ½ã€‚å¦‚æœå‚™ä»½åŠé·ç§»åœ¨åŒä¸€å€‹é›²ç«¯ä¾›æ‡‰å•†çš„æƒ…å¢ƒï¼Œæ•´å€‹æ“ä½œéç¨‹æ›´ç‚ºè¼•é¬† ","date":"2021-06-15","objectID":"/posts/velero-research-report/:2:0","tags":["velero","restic","kind","minio","gke","kubernetes","rocketchat"],"title":"Velero åˆæ¢ç°¡å ±","uri":"/posts/velero-research-report/"},{"categories":null,"content":"Migrate KIND to GKE Migrate KIND to GKE è·¨ä¾›æ‡‰å•†çš„ Velero å‚™ä»½åŠé·ç§»æƒ…å¢ƒå°±æœƒè¤‡é›œä¸€äº›ã€‚åœ¨æœ¬åœ° KIND Kubernetes é›†ç¾¤å› ç‚ºåŸºæœ¬çš„é™åˆ¶å°±éœ€è¦ä½¿ç”¨æ‰‹å‹•éƒ¨ç½²æœ¬åœ°æ°¸ä¹…ç£ç¢Ÿå€ + Restic + Minioã€‚å› ç‚º Minio æ˜¯ S3 ç›¸å®¹çš„ Object Store è§£æ±ºæ–¹æ¡ˆï¼Œå°±å¯ä»¥ä½¿ç”¨ s3cmd å°‡æœ¬åœ° KIND Kubernetes ä¸­çš„å‚™ä»½æª”(Kubernetes metadata/restic persistent volume)ä¸‹è¼‰è‡³æœ¬åœ°é›»è…¦ã€‚åœ¨å¦ä¸€å€‹ä¾›æ‡‰å•†å»ºç«‹æ–°çš„ Kubernetes é›†ç¾¤å¾©åŸ Minio å‚™ä»½(å¾æœ¬åœ°ä¸Šå‚³)ï¼Œå†ä½¿ç”¨ Velero restore é€²è¡Œ workload çš„å¾©åŸã€‚ ä»¥ä¸Šçš„æ“ä½œä¹Ÿå¯èƒ½æœƒå› ç‚ºè·¨ä¸åŒçš„ä¾›æ‡‰å•†æœ‰æ‰€ä¸åŒ ","date":"2021-06-15","objectID":"/posts/velero-research-report/:3:0","tags":["velero","restic","kind","minio","gke","kubernetes","rocketchat"],"title":"Velero åˆæ¢ç°¡å ±","uri":"/posts/velero-research-report/"},{"categories":null,"content":"å¿ƒå¾— Backup process æ•´å€‹åˆæ¢èˆ‡å¯¦è¸éƒ½æ˜¯åŸºæ–¼ Velero 1.6 ç‰ˆæœ¬çš„æ–‡ä»¶ä¾†è£½ä½œå®Œæˆã€‚è·Ÿ Etcd çš„å‚™ä»½æ¯”è¼ƒä¾†èªªï¼ŒVelero æä¾›äº†æ›´ç´°ç²’åº¦çš„å‚™ä»½å¾©åŸåŠŸèƒ½ã€‚åŸºæœ¬çš„æ“ä½œæ¦‚å¿µå°±æ˜¯ä¸Šé¢çš„å‚™ä»½æµç¨‹ï¼Œä¸éé­”é¬¼ç¸½æ˜¯è—åœ¨ç´°ç¯€ä¸­ï¼Œå¯¦éš›ä¸Šé‚„æœƒæœ‰æ•ˆèƒ½/\u0008è³‡æºé…ç½®(cpu/menory)éœ€è¦è©³åŠ è€ƒæ…®çš„éƒ¨ä»½ï¼ŒåŸå‰‡ä¸Šå°±æ˜¯è¦å°å¿ƒæœç”¨ ","date":"2021-06-15","objectID":"/posts/velero-research-report/:4:0","tags":["velero","restic","kind","minio","gke","kubernetes","rocketchat"],"title":"Velero åˆæ¢ç°¡å ±","uri":"/posts/velero-research-report/"},{"categories":null,"content":"æ–‡ç¯‡æ–‡ç« ç®—æ˜¯ç ”ç©¶ Velero çš„ä¸€äº›å¿ƒå¾—ï¼ŒåŠä½¿ç”¨ Velero + Restic é€²è¡Œè·¨ Provider é·ç§»é›†ç¾¤çš„åŸç†ã€æ³¨æ„äº‹é …åŠæ“ä½œçš„éç¨‹ï¼ŒæˆåŠŸçš„å°‡ Mac æœ¬åœ°çš„ KIND k8s ä¸­çš„ Rocketchat workload ç„¡ç¸«çš„é·ç§»åˆ° GKE ä¸­ï¼Œä¸­é–“çš„éç¨‹é‚„ç®—æ˜¯ç°¡å–®æ–¹ä¾¿(å¦‚æœæ²’æœ‰è·¨ Provider æœ‰ Cloud Provider çš„åŸç”Ÿæ”¯æ´æœƒæ›´å¿«é€Ÿ)ï¼Œç®—æ˜¯ä¸€å€‹é–‹æºå‹å¥½çš„é›†ç¾¤é·ç§»å·¥å…·ï¼Œä¸éé­”é¬¼ç¸½æ˜¯è—åœ¨ç´°ç¯€ä¸­ï¼Œå®˜æ–¹æ–‡ä»¶æœ€å¥½æ˜¯å¥½å¥½çš„çœ‹ä¸€çœ‹ï¼Œè¦äº†è§£å…¶ä¸­çš„é™åˆ¶","date":"2021-06-02","objectID":"/posts/velero-research-practice/","tags":["velero","restic","kind","minio","gke","kubernetes","rocketchat"],"title":"Velero åˆæ¢èˆ‡å¯¦è¸","uri":"/posts/velero-research-practice/"},{"categories":null,"content":"Velero æ˜¯ä¸€å€‹é–‹æºçš„ Kubernetes é›†ç¾¤å‚™ä»½å’Œé·ç§»å·¥å…· (2019 å¹´åˆ VMware å®Œæˆäº†å°æ–¼å®¹å™¨æŠ€è¡“å» å•† Heptio çš„æ”¶è³¼å¾Œæ›´åç‚º Velero, å…¶ä¸­çš„å†·çŸ¥è­˜æ•…äº‹å¯ä»¥è‡³ é—œæ–¼ Heptio ä½ éœ€è¦çŸ¥é“çš„ - VMware ç¹é«”ä¸­æ–‡éƒ¨è½æ ¼ é–±è®€) ","date":"2021-06-02","objectID":"/posts/velero-research-practice/:0:0","tags":["velero","restic","kind","minio","gke","kubernetes","rocketchat"],"title":"Velero åˆæ¢èˆ‡å¯¦è¸","uri":"/posts/velero-research-practice/"},{"categories":null,"content":"What is Velero? Velero is an open source tool to safely backup and restore, perform disaster recovery, and migrate Kubernetes cluster resources and persistent volumes Aiming to help with: Disaster Recovery: Recover from an issue Data Migration: Migrate apps between clusters Data Protection: Scheduled Actions ","date":"2021-06-02","objectID":"/posts/velero-research-practice/:1:0","tags":["velero","restic","kind","minio","gke","kubernetes","rocketchat"],"title":"Velero åˆæ¢èˆ‡å¯¦è¸","uri":"/posts/velero-research-practice/"},{"categories":null,"content":"backup process backup process Velero çš„åŸºæœ¬æ“ä½œå°±æ˜¯ CLI æœƒå»æ“ä½œ Kubernetes API å»ºç«‹ Backup ç‰©ä»¶ BackupController åµæ¸¬åˆ°æ–°çš„ Backup ç‰©ä»¶ä¸¦æª¢æŸ¥ æª¢æŸ¥é€šéå¾Œå°±æœƒæ“ä½œ Kubernetes API Server é€²è¡Œè³‡æ–™çš„å‚™ä»½ BackupController å°±æœƒé€é Plugin æœƒæ“ä½œå°æ‡‰ç”¨ Object Storage Service ä¸Šå‚³æª”æ¡ˆ å¦‚æœ Provider æ”¯æ´åŸç”Ÿçš„å¿«ç…§æ“ä½œ, Plugin å°±å¯ä»¥é€é API å‚™åˆ†æ°¸ä¹…ç£ç¢Ÿå€ ","date":"2021-06-02","objectID":"/posts/velero-research-practice/:1:1","tags":["velero","restic","kind","minio","gke","kubernetes","rocketchat"],"title":"Velero åˆæ¢èˆ‡å¯¦è¸","uri":"/posts/velero-research-practice/"},{"categories":null,"content":"Questions? åœç¹é€™å€‹å‚™ä»½æµç¨‹å°±æœƒè¡ç”³å¾ˆå¤šç´°ç¯€å‡ºä¾†ï¼Œè®“æˆ‘å€‘æ…¢æ…¢çš„ç–ç† é›†ç¾¤å‚™ä»½åˆ°åº•åŒ…å«äº†ä»€éº¼æ±è¥¿? é›†ç¾¤å¾©åŸåˆ°åº•åŒ…å«äº†ä»€éº¼æ±è¥¿? é›†ç¾¤é·ç§»å¯ä»¥è·¨ Cloud provider å—? ","date":"2021-06-02","objectID":"/posts/velero-research-practice/:2:0","tags":["velero","restic","kind","minio","gke","kubernetes","rocketchat"],"title":"Velero åˆæ¢èˆ‡å¯¦è¸","uri":"/posts/velero-research-practice/"},{"categories":null,"content":"é›†ç¾¤å‚™ä»½åˆ°åº•åŒ…å«äº†ä»€éº¼æ±è¥¿? backups.velero.io backupstoragelocations.velero.io deletebackuprequests.velero.io downloadrequests.velero.io podvolumebackups.velero.io podvolumerestores.velero.io resticrepositories.velero.io restores.velero.io schedules.velero.io serverstatusrequests.velero.io volumesnapshotlocations.velero.io Velero æ‰€å®šç¾©çš„ CRD (Custom Resource Definitions) ä¾†çœ‹ backups.velero.io å‚™ä»½æ˜¯ä¸€ç¨® Velero è³‡æºï¼Œè¡¨ç¤ºåœ¨æŸå€‹æ™‚é–“é»ï¼ˆAPI ç‰©ä»¶å’Œé—œè¯çš„ç£ç¢Ÿå€ç‹€æ…‹ï¼‰æ•ç² Kubernetes é›†ç¾¤ç‹€æ…‹ å°æ‡‰å‚™ä»½çš„å°±æ˜¯ restores.velero.ioï¼Œæ¢å¾©ä¹Ÿæ˜¯ä¸€ç¨® Velero è³‡æºï¼Œä»£è¡¨å¾ Velero å‚™ä»½åˆ°ç›®æ¨™ Kubernetes é›†ç¾¤çš„è³‡æºæ‡‰ç”¨ã€‚ backupstoragelocations.velero.io \u0026 volumesnapshotlocations.velero.io å‰‡æ˜¯ Velero å„²å­˜å‚™ä»½ç‰©ä»¶çš„ä½ç½®åŠ Velero ç£ç¢Ÿå€å¿«ç…§çš„ä½ç½® schedules.velero.io è¡¨ç¤ºæ‡‰è©²é‹è¡Œçš„é èª¿åº¦æˆ–å®šæœŸå‚™ä»½ serverstatusrequests.velero.io æ˜¯è¨ªå•æœ‰é—œ Velero æœå‹™å™¨çš„ç•¶å‰ç‹€æ…‹ä¿¡æ¯çš„è«‹æ±‚ downloadrequests.velero.io æ˜¯å¾å‚™ä»½ç‰©ä»¶å„²å­˜ä¸‹è¼‰å·¥ä»¶çš„è«‹æ±‚ï¼Œä¾‹å¦‚å‚™ä»½æ—¥èªŒæ–‡ä»¶ã€‚ å‚™ä»½çš„åˆ†é¡å°± CRD ä¾†çœ‹å¯ä»¥åˆ†æˆäºŒå¡Š ä¸€å€‹æ˜¯ Kubernetes é›†ç¾¤ç¯„åœå…§çš„è³‡æº(pod, service, secret, etc.) å¦ä¸€å€‹å°±æ˜¯ç£ç¢Ÿå€å¿«ç…§ (é è¨­ Velero æœƒå°ä»»ä½•çš„æ°¸ä¹…ç£ç¢Ÿå€é€²è¡Œç£ç¢Ÿå¿«ç…§ï¼Œå¦‚æœ Provider æœ‰åŸç”Ÿæ”¯æ´ç£ç¢Ÿå€å¿«ç…§çš„è©±å°±æœƒé€é Plugin é€²è¡Œ API çš„æ“ä½œï¼Œå¦‚æœæ²’æœ‰åŸç”Ÿæ”¯æ´ç£ç¢Ÿå€å¿«ç…§æ™‚å¯ä»¥å•Ÿç”¨ Restic ä¸€èµ·ä½¿ç”¨ï¼Œç•¶ç„¶ Restic ä¹Ÿæ˜¯æœ‰ä¸€äº›é™åˆ¶, hostPath é¡å‹çš„ç£ç¢Ÿå€å°±æ²’æœ‰æ”¯åŸï¼Œä¸é Local persistent volumes æ˜¯æœ‰çš„ï¼Œåœ¨æœ¬åœ° K8s é›†ç¾¤æ¸¬è©¦æ™‚å°±å¯ä»¥é¸ç”¨ï¼Œåªæ˜¯éœ€è¦æ‰‹å‹•é…ç½® PV) velero backup describe rocketchat-backup --details ... Resource List: apps/v1/ControllerRevision: - rocketchat/rocketchat-mongodb-arbiter-6d98cfbb59 - rocketchat/rocketchat-mongodb-primary-6fd77d9dd9 - rocketchat/rocketchat-mongodb-secondary-7cd46b58bf apps/v1/Deployment: - rocketchat/rocketchat-rocketchat ... v1/ServiceAccount: - rocketchat/default - rocketchat/rocketchat-rocketchat Velero-Native Snapshots: \u003cnone included\u003e Restic Backups: Completed: rocketchat/rocketchat-mongodb-primary-0: datadir ç•¶å‚™ä»½å®Œæˆä¹‹å¾Œæˆ‘å¯ä»¥ç”¨æŸ¥çœ‹å‚™ä»½çš„è©³ç´°è³‡è¨Šï¼Œé™¤äº† Kubernetes è³‡æºçš„å‚™ä»½ä¹‹å¤–ï¼Œæœ€é‡è¦çš„å°±æ˜¯ Restic Backupsï¼Œåˆ—å‡ºä¾†ç›¸é—œ Pod çš„ç£ç¢Ÿå€å‚™ä»½çš„ç‹€æ…‹ Velero é©åˆç„¡ç‹€æ…‹çš„ Workloadï¼Œå¦‚æœæ˜¯æœ‰ç‹€æ…‹çš„ Workload å¯ä»¥æ­é… Restic ä¾†é€²è¡Œå‚™ä»½åŠå¾©åŸ Tips å¦‚æœæ²’æœ‰è·¨ Provider çš„éœ€æ±‚ä¸” Provider æœ‰æ”¯æ´åŸç”Ÿç£ç¢Ÿå€å¿«ç…§ï¼Œä½¿ç”¨ Velero + Velero-Native Snapshots å°±å¯ä»¥äº† å®‰è£ Velero é è¨­æ²’æœ‰å•Ÿç”¨ Resticï¼Œéœ€è¦ç‰¹åˆ¥æŒ‡å®š, å‚™ä»½ç¢Ÿç¢Ÿå€ä¹Ÿéœ€è¦æ‰‹å‹•æŒ‡å®š. å¦ä¸€ç¨®æ–¹æ³•æ˜¯ä½¿ç”¨ --default-volumes-to-restic å‚™ä»½æ‰€æœ‰ Pod çš„ç£ç¢Ÿå€ å‚™ä»½æ™‚å¯ä»¥ä½¿ç”¨ Resource filtering æ­£é¢è¡¨åˆ—æˆ–æ˜¯è² é¢è¡¨ä¾‹ä¾†éæ¿¾ç›®æ¨™ç‰©ä»¶ (å¦‚: namespace, deployments ç­‰ç­‰) å‚™ä»½ä¹Ÿå¯æä¾›äº† Pre Hooks åŠ Post Hooks çš„åŠŸèƒ½ï¼Œä¾‹å¦‚ pre åŠ post Hooks ä¸­å‡çµæª”æ¡ˆç³»çµ±ä¾†ç¢ºä¿ â€¦. \u0008\u0008é›–èªªæˆ‘å€‘å¯ä»¥ä½¿ç”¨ Restic ä¾†å‚™ä»½ç£ç¢Ÿå€ï¼Œhostpath çš„å„²å­˜é¡å‹æ˜¯ä¸æ”¯æ´çš„ï¼Œè€Œæœ¬åœ°ç£ç¢Ÿå€(Local Persistent Volume) æ˜¯å¯ä»¥çš„ï¼Œæ‰€ä»¥æœ¬åœ°æ¸¬è©¦çš„ Kubernetes éœ€è¦æ‰‹å‹•é…ç½®æœ¬åœ°ç£ç¢Ÿå€ä½¿ç”¨ Restic å‚™ä»½æ‰æœ‰æ•ˆ ","date":"2021-06-02","objectID":"/posts/velero-research-practice/:2:1","tags":["velero","restic","kind","minio","gke","kubernetes","rocketchat"],"title":"Velero åˆæ¢èˆ‡å¯¦è¸","uri":"/posts/velero-research-practice/"},{"categories":null,"content":"é›†ç¾¤å¾©åŸåˆ°åº•åŒ…å«äº†ä»€éº¼æ±è¥¿? ç•¶æˆ‘å€‘å®Œæˆäº†å‚™ä»½å¯ä»¥ä½¿ç”¨ Velero æŒ‡ä»¤æˆ–æ˜¯ Velero CRDs æŸ¥æª¢æŸ¥ä¸€ä¸‹å‚™ä»½çš„è¨Šæ¯ $ velero backup get NAME STATUS ERRORS WARNINGS CREATED EXPIRES STORAGE LOCATION SELECTOR rocketchat-backup Completed 0 0 2021-06-07 15:43:15 +0800 CST 29d default \u003cnone\u003e $ kubectl get backups.velero.io -n velero NAME AGE rocketchat-backup 17h æˆ‘å€‘å¯ä»¥ Restoring Into a Different Namespace å°‡æˆ‘å€‘çš„å‚™ä»½å¾©åŸè‡³å¦ä¸€å€‹ namespace å¾©åŸä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨ Resource filtering æ­£é¢è¡¨åˆ—æˆ–æ˜¯è² é¢è¡¨ä¾‹ä¾†éæ¿¾ç›®æ¨™ç‰©ä»¶ (å¦‚: namespace, deployments ç­‰ç­‰) æŒ‡å®šæ‰€éœ€çš„è³‡æºé€²è¡Œå¾©åŸ å¾©åŸæ™‚æ›´æ”¹å„²å­˜é¡åˆ¥çš„å°æ‡‰ Changing PV/PVC Storage Classesï¼Œä¾‹å¦‚åœ¨æœ¬åœ° Kind Kubernetes çš„å„²å­˜é¡åˆ¥ç‚º local-storage å°åˆ° standard (Cloud Provider æœ‰æ”¯æ´æ°¸ä¹…ç£ç¢Ÿå€å‹•æ…‹ä½ˆå»ºé è¨­é¡åˆ¥) å¾©åŸä¹Ÿè·Ÿå‚™ä»½ä¸€æ¨£æä¾› Hooksã€‚ InitContainer Restore Hooks åŠ Exec Restore Hooks ","date":"2021-06-02","objectID":"/posts/velero-research-practice/:2:2","tags":["velero","restic","kind","minio","gke","kubernetes","rocketchat"],"title":"Velero åˆæ¢èˆ‡å¯¦è¸","uri":"/posts/velero-research-practice/"},{"categories":null,"content":"é›†ç¾¤é·ç§»å¯ä»¥è·¨ Cloud provider å—? Quote åŸºæœ¬ä¸Šæ˜¯å¯ä»¥çš„. å¯ä»¥ä½¿ç”¨ Velero + Restic ä¾†å®Œæˆ æ¥ä¸‹ä¾†å°±ç¤ºç¯„åœ¨æœ¬åœ° Kind Kuberntes éƒ¨ç½² rocketchatï¼Œé€é Velero åŠ Restic å°‡ Workload é·ç§»è‡³ GKE ç°¡å–®çš„æµç¨‹å¦‚ä¸‹: åœ¨æœ¬åœ° Kind Kubernetes ä¸­é…ç½®å„²å­˜é¡åˆ¥ç‚º local-storage çš„æœ¬åœ°æ°¸ä¹…ç£ç¢Ÿå€ (Local Persistent Volume) åœ¨æœ¬åœ° Kind Kubernetes ä¸­å»ºç«‹ rocketchat æœ‰ç‹€æ…‹çš„ Workload åœ¨æœ¬åœ° Kind Kubernetes \u0008ä¸­å»ºç«‹ Minio server é€é Velero åŠ Restic å‚™ä»½ç›¸é—œ Kubernetes è³‡æºåŠä¹…æ°¸ç£ç¢Ÿå€(Local Persistent Volume) è‡³ Kind Kubernetes ä¸­çš„ Minio \u0008S3 Bucket ä½¿ç”¨ s3cmd å°‡ Kind Kubernetes ä¸­çš„ s3://velero/backups/ s3://velero/restic/ ä¸‹è¼‰åˆ°æœ¬åœ°é›»è…¦ \u0008backup ç›®éŒ„ åœ¨ GKE ä¸Šå»ºç«‹ä¸€å€‹ Kubernetes é›†ç¾¤ åœ¨ GKE ä¸Šå®‰è£ Veleor åŠ Restic è¨­å®š ä½¿ç”¨ s3cmd å°‡ \u0008backup ç›®éŒ„ä¸Šå‚³è‡³ GKE Kubernetes é›†ç¾¤ä¸­ minio S3 bucket è¨­ç½® change-storage-class-config ä¾†æŒ‡å®šå„²å­˜é¡å‹çš„è½‰æ› ä½¿ç”¨ Velero å¾©åŸ rocketchat \u0008workload ç­‰å¾… Workload å°±ç·’ ","date":"2021-06-02","objectID":"/posts/velero-research-practice/:2:3","tags":["velero","restic","kind","minio","gke","kubernetes","rocketchat"],"title":"Velero åˆæ¢èˆ‡å¯¦è¸","uri":"/posts/velero-research-practice/"},{"categories":null,"content":"è·¨ Provider é›†ç¾¤é·ç§» Demo ","date":"2021-06-02","objectID":"/posts/velero-research-practice/:3:0","tags":["velero","restic","kind","minio","gke","kubernetes","rocketchat"],"title":"Velero åˆæ¢èˆ‡å¯¦è¸","uri":"/posts/velero-research-practice/"},{"categories":null,"content":"é›†ç¾¤é·ç§»çš„æ¦‚å¿µ åœ¨éœ€è¦æœ¬åœ° KIND é›†ç¾¤åŠç›®æ¨™é›†ç¾¤ GKE ä¸Šéƒ½è£ä¸Š Velero + Minio Server ä½¿ç”¨ Velero + Restic åœ¨æœ¬åœ° KIND é›†ç¾¤åŸ·è¡Œå‚™ä»½æ“ä½œï¼Œä¸¦å°‡å‚™ä»½å„²å­˜è‡³é›†ç¾¤å…§éƒ¨çš„ Minio Server ä½¿ç”¨ s3cmd åŒæ­¥æœ¬åœ° KIND é›†ç¾¤ Minio Server ä¸­çš„ s3://velero Bucket è‡³æœ¬æ©Ÿ backup ä½¿ç”¨ s3cmd å°‡æœ¬æ©Ÿ backup åŒæ­¥è‡³ç›®æ¨™é›†ç¾¤ GKE ä¸Š Minio Server s3://velero Bucket ä½¿ç”¨ Velero + Restic å›å¾© Workload ","date":"2021-06-02","objectID":"/posts/velero-research-practice/:3:1","tags":["velero","restic","kind","minio","gke","kubernetes","rocketchat"],"title":"Velero åˆæ¢èˆ‡å¯¦è¸","uri":"/posts/velero-research-practice/"},{"categories":null,"content":"æ³¨æ„äº‹é … ç‚ºäº†ç°¡åŒ–éƒ¨ç½² Minio Server åŠ Velero çš„æ–¹å¼åŠè³‡æºï¼Œä½¿ç”¨ helm + æ¸›å°‘ cpu/memory çš„è«‹æ±‚ size vmware-tanzu/helm-charts: Contains Helm charts for Kubernetes related open source tools Helm Charts to deploy Bitnami Object Storage based on MinIO(R) in Kubernetes ä½¿ç”¨ s3tools/s3cmd ä¾†åŒæ­¥å‚™ä»½ä½¿ç”¨çš„ Bucket ","date":"2021-06-02","objectID":"/posts/velero-research-practice/:3:2","tags":["velero","restic","kind","minio","gke","kubernetes","rocketchat"],"title":"Velero åˆæ¢èˆ‡å¯¦è¸","uri":"/posts/velero-research-practice/"},{"categories":null,"content":"æ“ä½œæ­¥éª¤ åœ¨æœ¬åœ° KIND é›†ç¾¤é€²è¡Œå‚™ä»½ åœ¨æœ¬åœ°å»ºç«‹ KIND é›†ç¾¤ cat \u003c\u003cEOF \u003e kind-config.yaml kind: Cluster apiVersion: kind.x-k8s.io/v1alpha4 nodes: - role: control-plane # add a mount from /path/to/my/files on the host to /files on the node extraMounts: - hostPath: /tmp/mnt_disks/ containerPath: /mnt/disks EOF kind create cluster --name rocketchat-migrate-demo --config kind-config.yaml é…ç½® metallb local Balancer kubectl apply -f https://raw.githubusercontent.com/metallb/metallb/v0.9.6/manifests/namespace.yaml kubectl create secret generic -n metallb-system memberlist --from-literal=secretkey=\"$(openssl rand -base64 128)\" kubectl apply -f https://raw.githubusercontent.com/metallb/metallb/v0.9.6/manifests/metallb.yaml cat \u003c\u003cEOF \u003e metallb-config.yaml apiVersion: v1 kind: ConfigMap metadata: namespace: metallb-system name: config data: config: | address-pools: - name: default protocol: layer2 addresses: - 172.18.0.155-172.18.0.200 EOF kubectl apply -f ./metallb-config.yaml é…ç½® rocketchat-migrate-demo-control-plane çš„ç£ç¢Ÿå€æ›è¼‰ é€£ç·šè‡³ rocketchat-migrate-demo-control-plane node docker exec -it rocketchat-migrate-demo-control-plane bash åœ¨ rocketchat-migrate-demo-control-plane node å»ºç«‹å¾Œåºæ‰€éœ€çš„ç£ç¢Ÿå€ for vol in pv1; do mkdir /mnt/disks/$vol; mount -t tmpfs $vol /mnt/disks/$vol; done å»ºç«‹ local-storage å„²å­˜é¡åˆ¥ cat \u003c\u003cEOF \u003e local-pv-storage.yaml apiVersion: storage.k8s.io/v1 kind: StorageClass metadata: name: local-storage provisioner: kubernetes.io/no-provisioner volumeBindingMode: WaitForFirstConsumer EOF kubectl apply -f local-pv-storage.yaml æ‰‹å‹•å»ºç«‹æœ¬åœ°ä¹…æ°¸ç£ç¢Ÿå€ local-persistent-storage cat \u003c\u003cEOF \u003e local-pv.yaml kind: PersistentVolume apiVersion: v1 metadata: name: local-persistent-storage namespace: rocketchat labels: type: local spec: capacity: storage: 200Mi volumeMode: Filesystem accessModes: - ReadWriteOnce persistentVolumeReclaimPolicy: Delete storageClassName: local-storage local: path: /mnt/disks/pv1 nodeAffinity: required: nodeSelectorTerms: - matchExpressions: - key: kubernetes.io/hostname operator: In values: - rocketchat-migrate-demo-control-plane EOF kubectl apply -f local-pv.yaml å»ºç«‹ Minio Server cat \u003c\u003cEOF \u003e minio-values.yaml global: minio: accessKey: minio secretKey: minio123 service: type: LoadBalancer defaultBuckets: velero persistence: size: 1G EOF helm install minio --create-namespace --namespace minio -f minio-values.yaml bitnami/minio Minio å»ºç«‹ Demo rocketchat æ‡‰ç”¨ï¼Œç›´æ¥ä½¿ç”¨ helm ä¾†éƒ¨ç½²ï¼Œåœ¨ storageClass ä¸­æŒ‡å®šæˆ‘å€‘è‡ªå®šç¾©çš„ local-storage cat \u003c\u003cEOF \u003e rocketchat.yaml persistence: enabled: true service: type: LoadBalancer mongodb: mongodbPassword: password mongodbRootPassword: password persistence: storageClass: local-storage size: 200Mi EOF helm install rocketchat --namespace rocketchat --create-namespace -f rocketchat.yaml stable/rocketchat Rocketchat ç­‰å¾… Workload å°±åºä¹‹ï¼Œç¶“éåˆå§‹åŒ–çš„è¨­å®šï¼Œå°±å¯ä»¥é–‹å§‹ä½¿ç”¨ï¼Œæˆ‘å€‘åœ¨ Channel #general ä¸­æ–°å¢ä¸€å¼µåœ–é‚„æœ‰ä¸€äº›æ–‡å­— å»ºç«‹ Veleroï¼Œæˆ‘å€‘ä¸€å®šä½¿ç”¨ helm ä¾†ç°¡åŒ–éƒ¨ç½²çš„æµç¨‹ã€‚åœ¨è¨­å®šæª”ä¸­æŒ‡å®šäº† Minio Server ç›¸é—œçš„è¨­å®šï¼Œå•Ÿç”¨ Resticï¼Œé‚„æœ‰ç‚ºäº† Demo æ¸›å°‘äº† cpu/memory çš„è«‹æ±‚ Size helm repo add vmware-tanzu https://vmware-tanzu.github.io/helm-chartsk MINIO_SVC=$(kubectl -n minio get svc minio -o=jsonpath=\"{.status.loadBalancer.ingress[0].ip}\") PUBLIC_URL=http://$MINIO_SVC:9000 cat \u003c\u003cEOF \u003e velero-values.yaml configuration: provider: aws backupStorageLocation: bucket: velero config: region: default s3ForcePathStyle: true publicUrl: $PUBLIC_URL s3Url: http://minio.minio.svc.cluster.local:9000 volumeSnapshotLocation: config: region: default credentials: useSecret: true secretContents: cloud: | [default] aws_access_key_id = minio aws_secret_access_key = minio123 configMaps: restic-restore-action-config: labels: velero.io/plugin-config: \"\" velero.io/restic: RestoreItemAction data: image: velero/velero-restic-restore-helper:v1.6.0 deployRestic: true restic: resources: requests: cpu: 250m memory: 256Mi limits: cpu: 500m memory: 512Mi resources: requests: cpu: 250m memory: 128Mi limits: cpu: 500m memory: 512Mi initContainers: - name: velero-plugin-for-aws image: velero/velero-plugin-for-aws:v1.1.0 imagePullPolicy: IfNotPresent volumeMounts: - mountPath: /target name: pl","date":"2021-06-02","objectID":"/posts/velero-research-practice/:3:3","tags":["velero","restic","kind","minio","gke","kubernetes","rocketchat"],"title":"Velero åˆæ¢èˆ‡å¯¦è¸","uri":"/posts/velero-research-practice/"},{"categories":null,"content":"å¿ƒå¾— æ–‡ç¯‡æ–‡ç« ç®—æ˜¯ç ”ç©¶ Velero çš„ä¸€äº›å¿ƒå¾—ï¼ŒåŠä½¿ç”¨ Velero + Restic é€²è¡Œè·¨ Provider é·ç§»é›†ç¾¤çš„åŸç†ã€æ³¨æ„äº‹é …åŠæ“ä½œçš„éç¨‹ï¼ŒæˆåŠŸçš„å°‡ Mac æœ¬åœ°çš„ KIND k8s ä¸­çš„ Rocketchat workload ç„¡ç¸«çš„é·ç§»åˆ° GKE ä¸­ï¼Œä¸­é–“çš„éç¨‹é‚„ç®—æ˜¯ç°¡å–®æ–¹ä¾¿(å¦‚æœæ²’æœ‰è·¨ Provider æœ‰ Cloud Provider çš„åŸç”Ÿæ”¯æ´æœƒæ›´å¿«é€Ÿ)ï¼Œç®—æ˜¯ä¸€å€‹é–‹æºå‹å¥½çš„é›†ç¾¤é·ç§»å·¥å…·ï¼Œä¸éé­”é¬¼ç¸½æ˜¯è—åœ¨ç´°ç¯€ä¸­ï¼Œå®˜æ–¹æ–‡ä»¶æœ€å¥½æ˜¯å¥½å¥½çš„çœ‹ä¸€çœ‹ï¼Œè¦äº†è§£å…¶ä¸­çš„é™åˆ¶ å®Œæ•´çš„ Demo code repo https://github.com/cage1016/velero-research-practice-demo ","date":"2021-06-02","objectID":"/posts/velero-research-practice/:4:0","tags":["velero","restic","kind","minio","gke","kubernetes","rocketchat"],"title":"Velero åˆæ¢èˆ‡å¯¦è¸","uri":"/posts/velero-research-practice/"},{"categories":null,"content":"Docker for Mac ç”±æ–¼æ²’æœ‰æš´éœ²ç¶²è·¯çµ¦ Host ç›´æ¥å­˜å–ï¼Œç•¶æˆ‘å€‘åœ¨ Mac æœ¬åœ°ä½¿ç”¨ Kind é–‹ç™¼ Kubernetes å°±ç®—æƒ³ä½¿ç”¨ metallb ä¾†é…ç½® LoadBalancer ä¹Ÿç„¡æ³•ä½¿ç”¨ã€‚docker-tuntap-osx å°±æ˜¯ä¸€å€‹åœ¨ Docker for Mac é™åˆ¶ä¹‹ä¸‹æš«æ™‚å¯è¡Œçš„è§£æ±ºæ–¹æ¡ˆï¼Œæœ¬ç¯‡æ–‡ç« è¨˜éŒ„ä¸€ä¸‹æ­¥é©Ÿä¸”ç”¨ WordPress ä¾†ç¤ºç¯„","date":"2021-05-31","objectID":"/posts/docker-tuntap-osx-wordpress/","tags":["kind","docker","metallb","wordpress"],"title":"Docker Tuntap Osx WordPress","uri":"/posts/docker-tuntap-osx-wordpress/"},{"categories":null,"content":"åœ¨ MacOS ä¸Šé–‹ç™¼æ¸¬è©¦ Kubernetes ç›¸é—œæ‡‰ç”¨æœå‹™æ™‚ï¼ŒKubernets cluster æœ‰å¹¾ç¨®é¸æ“‡ minikube kind Docker Desktop on Mac: å¯ä»¥åœ¨è¨­å®šä¸­å•Ÿç”¨ Kubernets åŸºæœ¬ä¸Šéƒ½å¯ä»¥ä¸€å®šç¨‹åº¦çš„åœ¨æœ¬åœ°é›»è…¦ä¸Šå®Œæˆ Kubernets ç›¸é—œçš„æ“ä½œï¼Œä¸éç”±æ–¼ Docker Desktop on Mac çš„é™åˆ¶ä¸¦æ²’æœ‰å°‡ Docker çš„ç¶²è·¯ç›´æ¥æš´éœ²çµ¦ Host ä¾†å­˜å–ï¼Œæ‰€ä»¥æˆ‘å€‘åœ¨æœ¬åœ°ç«¯å­˜å– Kubernets LoadBalancer type çš„ Service æ™‚æœƒæœ‰ä¸€äº›ä¸æ–¹ä¾¿ é€™æ™‚å€™ MetalLB, bare metal load-balancer for Kubernetes ä¸€å€‹é€éæ¨™æº–è·¯ç”±å”è­°æ”¯æ´ bare metal çš„ LoadBalancer \u0008å°±ä¸Šå ´äº†ï¼Œä¸éé€™æ™‚å€™é‚„æ˜¯å› ç‚ºå‰›å‰›èªªçš„ Docker Desktop on Mac çš„ç¡¬é™åˆ¶ï¼Œä¸æ”¯æ´ã€‚ä¸éé‚„æœ‰äººæä¾›äº†ä¸€äº› workground çš„æ–¹æ³• christian-posta/docker-tuntap-osx: A tuntap shim installer for â€œDocker for Macâ€ï¼Œè©³ç´°çš„åŸç†è«‹è‡³ Github Repo ä¸­æœ‰èªªæ˜ï¼Œæ­¤ç·¨æ–‡ç« ä¹Ÿç®—æ˜¯çµ¦è‡ªå·±ä½œçš„ç­†è¨˜ ","date":"2021-05-31","objectID":"/posts/docker-tuntap-osx-wordpress/:0:0","tags":["kind","docker","metallb","wordpress"],"title":"Docker Tuntap Osx WordPress","uri":"/posts/docker-tuntap-osx-wordpress/"},{"categories":null,"content":"Demo æœ¬æ¬¡æœƒä½¿ç”¨åˆ°çš„å·¥å…· Docker Desktop on Mac christian-posta/docker-tuntap-osx: A tuntap shim installer for â€œDocker for Macâ€ kind MetalLB, bare metal load-balancer for Kubernetes å»ºç«‹ä¸€å€‹ Wordpress ä¸¦ä½¿ç”¨ MetalLB é…ç½®çš„ IP ä¾†å­˜å– ","date":"2021-05-31","objectID":"/posts/docker-tuntap-osx-wordpress/:1:0","tags":["kind","docker","metallb","wordpress"],"title":"Docker Tuntap Osx WordPress","uri":"/posts/docker-tuntap-osx-wordpress/"},{"categories":null,"content":"Steps å®‰è£ Docker Desktop on Mac å®‰è£ tuntap brew install --cask tuntap é€€å‡º Docker for Mac Git clone christian-posta/docker-tuntap-osx repo git clone https://github.com/christian-posta/docker-tuntap-osx åŸ·è¡Œ shell æ›¿æ› Docker for Mac çš„ hyperkit ./sbin/docker_tap_install.sh æª¢æŸ¥ tap æ˜¯å¦å­˜åœ¨ ifconfig | grep \"tap\" Tap up ./sbin/docker_tap_up.sh æª¢æŸ¥ tap1 ï¼Œé€™æ™‚å€™æ‡‰è©²æœƒé…ç½® IP Address, brona/iproute2mac: CLI wrapper for basic network utilites on Mac OS X inspired with iproute2 on Linux systems - ip command. ip a s | grep tap1 tap1: flags=8843\u003cUP,BROADCAST,RUNNING,SIMPLEX,MULTICAST\u003e mtu 1500 inet 10.0.75.1/30 brd 10.0.75.3 tap1 é€é kind å»ºç«‹ Kuberneter cluster kind create cluster --name wordpress-demo Add static route: ./create-static-route.sh Install metallab ./install-metallb.sh Install WordPress kubectl apply -f https://gist.githubusercontent.com/cage1016/c2214d24db62d75218eb8bdbe236b93b/raw/3ed124f90f2f5154c393a2224910327c06258395/demo-secret.yaml kubectl apply -f https://gist.githubusercontent.com/cage1016/c2214d24db62d75218eb8bdbe236b93b/raw/3ed124f90f2f5154c393a2224910327c06258395/mysql-deployment.yaml kubectl apply -f https://gist.githubusercontent.com/cage1016/c2214d24db62d75218eb8bdbe236b93b/raw/3ed124f90f2f5154c393a2224910327c06258395/wordpress-deployment.yaml Get Service IP EXTERNAL_IP=$(kubectl get svc wordpress -o jsonpath='{.status.loadBalancer.ingress[0].ip}') echo $EXTERNAL_IP Launch WordPress ","date":"2021-05-31","objectID":"/posts/docker-tuntap-osx-wordpress/:1:1","tags":["kind","docker","metallb","wordpress"],"title":"Docker Tuntap Osx WordPress","uri":"/posts/docker-tuntap-osx-wordpress/"},{"categories":null,"content":"å¿ƒå¾— åœ¨ Docker for Mac çš„ç¡¬é™åˆ¶ä¹‹ä¸‹ï¼Œé€é christian-posta/docker-tuntap-osx tuntap çš„æ–¹å¼é‚„æ˜¯å¯ä»¥æš«æ™‚çš„åœ¨ Mac ç³»çµ±æœ¬åœ°ä¸­ä½¿ç”¨ metallbï¼Œä¸éåªè¦ Docker for Mac é‡å•Ÿä¹‹å¾Œå°±å¿…éœ€é‡æ–° tuntap ä¸€æ¬¡ï¼Œé€™å€‹ä¹Ÿæ˜¯éº»ç…©åœ°æ–¹ åœ¨å®‰å…¨æ€§è€ƒé‡ä¹‹ä¸‹ï¼ŒåŸ·è¡Œ ./sbin/*.sh é‚„æ˜¯é¤Šæˆå¥½ç¿’æ…£ï¼Œæª¢æŸ¥ä¸€ä¸‹ Scripts ç¢ºèªæ²’å•é¡Œä¹‹å¾Œå†åŸ·è¡Œ ","date":"2021-05-31","objectID":"/posts/docker-tuntap-osx-wordpress/:2:0","tags":["kind","docker","metallb","wordpress"],"title":"Docker Tuntap Osx WordPress","uri":"/posts/docker-tuntap-osx-wordpress/"},{"categories":null,"content":"vscode-dev-containers é€é Container æœ‰è‰¯å¥½éš”é›¢æ€§çš„ç‰¹æ€§ä¾†æ‰“é€ é–‹ç™¼ç’°å¢ƒï¼Œå®˜æ–¹å·²ç¶“æä¾›äº†å¾ˆå¤šç¨®é–‹ç™¼ç’°å¢ƒå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œä¸”é€™äº› dev container éƒ½å¯ä»¥è‡ªè¡Œä¿®æ”¹ Dockerfile åŠ devcontainer.json ä¾†é€²è¡ŒåŠŸèƒ½çš„æ“´å……åŠåƒæ•¸é…ç½®ã€‚Google zx å¯ä»¥è®“æˆ‘å€‘ä½¿ç”¨ Javascript ä¾†å¯« Bash Scriptã€‚ç”¨ devcontainer ä¾†å¯« xz scripts æœ€å¾Œç”¨ Pack å»ºæ§‹æˆ Container image äº¤ä»˜çµ¦å…¶ä»–äººä½¿ç”¨","date":"2021-05-24","objectID":"/posts/devcontainer-zx-pack/","tags":["pack","zx","devcontainer"],"title":"Devcontainer Zx Pack","uri":"/posts/devcontainer-zx-pack/"},{"categories":null,"content":"èº«ç‚ºä¸€å€‹é–‹ç™¼è€…æœ‰æ™‚å€™æœƒç‚ºäº†æº–å€‹é–‹ç™¼å¢ƒè€Œç…©æƒ±ï¼Œä¾‹å¦‚ Golang/Node/Python æœƒæœ‰åŒæ™‚é–‹ç™¼ä¸åŒçš„ç‰ˆæœ¬çš„éœ€æ±‚ï¼Œé›–ç„¶æœ‰å¦‚ gvm, tj/n, pyenv ç­‰ç­‰çš„å·¥å…·ä¾†å¹«æˆ‘å€‘ä¾†å›åˆ‡æ›ä¸åŒçš„ç‰ˆæœ¬åŠç’°å¢ƒï¼Œç•¶é›»è…¦æ±è¥¿è¶Šè£è¶Šå¤šé›£å…é‚„æ˜¯æœƒæœ‰æ‰“æ¶çš„æ™‚å€™ã€‚microsoft/vscode-dev-containers é€™æ™‚å€™å°±æ˜¯ä¸€å€‹éå¸¸å¥½ç”¨çš„å·¥å…·ï¼Œæœ€è¿‘æ…¢æ…¢æ„Ÿè¦ºåˆ°å®ƒçš„æ–¹ä¾¿æ€§ ","date":"2021-05-24","objectID":"/posts/devcontainer-zx-pack/:0:0","tags":["pack","zx","devcontainer"],"title":"Devcontainer Zx Pack","uri":"/posts/devcontainer-zx-pack/"},{"categories":null,"content":"microsoft/vscode-dev-containers A repository of development container definitions for the VS Code Remote - Containers extension and GitHub Codespaces dev containers æ˜¯ vscode çš„ä¸€å€‹ Extensionã€‚ç°¡çš„ä¾†èªªï¼Œå°±æ˜¯é€é Container æœ‰è‰¯å¥½éš”é›¢æ€§çš„ç‰¹æ€§ä¾†æ‰“é€ é–‹ç™¼ç’°å¢ƒ\u0008ï¼Œå®˜æ–¹å·²ç¶“æä¾›äº†å¾ˆå¤šç¨®é–‹ç™¼ç’°å¢ƒå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œä¸”é€™äº› dev container éƒ½å¯ä»¥è‡ªè¡Œä¿®æ”¹ Dockerfile, devcontainer.json ä¾†é€²è¡ŒåŠŸèƒ½çš„æ“´å……åŠåƒæ•¸é…ç½® Dev Container Configuration Dev Container Status Bar ","date":"2021-05-24","objectID":"/posts/devcontainer-zx-pack/:1:0","tags":["pack","zx","devcontainer"],"title":"Devcontainer Zx Pack","uri":"/posts/devcontainer-zx-pack/"},{"categories":null,"content":"Ex: Hugo \"name\": \"Hugo (Community)\", \"build\": { \"dockerfile\": \"Dockerfile\", \"args\": { // Update VARIANT to pick hugo variant. // Example variants: hugo, hugo_extended // Rebuild the container if it already exists to update. \"VARIANT\": \"hugo_extended\", // Update VERSION to pick a specific hugo version. // Example versions: latest, 0.73.0, 0,71.1 // Rebuild the container if it already exists to update. \"VERSION\": \"latest\", // Update NODE_VERSION to pick the Node.js version: 12, 14 \"NODE_VERSION\": \"14\", } }, ä½¿ç”¨ Hugo ç·¨å¯« Blog æ–‡ç« çš„äººå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨ hugo_extended çš„ç‰ˆæœ¬ï¼Œç›´æ¥åœ¨ .devcontainer.json ä¸­é€²è¡Œç½®ï¼Œå†é»é¸ Rebuild Coontainer å°±å¥½äº† ","date":"2021-05-24","objectID":"/posts/devcontainer-zx-pack/:1:1","tags":["pack","zx","devcontainer"],"title":"Devcontainer Zx Pack","uri":"/posts/devcontainer-zx-pack/"},{"categories":null,"content":"Ex: GitHub Codespaces (Default Linux Universal) Use or extend the new Ubuntu-based default, large, multi-language universal container for GitHub Codespaces å¦ä¸€å€‹æˆ‘è¦ºå¾—éå¸¸å¥½ç”¨çš„æ˜¯ GitHub Codespaces (Default Linux Universal) Metadata Value Contributors The GitHub Codespaces team Categories Services, GitHub Definition type Dockerfile Published image mcr.microsoft.com/vscode/devcontainers/universal:linux mcr.microsoft.com/vscode/devcontainers/universal:focal Published image architecture(s) x86-64 Works in Codespaces Yes Container host OS support Linux, macOS, Windows Container OS Ubuntu Languages, platforms Python, Node.js, JavaScript, TypeScript, C++, Java, C#, F#, .NET Core, PHP, PowerShell, Go, Ruby, Rust é€™ä¸€å€‹ devcontainer base Image è·Ÿ Github Codespaces æ˜¯ä¸€æ¨£çš„ã€‚æˆ‘å€‘å¸¸ç”¨çš„ Kubectl, helm ç­‰ç­‰å·¥å…·éƒ½å·²ç¶“åŒ…å¥½äº†ï¼Œç›´æ¥ä½¿ç”¨éå¸¸çš„æ–¹ä¾¿ï¼Œå”¯ä¸€çš„ç¼ºé»å°±æ˜¯ Container image æ¯”è¼ƒå¤§ï¼Œå¤§ç´„ 10GB ğŸ˜‚ ","date":"2021-05-24","objectID":"/posts/devcontainer-zx-pack/:1:2","tags":["pack","zx","devcontainer"],"title":"Devcontainer Zx Pack","uri":"/posts/devcontainer-zx-pack/"},{"categories":null,"content":"Google/xz google/zx: A tool for writing better scripts #!/usr/bin/env zx await $`cat package.json | grep name` let branch = await $`git branch --show-current` await $`dep deploy --branch=${branch}` await Promise.all([ $`sleep 1; echo 1`, $`sleep 2; echo 2`, $`sleep 3; echo 3`, ]) let name = 'foo bar' await $`mkdir /tmp/${name}` ç°¡çš„ä¾†èªªå°±æ˜¯ Bash Script çš„åŠ å¼·ç‰ˆï¼Œå¯ä»¥ä½¿ç”¨ Javascript ä¾†å¯« Script, await ç”¨ä¸€æ³¢ ","date":"2021-05-24","objectID":"/posts/devcontainer-zx-pack/:2:0","tags":["pack","zx","devcontainer"],"title":"Devcontainer Zx Pack","uri":"/posts/devcontainer-zx-pack/"},{"categories":null,"content":"devcontainer-zx-pack-devmo microsoft/vscode-dev-containers: A repository of development container definitions for the VS Code Remote - Containers extension and GitHub Codespaces google/zx: A tool for writing better scripts GoogleCloudPlatform/buildpacks: Builders and buildpacks designed to run on Google Cloudâ€™s container platforms ä¸Šé¢äºŒç¯€ç°¡å–®çš„ä»‹ç´¹äº† microsoft/vscode-dev-containers \u0026 google/zxã€‚äºŒå€‹æ±è¥¿åŠ èµ·ä¾†å°±æ˜¯åœ¨ Container è£¡é¢é–‹ç™¼ Bash Script æœ€è¿‘æœ‰ä¸€å€‹éœ€æ±‚å°±éå¸¸é©åˆçš„ä½¿ç”¨ microsoft/vscode-dev-containers \u0026 google/zx ä¸”åˆ©ç”¨ Pack å»ºæ§‹ Container image æœ€çµ‚äº¤çµ¦ Kubernetes cornjob åŸ·è¡Œ åœ¨ backend API service é‹ç¶­æ™‚æœŸï¼ŒOpertion äº¤æ±‚æä¾›ä¸€ä»½ Script çµ¦ cron job åŸ·è¡Œä¾†ç¢ºå®š API æœå‹™æ˜¯å¦åœ¨å¯æœå‹™ç‹€æ…‹ã€‚é€™ä¸€å€‹é¡Œç›®å°±éå¸¸é©åˆé€éé€™æ¨£çš„çµ„åˆä¾†å®Œæˆï¼Œä½¿ç”¨ Javascript æ¯”ç´” Bash ä¾†çš„å®¹æ˜“ç·¨å¯« åœ¨å»ºæ§‹ Container image æ™‚ï¼Œæˆ‘å€‘ä½¿ç”¨ pack + GoogleCloudPlatform/buildpacks \u0008builder è¼•é¬†å®Œæˆå»ºæ§‹ Container image æº–å‚™ run.mjs #!/usr/bin/env zx let resp = await fetch('http://wttr.in') if (resp.ok) { console.log(await resp.text()) } å»ºæ§‹ Container image pack build --builder=gcr.io/buildpacks/builder xz-run -p . åŸ·è¡Œ Container image pack build --rm xz-run http://wttr.in ","date":"2021-05-24","objectID":"/posts/devcontainer-zx-pack/:3:0","tags":["pack","zx","devcontainer"],"title":"Devcontainer Zx Pack","uri":"/posts/devcontainer-zx-pack/"},{"categories":null,"content":"Repo https://github.com/cage1016/devcontainer-zx-pack-devmo ","date":"2021-05-24","objectID":"/posts/devcontainer-zx-pack/:3:1","tags":["pack","zx","devcontainer"],"title":"Devcontainer Zx Pack","uri":"/posts/devcontainer-zx-pack/"},{"categories":null,"content":"åœ¨ Kubernetes Pod çš„ç”Ÿå‘½å‘¨æœŸä¸­æˆ‘å€‘å¯ä»¥ä½¿ç”¨ `livenessProbe` åŠ `readinessProbe` æ¢é‡ä¾†æª¢æŸ¥æœå‹™å¥åº·ï¼Œæœ¬ç¯‡æ–‡ç« ç°¡å–®ä»‹ç´¹äº†å¦‚ä½•ç‚º GRPC Service / Client å°æ‡‰ `grpc_health_probe` çš„é…ç½®è¨­å®šåŠæœå‹™å¥åº·çš„æª¢æŸ¥ï¼Œæœ€å¾Œä½¿ç”¨ buildpack å»ºæ§‹æ‰€éœ€ container image å«å‹•æ…‹ä¸‹è¼‰ Github `grpc_health_probe` Assets","date":"2021-05-13","objectID":"/posts/build-kubernetes-grpc-health-probe-with-pack/","tags":["kubernetes","grpc","pack"],"title":"Build Kuberntes GRPC Health Probe with Pack","uri":"/posts/build-kubernetes-grpc-health-probe-with-pack/"},{"categories":null,"content":" Kuberntes Pod ç”Ÿå‘½å‘¨æœŸ åœ¨ Kubernetes Pod å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸåŒ…å«äº†ä¸‰å€‹éƒ¨ä»½: Iinit container Pod Hook å¥åº·æª¢æŸ¥ã€‚é€™ä¸‰éƒ¨éƒ½æœƒå½±éŸ¿åˆ° Pod çš„ç”Ÿå‘½å‘¨æœŸï¼Œè€Œæœ¬ç¯‡æ–‡ç« èªªæ˜å¦‚ä½•ä½¿ç”¨ pack æ‰“åŒ… grpc-health-probe ä¾†æ”¯æ´ GRPC å¥åº·æª¢æŸ¥ ","date":"2021-05-13","objectID":"/posts/build-kubernetes-grpc-health-probe-with-pack/:0:0","tags":["kubernetes","grpc","pack"],"title":"Build Kuberntes GRPC Health Probe with Pack","uri":"/posts/build-kubernetes-grpc-health-probe-with-pack/"},{"categories":null,"content":"Kubernetes livenessProbe \u0026 readinessProbe Configure Liveness, Readiness and Startup Probes | Kubernetes åœ¨ Kubernetes cluster ä¸­æˆ‘å€‘å¯ä»¥é€šéé…ç½® livenessProbe åŠ readinessProbe äºŒå€‹æ¢é‡ä¾†å½±éŸ¿å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸ livenessProbe: ç°¡å–®çš„ä¾†èªªå°±æ˜¯ Kubectl é€šé livenessProbe ä¾†åˆ¤æ–·å®¹å™¨æ˜¯å¦å­˜æ´» (Running)ï¼Œå¦‚æœ livenessProbe æ¢é‡åµæ¸¬åˆ°å®¹å™¨ä¸å¥åº·ï¼ŒKubectl å°±æœƒåˆªé™¤å®¹å™¨ï¼Œä¸¦ä¾æ“šå®¹å™¨çš„é‡å•Ÿç­–ç•¥ä¾†è™•ç†ï¼Œå¦‚æœå®¹å™¨ä¸åŒ…å« livenessProbe æ¢é‡ï¼ŒKubectl é è¨­å°±æœƒèªå®š livenessProbe æ¢é‡å›å‚³å€¼æ°¸é ç‚º Success readinessProbe: ç°¡å–®çš„ä¾†èªªå°±æ˜¯ Kubectl é€šé livenessProbe ä¾†åˆ¤æ–·å®¹å™¨çš„å¯ç”¨æ€§ (Ready)ï¼Œåªæœ‰ Pod ä¸‹é¢æ‰€æœ‰å®¹å™¨çš„ç‹€æ…‹éƒ½æ˜¯å°±ç·’æ™‚ï¼ŒKubectl æ‰æœƒèªå®šè©² Pod å·²ç¶“è™•æ–¼å¯å·¥ä½œç‹€æ…‹ã€‚å¦‚æœè©² Pod åŸ·è¡ŒéæœŸä¸­ Ready ç‹€æ…‹è®Šæˆ Falseï¼Œç³»çµ±æœƒå°‡å…¶å¾ Service çš„å¾Œç«¯ Endpoints åˆ—è¡¨ä¸­ç§»é™¤ï¼Œç­‰å¾… Pod Ready ç‹€æ…‹å†åº¦æˆç‚º True æ™‚åŠ ç‚º Service Endpoints åˆ—è¡¨ï¼Œé€™æ¨£å¯ä»¥ç¢ºèªæµé‡ä¸æœƒè¢«å°è‡³ä¸å¯ç”¨çš„ Pod åœ¨é…ç½® livenessProbe åŠ readinessProbe éƒ½æœ‰ä¸‰ç¨®æŒ‡å®šæ–¹å¼ ExecAction: åœ¨å®¹å™¨ä¸­åŸ·è¡ŒæŒ‡ä»¤ï¼Œå›å‚³å€¼ç‚º 0 è¡¨ç¤ºå¥åº· TCPSocketAction: é€éå®¹å™¨çš„ IP åŠ Port é€²è¡Œæª¢æŸ¥ï¼Œå¦‚æœå¯ä»¥å»ºç«‹ TCP é€£ç·šè¡¨ç¤ºå¥åº· HTTPGetAction: é€éå®¹å™¨çš„ IP åŠ Port é€²è¡Œ HTTP GET æª¢æŸ¥ï¼Œå¦‚æœå›å‚³ç‹€æ…‹ç¢¼ä»‹æ–¼ 200 - 400 è¡¨ç¤ºå¥åº· ","date":"2021-05-13","objectID":"/posts/build-kubernetes-grpc-health-probe-with-pack/:0:1","tags":["kubernetes","grpc","pack"],"title":"Build Kuberntes GRPC Health Probe with Pack","uri":"/posts/build-kubernetes-grpc-health-probe-with-pack/"},{"categories":null,"content":"Health checking gRPC servers on Kubernetes grpc_health_probe (ref: https://kubernetes.io/blog/2018/10/01/health-checking-grpc-servers-on-kubernetes/) æœ¬ç¯‡æ–‡ç« å› ç‚ºè¦æª¢æŸ¥ GRPC æœå‹™æ˜¯å¦å¥åº·ï¼Œå‰‡å±¬æ–¼ç¬¬ä¸€ç¨® ExecAction çš„ç¯„ç±Œã€‚Health checking gRPC servers on Kubernetes | Kubernetes æ–‡ç« ä¹Ÿèªªæ˜å¦‚ä½•ä½¿ç”¨ grpc-health-probe å·¥å…·ä¾†æª¢æŸ¥ GRPC æ˜¯å¦å¥åº· åœ¨ Pod ä¸­æˆ‘å€‘å¯ä»¥é…ç½® readinessProbe åŠ livenessProbe spec: containers: - name: server image: \"[YOUR-DOCKER-IMAGE]\" ports: - containerPort: 10021 readinessProbe: exec: command: [\"/layers/cage1016_github-assets-cnb/github-assets/bin/grpc_health_probe\", \"-addr=:10021\"] initialDelaySeconds: 5 periodSeconds: 10 livenessProbe: exec: command: [\"/layers/cage1016_github-assets-cnb/github-assets/bin/grpc_health_probe\", \"-addr=:10021\"] initialDelaySeconds: 10 periodSeconds: 20 åœ¨ exec ommand ä¸­ grpc_health_probe \u0008çš„åŸ·è¡Œæª”æ˜¯ /layers/cage1016_github-assets-cnb/github-assets/bin/grpc_health_probe è€Œé grpc-health-probe ä¸­çœ‹åˆ°çš„ /bin/grpc_health_probe å‰‡æ˜¯æœ¬ç¯‡çš„é‡é»ï¼Œæˆ‘å€‘æ…¢æ…¢èªªæ˜ GPRC Server å¥åº·æª¢æŸ¥æº–å‚™ // HealthServer is the server API for Health service. type HealthServer interface { // If the requested service is unknown, the call will fail with status // NOT_FOUND. Check(context.Context, *HealthCheckRequest) (*HealthCheckResponse, error) // Performs a watch for the serving status of the requested service. // The server will immediately send back a message indicating the current // serving status. It will then subsequently send a new message whenever // the service's serving status changes. // // If the requested service is unknown when the call is received, the // server will send a message setting the serving status to // SERVICE_UNKNOWN but will *not* terminate the call. If at some // future point, the serving status of the service becomes known, the // server will send a new message with the service's serving status. // // If the call terminates with status UNIMPLEMENTED, then clients // should assume this method is not supported and should not retry the // call. If the call terminates with any other status (including OK), // clients should retry the call with appropriate exponential backoff. Watch(*HealthCheckRequest, Health_WatchServer) error } åœ¨è¦ä½¿ç”¨ grpc_health_probe ä¾†æª¢æŸ¥ GRCP ç‹€æ…‹æ˜¯å¦å¥åº·ï¼Œåœ¨ Server ç«¯ä¹Ÿéœ€è¦é€²è¡Œä¸€äº›é…åˆï¼Œå¯¦ä½œäºŒå€‹æ–¹æ³• Check åŠ Watch // imports \"google.golang.org/grpc/health\" healthgrpc \"google.golang.org/grpc/health/grpc_health_v1\" // health server hs := health.NewServer() hs.SetServingStatus(cfg.ServiceName, healthgrpc.HealthCheckResponse_SERVING) // register healdh grpc server server = grpc.NewServer(grpc.UnaryInterceptor(kitgrpc.Interceptor)) healthgrpc.RegisterHealthServer(server, hs) æˆ‘å€‘ç›´æ¥ä½¿ç”¨ google.golang.org/grpc/health \u0008æä¾›çš„æ–¹æ³•é€²è¡Œé…ç½®å°±å¯ä»¥å¿«é€Ÿå®Œæˆ GRPC Server ç«¯çš„æº–å‚™å·¥å…·ï¼Œè©³ç´°çš„ç¨‹å¼ç¢¼å¯ä»¥è‡³ cage1016/ms-demo/cmd/add/main.go#L76-L77 åŠ cage1016/ms-demo/cmd/add/main.go#L190-L192 GPRC client å¥åº·æª¢æŸ¥æº–å‚™ grpc-ecosystem/grpc-health-probe: A command-line tool to perform health-checks for gRPC applications in Kubernetes etc. grpc_health_probe -addr=localhost:5000 healthy: SERVING åœ¨ local çš„éƒ¨ä»½å¯ä»¥ä¸‹è¼‰ grpc_health_probe é€²è¡Œæ¸¬è©¦ å»ºæ§‹ Container Image æœ¬ç¯‡æ–‡ç« çš„é‡é»å°±æ˜¯å¦‚ä½•ä½¿ç”¨ Pack ä¾†å»ºæ§‹å«æœ‰ grpc_health_probe åŠŸèƒ½çš„ container image æ–¹æ³•ä¸€ Dockerfile FROM gcr.io/gcp-runtimes/go1-builder:1.14 AS builder WORKDIR /src # restore dependencies COPY go.mod go.sum ./ RUN go mod download COPY . . RUN go build -gcflags='-N -l' -o /exe cmd/add/main.go # Adding the grpc_health_probe RUN GRPC_HEALTH_PROBE_VERSION=v0.3.2 \u0026\u0026 \\ wget -qO/bin/grpc_health_probe https://github.com/grpc-ecosystem/grpc-health-probe/releases/download/${GRPC_HEALTH_PROBE_VERSION}/grpc_health_probe-linux-amd64 \u0026\u0026 \\ chmod +x /bin/grpc_health_probe FROM gcr.io/distroless/base:latest COPY --from=builder /exe . COPY --from=builder /bin/grpc_health_probe ./grpc_health_probe ENTRYPOINT [\"/exe\"] åœ¨å»ºæ§‹ Container image æ™‚ä¸‹è¼‰ grpc_health_probe åŸ·è¡Œæª”è‡³ /bin/grpc_health_probeï¼Œæ‰€ä»¥åœ¨ Kubernetes Pod livenessProbe åŠ readinessProbe ä¸­çš„ command æ‰æœƒæ˜¯ command: [\"/grpc_health_probe\", \"-addr=:5000\"] åœ¨ä¹‹å‰çš„æ–‡ç«  Github Assets Cnb ï½œ KaiChu Build Your Buildpack ï½œ KaiChu Buildpack Tips and Tricks ï½œ KaiChu éƒ½æœ‰åˆ†äº«ä½¿ç”¨ Pack ä¾†å»ºæ§‹ container imageã€‚é‚£æˆ‘å€‘å¦‚ä½•ä½¿ç”¨ P","date":"2021-05-13","objectID":"/posts/build-kubernetes-grpc-health-probe-with-pack/:0:2","tags":["kubernetes","grpc","pack"],"title":"Build Kuberntes GRPC Health Probe with Pack","uri":"/posts/build-kubernetes-grpc-health-probe-with-pack/"},{"categories":null,"content":"å¿ƒå¾— åœ¨ Dockerfile ä¸­ä½¿ç”¨ wget å‹•æ…‹å»ä¸‹è¼‰æ‰€éœ€è¦çš„æª”æ¡ˆç®—æ˜¯ä¸€ç¨®å¸¸è¦çš„ä½œæ³•ã€‚åä¹‹åœ¨ buildapck çš„æ¶æ§‹ä¹‹ä¸‹è¦ä¸‹è¼‰ä¸€å€‹æª”æ¡ˆå»æœ‰ä¸€é»è¤‡é›œï¼Œä¹Ÿæ˜¯å¸¸å¸¸æœ‰éœ€è¦ä¸‹è¼‰ Github Assets çš„å‰›æ€§éœ€æ±‚ï¼Œç‰¹åˆ¥å¯«äº†ä¸€å€‹ç¬¦åˆ Cloud Native Buildpack çš„ cage1016/github-assets-cnb buildpack ä¾†æ»¿è¶³é€™å€‹éœ€æ±‚ï¼Œç•¶é€™ä¸€å€‹ç”Ÿæ…‹è¶Šä¾†è¶Šè±å¯Œæ™‚ï¼Œå°±æœƒæ…¢æ…¢æ„Ÿè¦ºåƒæ˜¯åœ¨ç–Šè²¬æœ¨ä¸€æ¨£ å¦‚åŒ cage1016/ms-demo é€™å€‹ gokit microserives demo ä¸€æ¨£ï¼ŒAdd åŠ Tictac æœå‹™åŸºæœ¬ä¸Šéƒ½æ”¹ç”¨ pack ä¾†å»ºæ§‹ container imageï¼Œç‚ºäº†åœ¨ Kubernetes Pod æ–°å¢ livenessProbe åŠ readinessProbe æ¢é‡ä¸¦ä½¿ç”¨ grpc_health_probe ä¾†æª¢æŸ¥ GRPC æœå‹™çš„å¥åº·ç‹€æ³ï¼Œå…¶å¯¦å°±æ˜¯æ–°å¢äº† project.toml cat \u003c\u003cEOF \u003e\u003e project.toml # [[build.env]] # optional, github token for private assets # name = \"TOKEN\" # value = \"\u003cgithub-token\u003e\" # skaffold [[build.env]] # required name = \"REPO\" value = \"grpc-ecosystem/grpc-health-probe\" [[build.env]] # required name = \"FILE\" value = \"grpc_health_probe-linux-amd64\" [[build.env]] # optional, default set to FILE value name = \"TARGET\" value = \"grpc_health_probe\" # [[build.env]] # # optional, default set to 'latest' # name = \"VERSION\" # value = \"v1.22.0\" EOF åŠ ... ports: - containerPort: 10021 readinessProbe: exec: command: [\"/layers/cage1016_github-assets-cnb/grpc-ecosystem_grpc-health-prob/bin/grpc_health_probe\", \"-addr=:10021\"] initialDelaySeconds: 5 livenessProbe: exec: command: [\"/layers/cage1016_github-assets-cnb/grpc-ecosystem_grpc-health-prob/bin/grpc_health_probe\", \"-addr=:10021\"] initialDelaySeconds: 10 ... å‰©ä¸‹çš„éƒ½ä¸ç”¨å‹•ï¼ŒP\u0008ack å°±æœƒæ“ä½œ builder æŒ‰ç…§æ‰€è¼‰å…¥çš„ buildpack å®Œæˆå°æ‡‰çš„å‹•ä½œã€‚æ…¢æ…¢é«”æœƒé€™ç¨®æŠ½æ›çš„æ–¹ä¾¿æ€§ ","date":"2021-05-13","objectID":"/posts/build-kubernetes-grpc-health-probe-with-pack/:0:3","tags":["kubernetes","grpc","pack"],"title":"Build Kuberntes GRPC Health Probe with Pack","uri":"/posts/build-kubernetes-grpc-health-probe-with-pack/"},{"categories":null,"content":"è¨˜éŒ„äº†å¦‚ä½•å°‡æ•´ç† Github å…¬ç”¨å¸³è™Ÿåˆ—è¡¨åŠæˆå“¡çš„ç°¡å–®æœå‹™å¾ GAE cron job æ¬åˆ° Github Actions çš„ä½¿ç”¨æ–¹å¼","date":"2021-05-07","objectID":"/posts/github-script-repos-and-collaborators-list-sync/","tags":["github","actions"],"title":"Github Script Repos and Collaborators List Sync","uri":"/posts/github-script-repos-and-collaborators-list-sync/"},{"categories":null,"content":" Google Spreadsheet Github Markdown åœ¨ 2018 å¹´æ™‚ç‚ºäº†å…¬ç”¨å¸³è™Ÿæœ‰ä¸€å€‹ Github repostiories \u0026 collaborators åˆ—è¡¨çš„éœ€æ±‚ï¼Œé‚„ç‰¹åˆ¥åœ¨ GAE ä¸Šç”¨ Golang å¯«äº†ä¸€å€‹æœå‹™ä¸¦å•Ÿç”¨ cron job cron.yaml cron: - description: \"Sync Github Repo\" url: /sync schedule: every 1 hours from 00:00 to 23:59 timezone: Asia/Taipei æ¯ä¸€å€‹å°æ™‚ç”¨ Golang å‘¼å« Github Graphql å–å›ä¾†æ‰€æœ‰ Repo åˆ—è¡¨ï¼Œæœ€å¾Œé€é Spreadsheet API å¯«åˆ°ç‰¹å®šçš„ Spreadsheet ä¸­ éœ€è¦é–‹ä¸€å€‹ Google Platform Platfrom å°ˆæ¡ˆ éƒ¨ç½² GAE æ‡‰ç”¨ç¨‹å¼ Golang å‘¼å« Github Graphql å–è³‡æ–™ Spreadsheet API å›å¯«è³‡æ–™ ä¸€é€™æ³¢æ“ä½œä¸‹ä¾†æ˜¯æ²’èŠ±åˆ°ä»€éº¼éŒ¢å•¦ï¼Œå°±æ˜¯éº»ç…©äº†ä¸€äº›ï¼Œæœ¬ä¾†é€™å€‹å°æ±è¥¿è·‘çš„ä¹Ÿå¥½å¥½çš„ï¼Œæœ€è¿‘æœ€è¿‘äººå“¡çš„ç•°å‹•å°è‡³éœ€è¦é‡æ–° review å¤§å®¶çš„æ¬Šé™ï¼ŒGithub åœ¨ 2019/11/3 æ­£å¼æ¨å‡ºäº† Github Actionï¼Œè‡ªå·±æ»¿å¤š Repo ä¹Ÿæ—©å°±åœ¨ä½¿ç”¨äº†ï¼Œæ‰€ä»¥æƒ³èªªä¸Šè¿°çš„éœ€æ’¾ç”¨ Github Action é‡æ–°å¯¦ä½œæœƒæ›´ä¾†çš„å®¹æ˜“äº›ï¼Œäº‹å¯¦ä¸ŠçœŸçš„å¾ˆæ–¹æ›´ï¼Œæ¯ä¸€æ¬¡ Action çš„åŸ·è¡Œæ™‚é–“éƒ½ä¸åˆ° 30 ç§’ï¼Œå°±æ˜¯å¿« åœ¨é‡æ§‹çš„æ™‚å€™ä¹Ÿç™¼ç¾äº†è¨±å¤šéå¸¸æ£’çš„å·¥å…·ï¼Œä¹Ÿå› æ­¤ç‰¹åˆ¥å¯«ä¸€ç¯‡æ–‡ç« ä¾†è¨˜éŒ„ä¸€ä¸‹ GitHub GraphQL API: Github Graphql Playground grpchql nektos/act: Run your GitHub Actions locally ğŸš€: ä¸å¾—ä¸æé€™ä¸€å€‹å·¥å…·ï¼Œå¯ä»¥åœ¨æœ¬åœ°ç«¯é–‹ç™¼æ¸¬è©¦ Github Actionï¼Œæœ¬åœ°å°±å¯ä»¥é–‹ç™¼å°±æ˜¯æ–¹ä¾¿ act demo (pic https://github.com/nektos/act) actions/github-script: Write workflows scripting the GitHub API in JavaScript: åœ¨å¯« Github Action workflows scripts æ™‚å¯ä»¥ç›´æ¥ç”¨ Javascript å‘¼åˆ° Github APIï¼ŒåŒ…å¥½äº†ç›´æ¥ç”¨æ–¹ä¾¿ jobs: readme: runs-on: ubuntu-latest steps: - run: npm install tablemark - uses: actions/github-script@v4 id: repository_collaborators with: github-token: ${{ secrets.REPO_TOKEN }} script: | const query = `query($endCursor: String = null) { viewer { repositories(first: 100, after: $endCursor, affiliations: [OWNER], orderBy: {field: CREATED_AT, direction: DESC}) { totalCount pageInfo { endCursor hasNextPage } nodes { name createdAt url } } } }`; const request = { owner: context.repo.owner, repo: context.repo.repo } const {data:collaboratorsData} = (await github.repos.getContent({ ...request, path: 'collaborators.txt' })); github.repos.getContent Github API ç›´æ¥å°è£èµ·ä¾†ç”¨ä¸€æ³¢ qeek-dev/github-project-sync: sync github projects \u0026 collaborators: Octokit plugin adding one method for all of api.github.com REST API endpoints é€™å€‹ç¶²ç«™æä¾›äº† API endpoints çš„æ–‡ä»¶å¯ä»¥æŸ¥è©¢ EX: octokit.rest.repos.getContent({ owner, repo, path, }); ","date":"2021-05-07","objectID":"/posts/github-script-repos-and-collaborators-list-sync/:0:0","tags":["github","actions"],"title":"Github Script Repos and Collaborators List Sync","uri":"/posts/github-script-repos-and-collaborators-list-sync/"},{"categories":null,"content":".github/workflows/cron.yml åŸºæœ¬çš„æµç¨‹å¦‚ä¸‹ Github Graphql å–å›æ‰€æœ‰çš„ repos \u0026 collaborators, éœ€è¦ github-token: ${{ secrets.REPO_TOKEN }} æº–å‚™ md æ‰€éœ€çš„è³‡æ–™ ä½¿ç”¨ tablemark library å°‡ Array è½‰æ›ç‚º markdown if (Buffer.from(data.content, 'base64').compare(Buffer.from(result)) === 0) returnï¼Œæ¯”å°æ–°èˆŠ README.md æª”æ¡ˆæ˜¯å¦ä¸€è‡´ï¼Œä¸ä¸€æ¨£æ‰éœ€è¦æ›´æ–° Buffer.from(data.content, 'base64').toString()ï¼Œå¦‚æœéœ€è¦å–å‡º github.repos.getContent ä¸­çš„å€¼éœ€è¦é€²è¡Œè½‰ base64 è½‰æ› ","date":"2021-05-07","objectID":"/posts/github-script-repos-and-collaborators-list-sync/:0:1","tags":["github","actions"],"title":"Github Script Repos and Collaborators List Sync","uri":"/posts/github-script-repos-and-collaborators-list-sync/"},{"categories":null,"content":"å¿ƒå¾— å¦‚æœå°ˆæ¡ˆæ”¾åœ¨ Github ä¸Šï¼ŒGithub action çœŸçš„å¯ä»¥ä½œæ»¿å¤šäº‹æƒ…çš„ã€‚GitHub Marketplace ä¹Ÿæœ‰éå¸¸å¤šçš„è³‡æºå¯ä»¥ç”¨ï¼Œä¸çŸ¥é“æ€éº¼å¯«çš„è©±å¯ä»¥å»æ´å°‹åŸå§‹ç¢¼ï¼ŒçœŸçš„æ¨è–¦å¯ä»¥ä½¿ç”¨ ","date":"2021-05-07","objectID":"/posts/github-script-repos-and-collaborators-list-sync/:0:2","tags":["github","actions"],"title":"Github Script Repos and Collaborators List Sync","uri":"/posts/github-script-repos-and-collaborators-list-sync/"},{"categories":null,"content":"telepresence æ˜¯ä¸€å€‹æœ‰æ•ˆæå‡å¤šå¾®æœå‹™ä¸­é€£çµæœ¬åœ°é–‹ç™¼çš„ä¸€å€‹å¥½ç”¨å·¥å…·ï¼Œå®ƒè§£æ±ºäº† Skaffold é–‹ç™¼ä¸­æœ¬åœ° deubg çš„ä¸è¶³ï¼ŒæœŸå¾… GA çš„åˆ°ä¾†","date":"2021-05-04","objectID":"/posts/telepresence-2-have-a-tried/","tags":["telepresence","debug","microservices","kubernetes"],"title":"Telepresence 2 Have a Tried","uri":"/posts/telepresence-2-have-a-tried/"},{"categories":null,"content":"åœ¨é–‹ç™¼ Kuberentes æ‡‰ç”¨ç¨‹å¼æ™‚ä½¿ç”¨ Skaffold æ‡‰è©²æ˜¯åŸºæœ¬æ“ä½œäº†ï¼ŒSkaffold å¯ä»¥å¹«å¿™åŠ é€Ÿé–‹ç™¼çš„é€Ÿåº¦ (ä¿®æ”¹ç¨‹å¼ç¢¼ â†’ æ§‹å»º container image â†’ push container image to registry (optional) â†’ éƒ¨ç½²è‡³ Kubernets Cluster)ï¼Œè‡³æ–¼æ˜¯å¦æ­é… Helm é‚„æ˜¯ç›´æ¥æ“ä½œ yaml å°±çœ‹å€‹äººå–œå¥½ä¾†æ±ºå®š åœ¨ Debug éƒ¨ä»½ï¼ŒSkaffold ä¹Ÿæ”¯æ´ Remote container debug çš„åŠŸèƒ½ (ä¹‹å‰çš„æ–‡ç« è«‹åƒç…§ Skaffold debug goland)ã€‚é›–ç„¶ Skaffold debug å¾ˆæ–¹ä¾¿ï¼Œä¸éç•¶ Kubernetes çš„æ‡‰ç”¨ä¸€å¤šæ™‚å°±æ²’æœ‰è¾¦æ³•åœ¨æœ¬æ©Ÿç«¯å®Œæ•´çš„é‡ç¾æœ‰æ‰€çš„æœå‹™ï¼Œé€™æ™‚å€™é–‹æºçš„ Telepresence å°±æ˜¯ä¸€å€‹å¾ˆå¥½çš„å¹«æ‰‹ ","date":"2021-05-04","objectID":"/posts/telepresence-2-have-a-tried/:0:0","tags":["telepresence","debug","microservices","kubernetes"],"title":"Telepresence 2 Have a Tried","uri":"/posts/telepresence-2-have-a-tried/"},{"categories":null,"content":"Telepresence Local development against a remote Kubernetes or OpenShift cluster ** Note: Telepresence 1 is being replaced by our even better Telepresence 2. Please try Telepresence 2 first and report any issues as we expect this will be the default by Q2 2021. ** telepresence architecture (ref: https://www.getambassador.io/docs/telepresence/latest/reference/architecture/) (é€™é‚Šä»¥ Telepresence 2 ç‚ºä¸») åŸºæœ¬ä¸Šä¾†èªª Telepresence é€é Traffic agent å°‡æ‰€æœ‰ç›®æ¨™æœå‹™çš„æµé‡/ç‰¹å®š header(â€œx-telepresence-intercept-idâ€) è«‹æ±‚é‡å°è‡³æœ¬æ©Ÿä¸­ï¼Œé€™æ¨£æˆ‘å€‘å°±é‡å°å–®ä¸€æœå‹™é€²è¡Œå¿«é€Ÿçš„é€²è¡Œé–‹ç™¼ï¼ŒåŒæ™‚åœ°æ©Ÿç«¯å¦‚æœä¹Ÿé€£æ¥è‡³ Kubernets Cluster å…¶ä»–çš„è³‡æºä¹Ÿæ˜¯ç›¸é€šçš„ telepresence version Client v2.2.1 (api v3) Daemon v2.2.0 (api v3) Usage: telepresence [command] Available Commands: Session Commands: connect Connect to a cluster login Authenticate to Ambassador Cloud logout Logout from Ambassador Cloud license Get License from Ambassador Cloud status Show connectivity status quit Tell telepresence daemon to quit Traffic Commands: list List current intercepts intercept Intercept a service leave Remove existing intercept preview Create or remove preview domains for existing intercepts Other Commands: version Show version uninstall Uninstall telepresence agents and manager dashboard Open the dashboard in a web page current-cluster-id Get cluster ID for your kubernetes cluster Telepresence 1.0 è·Ÿ 2.0 å·®ç•°å¾ˆå¤§ï¼Œ2.0 æ˜¯ä»¥ Golang é‡æ–°æ”¹å¯«ï¼Œå®˜æ–¹ä¹Ÿå»ºè­°å¾ 2.0 é–‹å§‹ï¼Œä¸é 2.0 ç›®å‰é‚„æ²’æœ‰å®Œå…¨é–‹ç™¼å®Œæˆ NAMESPACE NAME READY STATUS RESTARTS AGE ambassador traffic-manager-78f4f95c7d-z62lm 1/1 Running 1 33h ç¬¬ä¸€æ¬¡æ“ä½œ Telepresenceï¼Œæœƒåœ¨ Kubernets ä¸­å»ºç«‹ traffic-manager, Traffic-manager æ˜¯ Telepresence 2.0 çš„æ ¸å¿ƒçµ„ä»¶ä¹Ÿæ˜¯è² è²¬æœ¬åœ° Telepresence Demaons åŠç›®æ¨™ Pod ä¸­ Traffice Agent çš„æºé€š kubectl delete svc,deploy -n ambassador traffic-manager å¿…è¦çš„æ™‚å€™å¯ä»¥é€²è¡Œåˆªé™¤ï¼Œä¸‹ä¸€æ¬¡ Telepresence é‡æ–°é€£ç·šçš„æ™‚å€™æœƒé‡å»º ","date":"2021-05-04","objectID":"/posts/telepresence-2-have-a-tried/:0:1","tags":["telepresence","debug","microservices","kubernetes"],"title":"Telepresence 2 Have a Tried","uri":"/posts/telepresence-2-have-a-tried/"},{"categories":null,"content":"cage1016/ms-demo gokit microservice demo æ¥ä¸‹ä¾† Demo å°±ä»¥ cage1016/ms-demo ä¸­çš„ gokit microservice demo ä¾†é€²è¡Œæ“ä½œ Service Method Description add Sum Expose Sum(a,b) method tictac Tic Expose Tic method (incrase value by Add Sum GRPC ) tictac Tac Expose Tac method (recive value) gokit microservice demo architecture all TCP connections æº–å€‹ä¸€å€‹å¯ç”¨çš„ K8s clusterï¼Œæˆ‘å€‘é€™é‚Šä½¿ç”¨ Mac docker-desktop çš„ k8s cluster éƒ¨ç½² cage1016/ms-demo: gokit microservice demo Add, Tictac å¾®æœå‹™ kubectl apply -f https://raw.githubusercontent.com/cage1016/ms-demo/master/deployments/kubernetes-manifests-all.yaml kubectl get po NAME READY STATUS RESTARTS AGE add-68b7f4b486-cqf4m 1/1 Running 0 17m tictac-85f698c88f-cw6mg 2/2 Running 1 17m Expose serviceï¼Œé€™é‚Šä½¿ç”¨çš„æ–¹å¼ç‚º LoadBalancer kubectl apply -f https://raw.githubusercontent.com/cage1016/ms-demo/master/deployments/lb-all.yaml kubectl get svc NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE add ClusterIP 10.97.120.99 \u003cnone\u003e 80/TCP,8000/TCP 18m add-external LoadBalancer 10.101.69.142 localhost 8180:31605/TCP,8181:32609/TCP 5m57s kubernetes ClusterIP 10.96.0.1 \u003cnone\u003e 443/TCP 5d5h tictac ClusterIP 10.96.191.66 \u003cnone\u003e 80/TCP,8000/TCP 18m tictac-external LoadBalancer 10.100.63.131 localhost 9190:30349/TCP,9191:30063/TCP 5m57s è¨­å®šæ””æˆªå™¨ï¼Œintercept Add service name grpc è‡³æœ¬æ©Ÿä¸­ 10121 (GRPC) serviceï¼Œç­‰å¾…æŒ‡ä»¤å®Œæˆå¾Œä¸­é¡¯ç¤ºæœƒæ””æˆª add service æ‰€æœ‰æµé‡è‡³ 127.0.0.1:10121 telepresence intercept add --service add --port 10121:grpc Using Deployment add intercepted Intercept name : add State : ACTIVE Workload kind : Deployment Destination : 127.0.0.1:10121 Service Port Identifier: grpc Volume Mount Error : macFUSE 4.0.5 or higher is required on your local machine Intercepting : all TCP connections é€™æ™‚å€™æˆ‘å€‘å¯ä»¥çœ‹åˆ° add Pod ä¸­å·²ç¶“è¢«ç½®å…¥ traffic-agent kubectl iexec add Use the arrow keys to navigate: â†“ â†‘ â†’ â† ? Select Container: Container: â–¸ add Container: traffic-agent åœ¨ cage1016/ms-demo ä¸­é€²è¡Œ Debugï¼ŒVSCode ä¸­ lanuch.json åŠ å…¥ Debug è¨­å®šå¾ŒåŸ·è¡Œ { \"configurations\": [ { \"name\": \"add\", \"type\": \"go\", \"request\": \"launch\", \"mode\": \"auto\", \"program\": \"${workspaceFolder}/cmd/add\", \"env\": { \"QS_LOG_LEVEL\": \"info\", \"QS_HTTP_PORT\": \"10120\", \"QS_GRPC_PORT\": \"10121\", } }, ] } debug è¨­å®š Add æœå‹™ä¸­æ–·é» debug ç²å– Tictac æœå‹™çš„ URL TICTAC_HTTP_EXTERNAL_PORT=$(kubectl get service tictac-external -o jsonpath='{.spec.ports[?(@.name==\"http\")].port}') TICTAC_EXTERNAL_HOST=$(kubectl get service tictac-external -o jsonpath='{.status.loadBalancer.ingress[0].hostname}') # TICTAC_EXTERNAL_HOST=$(kubectl get service tictac-external -o jsonpath='{.status.loadBalancer.ingress[0].ip}') # unmark if necessary TICTAC_HTTP_EXTERNAL_URL=$TICTAC_EXTERNAL_HOST:$TICTAC_HTTP_EXTERNAL_PORT echo $TICTAC_HTTP_EXTERNAL_URL ä½¿ç”¨ curl é€²è¡Œè«‹æ±‚ curl -X POST $TICTAC_HTTP_EXTERNAL_URL/tic VSCode ä¸­åŸ·è¡Œä¸­çš„ Add service æœƒæˆåŠŸæ””æˆªè‡³æµé‡ä¸¦åœåœ¨æˆ‘å€‘è¨­ç½®çš„ä¸­æ–·é»ä¸­ debug header(â€œx-telepresence-intercept-idâ€) Telepresence é™¤äº†å…¨æµé‡çš„æ””æˆªä¹‹å¤–ä¹Ÿæ”¯æ´ç‰¹å®šçš„è«‹æ±‚ï¼ŒåŸºæœ¬ä¸Šçš„æ“ä½œæ­¥é©Ÿæ˜¯ä¸€æ¨£çš„ï¼Œå·®ç•°çš„éƒ¨ä»½éœ€è¦å…ˆé€²è¡Œ Telepresence login é€²è¡Œ Telepresence login Telepresence login (Optional)ï¼Œå¦‚æœå·²ç¶“è·‘éä¸€æ¬¡ interceptï¼Œè¨˜å¾—å…ˆé€€å‡ºç•¶å‰çš„ intercept Telepresence leave add ä¸€æ¨£é€²è¡Œè¨­å®šæ””æˆªå™¨çš„é…ç½®ä¸¦åŠ ä¸Š --preview-url=falseï¼Œæˆ‘å€‘ä¸¦ä¸éœ€åœ¨ Ambassador ä¸Šç”¢ç”Ÿ preview url éœ€è¦ Telepresence login æ“ä½œ intercept æ‰æœƒæœ‰ç‰¹å®šè«‹æ±‚ï¼Œä¸ç„¶æ€éº¼æ“ä½œéƒ½æœƒæ˜¯ all TCP connections telepresence intercept add --service add --port 10121:grpc --preview-url=false Using Deployment add intercepted Intercept name : add State : ACTIVE Workload kind : Deployment Destination : 127.0.0.1:10121 Service Port Identifier: grpc Volume Mount Error : macFUSE 4.0.5 or higher is required on your local machine Intercepting : HTTP requests that match all of: header(\"x-telepresence-intercept-id\") ~= regexp(\"5b771ea3-8f6a-4be1-82f3-675aa1e28840:add\") é€™æ™‚å€™å†ä½¿ç”¨ curl é€²è¡Œè«‹æ±‚ä¸¦åŠ ä¸Šç‰¹å®šçš„ (x-telepresence-intercept-id) æ‰æœƒé€²è¡Œæ””æˆªï¼Œæ²’æœ‰åŠ ä¸Š Header çš„è«‹æ±‚åä¹‹ä¸ç† curl -H 'x-telepresence-intercept-id: 5b771ea3-8f6a-4be1-82f3-675aa1e28840:add' -X POST $TICTAC_HTTP_EXTERNAL_URL/tic VSCode æ””æˆªç‰¹å®šè«‹æ±‚ é€™é‚Šä¸€å€‹æˆåŠŸçš„å› ç´ æ˜¯ tictac tic å‘¼å« add sum GRPC æ™‚ä¸€åŒæŠŠ header çš„ x-telepresence-intercept-id åŠ åˆ° context æ‰å¯ä»¥ debug ","date":"2021-05-04","objectID":"/posts/telepresence-2-have-a-tried/:0:2","tags":["telepresence","debug","microservices","kubernetes"],"title":"Telepresence 2 Have a Tried","uri":"/posts/telepresence-2-have-a-tried/"},{"categories":null,"content":"çµè«– Teleresence 2 å¯ä»¥æœ‰æ•ˆçš„é™ä½å¤šå€‹å¾®æœå‹™çš„ debug é«”é©—ï¼Œåªæ””æˆªç‰¹å®šè«‹æ±‚æ›´æ˜¯æ–¹ä¾¿ï¼Œä¸éœ€è¦æ“”å¿ƒæŠŠå¾®æœå‹™å’¬æ­»ï¼Œä¸éç›®å‰é–‹ç™¼é‚„åœ¨é€²è¡Œä¸­ï¼ŒGithub community å›å ±çš„ issue é‚„æ˜¯ä¸å°‘ï¼Œé‚„æ˜¯å€¼å¾—ä¸€ç©ã€‚å¤§å®¶å¯ä»¥è‡³ cage1016/ms-demo: gokit microservice demo ä¸­ clone æœ‰æ‰€çš„ç¨‹å¼ç…§è‘—æ“ä½œçœ‹çœ‹é«”é©—çœ‹çœ‹ ","date":"2021-05-04","objectID":"/posts/telepresence-2-have-a-tried/:0:3","tags":["telepresence","debug","microservices","kubernetes"],"title":"Telepresence 2 Have a Tried","uri":"/posts/telepresence-2-have-a-tried/"},{"categories":null,"content":"åœ¨æ§‹å»º container image æ™‚ï¼Œæœ‰æ™‚å€™æœƒæœ‰éœ€æ±‚å‹•æ…‹ä¸‹è¼‰ Github repo ä¸­çš„ Assets æª”æ¡ˆï¼Œç°¡å–®çš„æ–¹å¼å°±æ˜¯åœ¨ `dockerfile` é€é `curl` æŒ‡ä»¤ä¾†ç²å–æª”æ¡ˆï¼Œæœ¬ç¯‡æ–‡ç« å‰‡é€é paketo-buildpacks/packit ä¾†å¯¦ä½œä¸€å€‹å¯ä»¥ä¸‹è¼‰ Github Assets çš„ buildpack cage1016/github-assets-cnb","date":"2021-04-20","objectID":"/posts/github-assets-cnb/","tags":["buildpacks","gcp","pack","github","paketo"],"title":"Github Assets Cnb","uri":"/posts/github-assets-cnb/"},{"categories":null,"content":" Github Asset Cnb åœ¨æ§‹å»º container image æ™‚ï¼Œæœ‰æ™‚å€™æœƒæœ‰éœ€æ±‚å‹•æ…‹ä¸‹è¼‰ Github repo ä¸­çš„ Assets æª”æ¡ˆï¼Œç°¡å–®çš„æ–¹å¼å°±æ˜¯åœ¨ dockerfile é€é curl æŒ‡ä»¤ä¾†ç²å–æª”æ¡ˆï¼Œå¦‚æœæ˜¯ private repo æ™‚å¦å¤–é…ç½® TOKEN å³å¯ dockerfile ARG GITHUB_TOKEN=\u003cgithub-token\u003e ARG REPO=qeek-dev/apitest-toolchain ARG FILE=apitest-toolchain-linux-amd64 ARG VERSION=v0.1.0 ARG TARGET=apitest-toolchain RUN ASSET_ID=$(if [ $VERSION != \"latest\" ]; then \\ echo $(curl -H \"Authorization: token $GITHUB_TOKEN\" -H \"Accept: application/vnd.github.v3.raw\" -s https://api.github.com/repos/$REPO/releases | jq \". | map(select(.VERSION == \\\"$VERSION\\\"))[0].assets | map(select(.name == \\\"$FILE\\\"))[0].id\"); \\ else\\ echo $(curl -H \"Authorization: token $GITHUB_TOKEN\" -H \"Accept: application/vnd.github.v3.raw\" -s https://api.github.com/repos/$REPO/releases | jq \".[0].assets | map(select(.name == \\\"$FILE\\\"))[0].id\"); \\ fi) \\ \u0026\u0026 curl -vLJo /tmp/$TARGET -H 'Accept: application/octet-stream' \"https://$GITHUB_TOKEN:@api.github.com/repos/$REPO/releases/assets/$ASSET_ID\" \\ \u0026\u0026 chmod +x /tmp/$TARGET \u0026\u0026 mv /tmp/$TARGET /bin ä¸Šè¿° dockerfile å¯ä»¥åˆ†æˆäºŒå€‹éƒ¨ä»½ é€é Github API ç²å–å°æ‡‰ Asset ID é€é curl ä¸‹è¼‰å°æ‡‰ Asset ID çš„å¯¦é«”æª”æ¡ˆ ä¹Ÿå› ç‚ºè‡ªå·±æœ‰é€™ä¸€å€‹éœ€æ±‚ï¼Œæ‰€ä»¥ cage1016/github-assets-cnb é€™ä¸€å€‹ Buildapck çš„å°ˆæ¡ˆå°±å‡ºç¾äº† ","date":"2021-04-20","objectID":"/posts/github-assets-cnb/:0:0","tags":["buildpacks","gcp","pack","github","paketo"],"title":"Github Assets Cnb","uri":"/posts/github-assets-cnb/"},{"categories":null,"content":"cage1016/github-assets-cnb A Cloud Native Buildpack that Download Github Assets åŸºæœ¬ä¸Šé€™ä¸€å€‹ buildpack å°±æ˜¯é€é paketo-buildpacks/packit é€™ä¸€å€‹ Buildpacks Utils Library ä¾†å¯¦ä½œï¼Œä¸€å®šç¨‹åº¦æ¸›è¼•äº†å° buildpacks/spec æœ‰é»éº»ç…©çš„è¦ç¯„ ä¾‹å¦‚ github.com/paketo-buildpacks/packit/cargo: æœ‰æä¾›å° metadata.dependencies æ“ä½œçš„å‡½å¼ github.com/paketo-buildpacks/packit/postal: æœ‰æä¾› Drop å¯ä»¥ç›´æ¥é€é http ä¾†ä¸‹è¼‰æª”æ¡ˆ Usage Create a folder mkdir -p sample-app create project.toml, é€™é‚Šä»¥ä¸‹è¼‰ skaffold ç‚ºä¾‹ï¼Œå¦‚æœ Github Asset æ˜¯å±¬æ–¼ private repoï¼Œé…ç½®åŠ ä¸Š TOKEN å³å¯ cat \u003c\u003cEOF \u003e\u003e sample-app/project.toml # [[build.env]] # optional, github token for private assets # name = \"TOKEN\" # value = \"\u003cgithub-token\u003e\" # skaffold [[build.env]] # required name = \"REPO\" value = \"GoogleContainerTools/skaffold\" [[build.env]] # required name = \"FILE\" value = \"skaffold-linux-amd64\" [[build.env]] # optional, default set to FILE value name = \"TARGET\" value = \"skaffold\" [[build.env]] # optional, default set to 'latest' name = \"VERSION\" value = \"v1.22.0\" EOF build container image with buildpack pack build test_assets_run --path ./sample-app \\ -b cage1016/github-assets-cnb@1.0.0 \\ --builder gcr.io/buildpacks/builder:v1 \\ \u0026\u0026 docker run --rm test_assets_run \"skaffold version\" demo è©³ç´°å¯¦ä½œçš„ç´°ç¯€è«‹è‡³ cage1016/github-assets-cnb æŸ¥é–± github-assets-cnb@2.1.0 github-assets-cnb@1.1.0 æˆ‘å€‘åœ¨ project.toml ä¸­é…ç½®ç›¸é—œçš„çš„ [[build.env]] ä¾†æŒ‡å®šå°æ‡‰çš„ Github Assets åƒæ•¸ã€‚åŸºæœ¬ä¸Šå¯ä»¥é”æˆä¸€é–‹å§‹çš„æœŸæœ›åœ¨ Buildpack æ§‹å»º Container image éæœŸç¨‹ä¸­ä¸‹è¼‰ Github Assses çš„æª”æ¡ˆï¼Œä¸éå¦‚æœæœ‰éœ€æ±‚ä¸‹è¼‰ å¤šå€‹ Assets æ™‚å°±æ²’æœ‰è¾¦æ³•æ»¿è¶³é€™å€‹éœ€æ±‚äº† æ‰€ä»¥åœ¨ github-assets-cnb@2.1.0 ä¸­å¢åŠ äº† Support Download Public/Private Github Assets x-tar, gzip, x-zx, zip auto unarchive Support metadata.githubassets fields repo: Github Repo asset: Github Repo asset name tag: Release tag name, default set to â€œlatestâ€ token_env: (optional), Please assign ENV name for private repo destination: download asset destination path to, bin/\u003cyour-asset\u003e for application/x-executable asset strip_components: x-tar, gzip, x-zx suuport StripComponents feature. Create project.toml if you want to embed github assets cat \u003c\u003cEOF \u003e\u003e project.toml # assign token [[build.env]] name = \"APITEST_TOOLCHAIN_TOKEN\" value = \"\u003cgithub-token\u003e\" [[metadata.githubassets]] repo = \"kkdai/youtube\" asset = \"youtubedr_2.7.0_linux_arm64.tar.gz\" destination = \"bin\" [[metadata.githubassets]] repo = \"qeek-dev/apitest-toolchain\" token_env = \"APITEST_TOOLCHAIN_TOKEN\" asset = \"apitest-toolchain-linux-amd64\" destination = \"bin/apitest-toolchain\" tag = \"v0.1.0\" [[metadata.githubassets]] repo = \"stedolan/jq\" asset = \"jq-linux64\" destination = \"bin/jq\" EOF Build container image pack build myapp --buildpack cage1016/github-assets-cnb@2.1.0 Check /layers/cage1016_github-assets-cnb Container image ","date":"2021-04-20","objectID":"/posts/github-assets-cnb/:0:1","tags":["buildpacks","gcp","pack","github","paketo"],"title":"Github Assets Cnb","uri":"/posts/github-assets-cnb/"},{"categories":null,"content":"TODO","date":"2021-04-14","objectID":"/posts/ghcr-io-pack-build/","tags":["ghcr.io","registry","pack"],"title":"ghcr.io Pack Build","uri":"/posts/ghcr-io-pack-build/"},{"categories":null,"content":"Github æä¾›äº†é–‹æºçš„å°ˆæ¡ˆå…è²»çš„ registryï¼Œæ‰€ä»¥å¯«å€‹æ–‡ç« ä¾†è¨˜éŒ„ä¸€ä¸‹ï¼Œå¦‚æœä½¿ç”¨ .github/workflows/build.yml ä¸­ä½¿ç”¨ pack ä¾†æ§‹å»º container image Reference Packages: Container registry now supports GITHUB_TOKEN - GitHub Changelog ","date":"2021-04-14","objectID":"/posts/ghcr-io-pack-build/:0:0","tags":["ghcr.io","registry","pack"],"title":"ghcr.io Pack Build","uri":"/posts/ghcr-io-pack-build/"},{"categories":null,"content":"åœ¨ Buildpack Tips and Tricks ä¸Šä¸€ç¯¤æ–‡ç« ä¸­æˆ‘å€‘æåˆ°äº† Cloud Native Buildpacks å°ˆæ¡ˆç™¼èµ·çš„ç›®çš„é‚„æœ‰ä¸€äº›ä½¿ç”¨ä¸Šçš„å¿ƒå¾—ï¼Œä¸€èˆ¬çš„ä½¿ç”¨æƒ…å¢ƒå°±æ˜¯é¸æ“‡é©åˆçš„ builder (Google, Heroku, Paketo)ï¼Œå¿…è¦æ™‚å¯ä»¥æŒ‡å®šé¡å¤–çš„ buildpack ã€‚æœ¬ç¯‡æ–‡ç« ç¨å¾Œä¹Ÿæœƒä»‹ç´¹ buildpack åŸºæœ¬çµ„æˆå…ƒä»¶ã€å¦‚ä½•ç·¨å¯«è‡ªå·±çš„ buildpack åŠç™¼ä½ˆè‡³ buildpack registry","date":"2021-04-08","objectID":"/posts/build-your-buildpack/","tags":["buildpacks","gcp","pack","heroku","paketo"],"title":"Build Your Buildpack","uri":"/posts/build-your-buildpack/"},{"categories":null,"content":"åœ¨ Buildpack Tips and Tricks ï½œ KaiChu ä¸Šä¸€ç¯¤æ–‡ç« ä¸­æˆ‘å€‘æåˆ°äº† Cloud Native Buildpacks å°ˆæ¡ˆç™¼èµ·çš„ç›®çš„é‚„æœ‰ä¸€äº›ä½¿ç”¨ä¸Šçš„å¿ƒå¾—ï¼Œä¸€èˆ¬çš„ä½¿ç”¨æƒ…å¢ƒå°±æ˜¯é¸æ“‡é©åˆçš„ builder (Google, Heroku, Paketo)ï¼Œå¿…è¦æ™‚å¯ä»¥æŒ‡å®šé¡å¤–çš„ buildpack ã€‚æœ¬ç¯‡æ–‡ç« ç¨å¾Œä¹Ÿæœƒä»‹ç´¹å¦‚ä½•ç·¨å¯«è‡ªå·±çš„ buildpack åŠå¦‚ä½•ç™¼ä½ˆè‡³ buildpack registry ","date":"2021-04-08","objectID":"/posts/build-your-buildpack/:0:0","tags":["buildpacks","gcp","pack","heroku","paketo"],"title":"Build Your Buildpack","uri":"/posts/build-your-buildpack/"},{"categories":null,"content":"é€™ä¸€ç¯‡æ–‡ç« æœƒå‘Šè¨¢ä½ ä»€éº¼ buildpack åŸºæœ¬çµ„æˆå…ƒä»¶ä»‹ç´¹ æ‰‹å·¥æ‰“é€ è‡ªå·±å®šç¾© builpack (pure shell) ä½¿ç”¨ packit å»ºç«‹è‡ªå·±å®šç¾© buildpack (Buildpacks Utils Library) æ€éº¼é€é github action ç›´æ¥ç™¼ä½ˆè‡³ buildpack registry ","date":"2021-04-08","objectID":"/posts/build-your-buildpack/:0:1","tags":["buildpacks","gcp","pack","heroku","paketo"],"title":"Build Your Buildpack","uri":"/posts/build-your-buildpack/"},{"categories":null,"content":"é€™ä¸€ç¯‡æ–‡ç« ä¸æœƒå‘Šè¨¢ä½ ä»€éº¼ æ€éº¼ç·¨å¯«ä¸€å€‹ builder, å¦‚ä½•è‡ªå®šç¾© builder è«‹å…ˆçœ‹å®˜æ–¹çš„ç¯„ä¾‹ Create a builder Â· Cloud Native Buildpacks Buildpack Examples: pack build test_img --path apps/test-app --builder cnbs/sample-builder:bionic Flags: -B, --builder string Builder image -b, --buildpack strings Buildpack to use. One of: a buildpack by id and version in the form of '\u003cbuildpack\u003e@\u003cversion\u003e', path to a buildpack directory (not supported on Windows), path/URL to a buildpack .tar or .tgz file, or a packaged buildpack image name in the form of '\u003chostname\u003e/\u003crepo\u003e[:\u003ctag\u003e]' Repeat for each buildpack in order, or supply once by comma-separated list ... åœ¨ buildpack help ä¸­å¯ä»¥çœ‹åˆ° -b string or --buildpack strings çš„åƒæ•¸å¯ä»¥é¡å¤–çš„ buildpackï¼Œbuilder image æœƒä¾æ“š \u003cbuildpack\u003e@\u003cversion\u003e or \u003chostname\u003e/\u003crepo\u003e[:\u003ctag\u003e] å» buildpack registry æŠ“å–å°æ‡‰çš„ buildpack å›ä¾†ä¸€èµ·ç·¨è­¯ (local ç›¸å°ç›®éŒ„ä¹Ÿæ˜¯å¯ä»¥çš„) åœ¨é–‹å§‹ç·¨å¯«è‡ªå·±çš„ builpack æ™‚ï¼Œæ‡‰è©²å°±è¦å…ˆäº†è§£æ•´å€‹ buildpack çš„æ¶æ§‹ã€å…ƒä»¶é‚„æœ‰é‹ä½œçš„æ¨¡å¼ã€‚å…ˆçœ‹çœ‹ä½¿ç”¨ buildpack æ§‹å»ºçš„ container image åŒ…å«äº†é‚£äº›æ±è¥¿ï¼Œæˆ‘å€‘ä»¥ä½¿ç”¨ gcr.io/buildpacks/builder:v1 builder æ§‹å»ºçš„ container image ä¾†åˆ†æ ","date":"2021-04-08","objectID":"/posts/build-your-buildpack/:0:2","tags":["buildpacks","gcp","pack","heroku","paketo"],"title":"Build Your Buildpack","uri":"/posts/build-your-buildpack/"},{"categories":null,"content":"Pack inspect Pack æä¾›äº† inspect çš„æŒ‡ä»¤å¯ä»¥å¹«åŠ©æˆ‘å€‘æª¢æŸ¥ container image pack inspect \u003cimage-name\u003e [flags] $ pack inspect ms-sample-add Inspecting image: ms-sample-add REMOTE: (not present) LOCAL: Stack: google Base Image: Reference: 9875be79e8f3fc045dc520b8da706b14b07784aaec003e243c0a9d2050993f0a Top Layer: sha256:38407137fb1d65f4597f0dce78ac3b249dbfc247c30c4061981eb92b0fce4127 Run Images: gcr.io/buildpacks/gcp/run:v1 Buildpacks: ID VERSION HOMEPAGE google.go.runtime 0.9.1 - google.go.build 0.9.0 - google.utils.label 0.0.1 - Processes: TYPE SHELL COMMAND ARGS web (default) /layers/google.go.build/bin/main ç”± Pack inspect æŒ‡ä»¤å‡ºè¼¸çµæœï¼Œæœ‰å¹¾å€‹éƒ¨ä»½è·Ÿæˆ‘å€‘å¦‚è¦è‡ªå®šç¾© buildpack æ™‚çš„æ¦‚å¿µæœ‰é—œä¿‚, Stack, Buildpacks, Processes é‚„æœ‰ç¨æ—©åˆ°çš„ builder ","date":"2021-04-08","objectID":"/posts/build-your-buildpack/:0:3","tags":["buildpacks","gcp","pack","heroku","paketo"],"title":"Build Your Buildpack","uri":"/posts/build-your-buildpack/"},{"categories":null,"content":"Stack ç”±ä¸Šä¸€ç¯€ pack inspect å¯ä»¥çœ‹å‡ºï¼ŒStack æ˜¯ç”± Base Image + Run Images äºŒå€‹éƒ¨ä»½çµ„åˆè€Œæˆ (pack stack suggest) Base Image çš„å·¥ä½œåŸºæœ¬ä¸Šå°±æ˜¯ç”Ÿå‘½å‘¨æœŸä¸­ç”¨ä¾†è™•ç† build å·¥ä½œçš„åŸºåº• container imageï¼Œå¿…è¦çš„æ™‚å€™æ˜¯å¯ä»¥é€²è¡Œæ“´å……çš„ Run Images å‰‡ç‚ºæœ€å¾Œæ‡‰ç”¨ç¨‹å¼åŸ·è¡Œç’°å¢ƒçš„åŸºåº• container imageï¼Œå¿…è¦çš„æ™‚å€™ä¹Ÿæ˜¯å¯ä»¥é€²è¡Œæ“´å…… (ä¸Šä¸€ç¯‡æ–‡ç« ä¸­å°±é‡åˆ° gcr.io/buildpacks/gcp/run:v1 ä¸­ä¸åŒ…å« /usr/share/zoneinfo æœƒå°æ˜“ golang ç¨‹å¼åœ¨åŸ·è¡Œæ™‚å€ç›¸é—œæ“ä½œæ™‚å ±éŒ¯ï¼Œè€Œæ¡ç”¨æ“´å…… run image ä¾†è§£æ±ºï¼ŒGoogle ä¹Ÿæ›´æ–°äº† run image ä¾†è§£é€²é€™å€‹å•é¡Œ) ","date":"2021-04-08","objectID":"/posts/build-your-buildpack/:0:4","tags":["buildpacks","gcp","pack","heroku","paketo"],"title":"Build Your Buildpack","uri":"/posts/build-your-buildpack/"},{"categories":null,"content":"Buildpacks (packaged in a builder) A buildpack is a unit of work that inspects your app source code and formulates a plan to build and run your application. Buildpack å°±æ˜¯æ¯ä¸€å€‹å·¥ä½œå…§å®¹çš„æœ€å°å–®å…ƒï¼ŒBuildpack ä¸­å®šç¾©åœ¨æ§‹å»º container image çš„ç”Ÿå‘½å‘¨æœŸä¸­çš„äº‹ä»¶ Detect, Analyze, Restore, Build, Export, Create, Launch, Rebase éœ€è¦ä½œä»€éº¼å‹•ä½œ Output log Example: ... Network Mode: ===\u003e DETECTING ======== Results ======== pass: cage1016/jq-cnb@1.0.0 Resolving plan... (try #1) cage1016/jq-cnb 1.0.0 ===\u003e ANALYZING Previous image with name \"test_img\" not found ===\u003e RESTORING ===\u003e BUILDING URI -\u003e https://github.com/stedolan/jq/releases/download/jq-1.6/jq-linux64 Downloading dependency... Moving dependency... ===\u003e EXPORTING ... ç•¶æˆ‘å€‘æœ‰éœ€æ±‚è¦ç·¨å¯«è‡ªå®šç¾©çš„ buildpack æ™‚å‰‡æœ€å°‘éœ€è¦åŒ…å«ä¸‰å€‹æª”æ¡ˆ buildpack.toml: æä¾› builpack ç›¸é—œçš„è³‡è¨Šï¼Œå¦‚ id, version, License ç­‰ç­‰ bin/detect:)æä¾›è¦å¥—ç”¨ç•¶å‰ buildpack çš„é‚è¼¯ï¼Œå¦‚ pip çš„ buildpack æª¢æŸ¥æ˜¯å¦æœ‰ requestments.txtï¼Œæ²’æœ‰åŒ…å«å°±è·³å‡º bin/build: æ‰¿ä¸Šé¢çš„ç¯„ä¾‹ï¼Œå¯¦ä½œæ“ä½œ pip å®‰è£å°æ‡‰çš„å¥—ä»¶ bin/detect \u0026 bin/build æ˜¯ç‚ºéœ€è¦å¯åŸ·è¡Œçš„æª”æ¡ˆï¼Œç°¡å–®å°±æ˜¯ shell script, ä¸éä¹Ÿæœ‰ä¸€äº›å·¥å…· paketo-buildpacks/packit Buildpacks Utils Library åŠ paketo-community/bootstrapper (bootstrap å·¥å…·åŒ…å¿«é€Ÿæ§‹å»º cnb å°ˆæ¡ˆæ¡†æ¶)ï¼Œä½¿ç”¨ Golang èªè¨€ä¾†ç”¢å‡º bin/detect, bin/build çš„ binary æª”æ¡ˆä¾› Pack æŒ‡ä»¤ç›´æ¥ä½¿ç”¨ ","date":"2021-04-08","objectID":"/posts/build-your-buildpack/:0:5","tags":["buildpacks","gcp","pack","heroku","paketo"],"title":"Build Your Buildpack","uri":"/posts/build-your-buildpack/"},{"categories":null,"content":"Builder builder (ref: https://buildpacks.io/docs/concepts/components/create-builder.svg) A builder is an image that contains all the components necessary to execute a build. A builder image is created by taking a build image and adding a lifecycle, buildpacks, and files that configure aspects of the build including the buildpack detection order and the location(s) of the run image ç°¡å–®ä¾†èªª builder å°±æ˜¯å¹«ä½ æº–å‚™çš„å…ƒä»¶(ç¨æ—©æåˆ°çš„ Stackï¼ŒBuildpack ç­‰ç­‰)ï¼Œä¾ç…§å®šç¾©å †ç–Šçš„é †åº(builder.toml)ä¾†å¹«ä½ æ‰“åŒ…æ§‹å»º container image https://github.com/GoogleCloudPlatform/buildpacks/blob/main/builders/gcp/base/builder.toml#L31-L45 [[buildpacks]] id = \"google.go.runtime\" uri = \"go/runtime.tgz\" [[buildpacks]] id = \"google.go.build\" uri = \"go/build.tgz\" [[buildpacks]] id = \"google.go.gopath\" uri = \"go/gopath.tgz\" [[buildpacks]] id = \"google.go.functions-framework\" uri = \"go/functions_framework.tgz\" ###### # Go # ###### [[order]] [[order.group]] id = \"google.go.runtime\" [[order.group]] id = \"google.go.functions-framework\" [[order.group]] id = \"google.go.build\" [[order.group]] id = \"google.config.entrypoint\" optional = true [[order.group]] id = \"google.go.clear_source\" optional = true [[order.group]] id = \"google.utils.label\" ä»¥ gcr.io/buildpacks/builder:v1 ä¾†èªªï¼Œæ”¯æ´äº† Go 1.10 +, Node.js 10 +, Python 3.7 +, Java 8, 11, .NET Core 3.1ï¼Œæ‰€ä»¥æˆ‘å€‘æœƒç™¼ç¾ç‚ºäº†å…¼å®¹é€™äº›ç¨‹å¼èªè¨€ï¼Œbuilder ä¸­åŒ…å«äº†éå¸¸å¤šçš„ buildpackï¼Œä¸¦ä¸”æè¿°äº†é€™äº› buildpack åœ¨å°æ‡‰èªè¨€ä¸­çš„é †åº å¦‚ç¨æ—©é€é pack inspect æŒ‡ä»¤çœ‹åˆ° Buildpacks: cage1016/ms-demo-add ID VERSION HOMEPAGE google.go.runtime 0.9.1 - google.go.build 0.9.0 - google.utils.label 0.0.1 - cage1016/ms-sample-add æ˜¯ä¸€å€‹ Golang ç·¨å¯«çš„æ‡‰ç”¨æœå‹™ï¼Œåœ¨ä½¿ç”¨ gcr.io/buildpacks/builder:v1 æ§‹å»º container image ä¸­æˆ‘å€‘å¯ä»¥çœ‹åˆ° buildpack å°±æ˜¯ GoogleCloudPlatform/buildpacks ä¸­å°æ–¼ Golang èªè¨€ä¸­æ‰€æŒ‡å®šçš„ä¸‰å€‹ google.go.runtimeï¼Œgoogle.go.buildï¼Œgoogle.utils.label, è‡³æ–¼æ²’æœ‰ google.go.functions-framework æ˜¯å› ç‚ºæˆ‘å€‘ç‰¹åˆ¥æŒ‡å®š Google Cloud Function æ‰€éœ€ç‰¹åˆ¥çš„åƒæ•¸ï¼ŒPack ä¹Ÿå°±æ²’æœ‰å°‡ google.go.functions-framework ä¸€åŒæ§‹å»ºè‡³ container image çš„ buildpack ä¸­ ","date":"2021-04-08","objectID":"/posts/build-your-buildpack/:0:6","tags":["buildpacks","gcp","pack","heroku","paketo"],"title":"Build Your Buildpack","uri":"/posts/build-your-buildpack/"},{"categories":null,"content":"Build your first buildpack åœ¨å¤§è‡³ä¸Šäº†è§£ buildpack çš„åŸºæœ¬æ¦‚å¿µ(Stack, buildpack, builder) ä¹‹å¾Œï¼Œå°±å¯ä»¥é–‹å§‹ç·¨å¯«æˆ‘å€‘è‡ªå®šç¾©çš„ buildpackã€‚é€™ä¸€æ¬¡æˆ‘å€‘éœ€è¦åœ¨ container image ä¸­åŠ å…¥ jq çš„ command ä¾›å¾Œåºä½¿ç”¨ alpine Dockerfile RUN apk add â€“update jq \u0026\u0026 rm -rf /var/cache/apk/* ä»¥ Dockerfile çš„è§’åº¦ä¾†èªªè¦åœ¨ container image ä¸­åŠ å…¥ jq åªéœ€è¦æŒ‡å®š jq çš„åå­å°±å¥½ã€‚è€Œåœ¨ buildpack çš„æ¡†æ¶ä¸‹ï¼Œå°±æœ‰å¹¾ç¨®é¸æ“‡ å¦‚æœæ˜¯åœ¨ container image æ§‹å»ºéç¨‹ä¸­ï¼Œå¯ä»¥æ“´å…… builder imageï¼ŒåŸºæ–¼ builder çš„ image å†å¾€ä¸Šç–Šï¼ŒGoogleCloudPlatform/buildpacks: Extending the builder image å¦‚æœæ˜¯åœ¨åŸ·è¡Œç’°å¢ƒéœ€è¦ï¼Œå¯ä»¥æ“´å…… run imageï¼ŒåŸºæ–¼ builder stack çš„ run image å†å¾€ä¸Šç–Šï¼ŒGoogleCloudPlatform/buildpacks: Extending the run image å¦ä¸€ç¨®æ–¹å¼å°±æ˜¯ç·¨å¯«ä¸€å€‹ inject jq çš„ buildpackï¼Œå†éœ€è¦ jq çš„æ™‚å€™é€é pack --buildpack \u003c\u003cbuildpack\u003e@\u003cversion\u003e\u003e ä¾†åŠ å…¥ï¼Œæˆ‘å€‘é€™ä¸€æ¬¡å°±é¸æ“‡è‡ªå»º jq buildpackï¼Œéƒ¨ç½²ä¹‹å¾Œä¹Ÿæ–¹ä¾¿ä½¿ç”¨ ç¨æ—©æœ‰æéï¼Œç·¨å¯«ä¸€å€‹ builpack æœ€å°‘éœ€è¦æœ‰ 3 å€‹æª”æ¡ˆï¼Œbuildpack.toml, bin/detect, bin/build â”œâ”€â”€ jq-cnb â”‚ â”œâ”€â”€ bin â”‚ â”‚ â”œâ”€â”€ build â”‚ â”‚ â””â”€â”€ detect â”‚ â””â”€â”€ buildpack.toml æº–å‚™å¥½ 3 å€‹æª”æ¡ˆå°±å¯ä»¥é¸æ“‡ builder ä¾†æ§‹å»º buildpack çš„ container image (é€™æ™‚å€™è¦æ³¨æ„çš„äº‹æƒ…æ˜¯ï¼Œè©±èªª builder æœƒæŒ‰ç…§ spec ä¾†æ‰“åŒ…ï¼Œå¯¦äº‹ä¸Š builder å¯¦ä½œä¸Šé‚„æ˜¯æœ‰äº›èªä¸åŒï¼Œé¸æ“‡ builder ä¸Šè¦æ³¨æ„ï¼Œä¸” builder çš„ stack id éœ€è¦åˆ—åœ¨ buildpack.toml ä¸Šçš„ç™½åå–®ä¸Šï¼Œä¸åœ¨ç™½åå­çš„ id æœƒå› å®‰å…¨æ€§è­°é¡Œç„¡æ³•ç·¨è­¯) ä½¿ç”¨ pack build æ¸¬è©¦æˆ‘å€‘çš„ buildpack pack build test-jq-run --builder gcr.io/buildpacks/builder:v1 --buildpack ./jq-cnb --path \u003cempty-folder\u003e æ§‹å»ºå®Œ container image å¾Œå¯ä»¥ä½¿ç”¨ dcoker run ä¾†æª¢æŸ¥ jq æ˜¯å¦å¯ä»¥æ­£å¸¸å·¥ä½œ $ docker run --rm test-jq-run \"echo '{\\\"foo\\\": 0}' | jq .\" { \"foo\": 0 } ä½¿ç”¨ pack inspect ä¾†çœ‹çœ‹æˆ‘å€‘æ§‹å»ºå‡ºä¾†çš„ container image test-jq-runï¼Œå…¶ä¸­ buildpack å€å¡Šæ­£å¸¸çš„é¡¯ç¤ºæˆ‘å€‘åœ¨ buildapck.toml ä¸­æè¿°ä¸­çš„ id ä¸€æ¨£ $ pack inspect test-jq-run Inspecting image: test-jq-run REMOTE: (not present) LOCAL: Stack: google Base Image: Reference: 41b0f9df90f26562392b58280ade9df13e8020d4dd8e56e79910f48f4946a98e Top Layer: sha256:50ba10dd399f2f5fed9657b403f3bc3a2cea534620c3921143e1ac92037ab43b Run Images: gcr.io/buildpacks/gcp/run:v1 Buildpacks: ID VERSION HOMEPAGE cage1016/jq-cnb 1.0.0 - ","date":"2021-04-08","objectID":"/posts/build-your-buildpack/:1:0","tags":["buildpacks","gcp","pack","heroku","paketo"],"title":"Build Your Buildpack","uri":"/posts/build-your-buildpack/"},{"categories":null,"content":"Buildpacks Utils Library cage1016/jq-cnb: A Cloud Native Buildpack that include jq paketo-buildpacks/packit: Buildpacks Utils Library paketo-community/bootstrapper ä¸Šä¸€ç¯€æˆ‘å€‘ä½¿ç”¨ shell çš„æ–¹å¼ä¾†è©¦ç¯„å¦‚æœè‡ªå®šç¾©ä¸€å€‹ç°¡å–®çš„ buildpackã€‚ç°¡å–®ï¼Œä½†æ˜¯è¤‡é›œä¸€é»çš„å®˜æ–¹ ç¯„ä¾‹ å°±æœƒè¦ºå¾— shell ä¸æ˜¯é‚£éº¼å¥½å¯«ï¼Œé›£æ˜¯åœ¨è¦ç¬¦åˆ buildpack çš„ è¦ç¯„ éœ€è¦èŠ±æ™‚é–“å»äº†è§£ï¼Œæ‰€ä»¥é€™æ™‚å€™æœ‰ä¸€äº›å·¥å…·ä¾†å¿«é€Ÿç™¼èµ·ç©ºå°ˆæ¡ˆå°±æ˜¯ä¸€å€‹å¥½é¸æ“‡ cage1016/jq-cnb å°±æ˜¯æ¡ç”¨ paketo-buildpacks/packit Buildpacks Utils Library ç‚ºåŸºç¤ä¾†æ”¹å¯«ä¸Šä¸€ç¯€çš„ shell ç¨‹å¼ç¢¼ï¼Œè©³ç´°çš„ç¨‹å¼ç¢¼è«‹ç›´æ¥é€£çµè‡³ github é é¢æŸ¥çœ‹ï¼Œé‚è¼¯åŸºæœ¬ä¸Šæ˜¯ä¸€è‡´ï¼Œä¸åŒä¹‹è™•å°±æ˜¯ç”± shell çš„éƒ¨ä»½è½‰æ›æˆå° Buildpacks Utils Library çš„æ“ä½œã€‚æ²’æœ‰èª°å¥½èª°å£ï¼Œç«¯çœ‹å¤§å®¶å–œæ­¡ç”¨ä»€éº¼æ–¹å¼ ","date":"2021-04-08","objectID":"/posts/build-your-buildpack/:1:1","tags":["buildpacks","gcp","pack","heroku","paketo"],"title":"Build Your Buildpack","uri":"/posts/build-your-buildpack/"},{"categories":null,"content":"deploy pack to buildpack registry .github/workflows/release.yaml name: Release on: release: types: - published jobs: register: name: Package, Publish, and Register runs-on: - ubuntu-latest steps: - id: checkout name: Checkout code uses: actions/checkout@v2 - if: ${{ github.event_name != 'pull_request' || ! github.event.pull_request.head.repo.fork }} name: Login to GitHub Package Registry uses: docker/login-action@v1 with: registry: ghcr.io username: ${{ github.repository_owner }} password: ${{ secrets.GHCR_TOKEN }} - id: setup-pack uses: buildpacks/github-actions/setup-pack@v4.1.0 - id: package run: | #!/usr/bin/env bash set -euo pipefail BP_ID=\"$(cat buildpack.toml | yj -t | jq -r .buildpack.id)\" VERSION=\"$(cat buildpack.toml | yj -t | jq -r .buildpack.version)\" PACKAGE=\"${REPO}/$(echo \"$BP_ID\" | sed 's/\\//_/g')\" pack package-buildpack --publish ${PACKAGE}:${VERSION} DIGEST=\"$(crane digest ${PACKAGE}:${VERSION})\" echo \"::set-output name=bp_id::$BP_ID\" echo \"::set-output name=version::$VERSION\" echo \"::set-output name=address::${PACKAGE}@${DIGEST}\" shell: bash env: REPO: ghcr.io/${{ github.repository_owner }}/buildpacks - id: register uses: docker://ghcr.io/buildpacks/actions/registry/request-add-entry:4.1.0 with: token: ${{ secrets.PUBLIC_REPO_TOKEN }} id: ${{ steps.package.outputs.bp_id }} version: ${{ steps.package.outputs.version }} address: ${{ steps.package.outputs.address }} å…¶å¯¦ buildpack å·²ç¶“æ‰“é€ äº†ä¸€äº›å·¥å…·ä¾†å¹«åŠ©é–‹ç™¼è€…å¿«é€Ÿéƒ¨ç½² Tools Â· Cloud Native Buildpacksï¼Œæœ¬æ¬¡çš„ç¯„ä¾‹å°±æ˜¯ä½¿ç”¨ Github action + Release è‡ªå·±ç™¼ä½ˆï¼Œå¯¦éš›çš„å…§å®¹ä¹Ÿæ˜¯ Github action ä¸­ä½¿ç”¨ pack package æ–¹æ³•çš„ä¸€äº›æ“ä½œï¼Œç•¶æˆåŠŸ release ä¹‹å¾Œå°±å¯ä»¥åœ¨ buildpack registry ä¸­æŸ¥è©¢çš„åˆ° https://registry.buildpacks.io/buildpacks/cage1016/jq-cnb æœ€å¾Œæˆ‘å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ mkdir null-folder echo -n 1.5 \u003e null-folder/.jq-version # optional, default is set to 1.6 pack build test-new-jq-run --path ./null-folder -b cage1016/jq-cnb@1.1.0 --builder gcr.io/buildpacks/builder:v1 -v \u0026\u0026 docker run --rm test-new-jq-run \"echo '{\\\"foo\\\": 0}' | jq .\" $ pack inspect test-new-jq-run Inspecting image: test-new-jq-run REMOTE: (not present) LOCAL: Stack: google Base Image: Reference: 41b0f9df90f26562392b58280ade9df13e8020d4dd8e56e79910f48f4946a98e Top Layer: sha256:50ba10dd399f2f5fed9657b403f3bc3a2cea534620c3921143e1ac92037ab43b Run Images: gcr.io/buildpacks/gcp/run:v1 Buildpacks: ID VERSION HOMEPAGE cage1016/jq-cnb 1.1.0 https://github.com/cage1016/jq-cnb ","date":"2021-04-08","objectID":"/posts/build-your-buildpack/:1:2","tags":["buildpacks","gcp","pack","heroku","paketo"],"title":"Build Your Buildpack","uri":"/posts/build-your-buildpack/"},{"categories":null,"content":"Reference github-actions/README.md at main Â· buildpacks/github-actions: End-user GitHub Actions related to Cloud Native Buildpacks GoogleCloudPlatform/buildpacks: Builders and buildpacks designed to run on Google Cloudâ€™s container platforms: Builders and buildpacks designed to run on Google Cloudâ€™s container platforms Cloud Native Buildpacks Â· Cloud Native Buildpacks Paketo Buildpacks - Paketo Buildpacks cage1016/jq-cnb: A Cloud Native Buildpack that include jq Buildpack Registry ","date":"2021-04-08","objectID":"/posts/build-your-buildpack/:2:0","tags":["buildpacks","gcp","pack","heroku","paketo"],"title":"Build Your Buildpack","uri":"/posts/build-your-buildpack/"},{"categories":null,"content":"CNCF ä¸‹çš„ buildpack æ˜¯å®šç¾©å‡ºè½‰æ›ç¨‹å¼ç¢¼è‡³ image çš„æ¨™æº–ï¼Œä½¿ç”¨è€…å¯ä»¥é©æ“‡é©åˆçš„ builder (Google, HeroKu, Paketo) ä¾†ç”¢å‡º container imageï¼Œé™¤äº†å…å»ç·¨è¼¯ Dockerfile çš„éƒ¨ä»½ã€container image layer æœ‰ç›¸åŒçš„é«”é©—ã€container image çš„å®‰å…¨æ€§äº¤ç”± builder ä¾†è™•ç†ç­‰ç­‰å¥½è™•ã€‚ä¸éç¾å¥½çš„äº‹æƒ…èƒŒå¾Œä¹Ÿæ˜¯æœ‰ä¸€äº›å–æ¨ã€‚æœ¬ç¯‡æ–‡ç« å°±æ˜¯æœ€è¿‘å„ªåŒ– CI/CD pipeline æµç¨‹ä¸Šä½¿ç”¨ buildpack çš„å¿ƒå¾—åˆ†äº«é‚„æœ‰é‡åˆ°çš„å‘åŠè§£æ±ºæ–¹æ¡ˆ","date":"2021-04-02","objectID":"/posts/buildpack-tips-and-tricks/","tags":["buildpacks","gcp","pack","heroku","paketo"],"title":"Buildpack Tips and Tricks","uri":"/posts/buildpack-tips-and-tricks/"},{"categories":null,"content":"2018 å¹´å»ä¸Šæµ·åƒåŠ  Kubecon å°±æœ‰è½åˆ°é CNCF ä¸‹çš„ Cloud Native Buildpacks çš„å°ˆæ¡ˆã€‚å›ä¾†ä¹Ÿæœ‰è©¦ç©äº†ä¸€ä¸‹ï¼Œæ¦‚å¿µå¾ˆä¸éŒ¯ï¼Œé‚£æ™‚å€™å¯èƒ½æ•´å€‹ç”Ÿæ…‹ç³»çµ±æ¯”è¼ƒä¸å»ºå…¨ï¼Œè©¦ç©äº†ä¸€ä¸‹å°±æ”¾åˆ°æ—é‚Šå»äº† ä¸éè‡ªå¾ Google Cloud Next 20â€™ - Hands-on Keynote: Building Trust for Speedy Innovation ä¸­ä¹Ÿæœ‰å ´æ¬¡æåˆ° Google å…§éƒ¨å·²ç¶“ä½¿ç”¨ Buildpack çš„æœå‹™ï¼Œä¹‹å¾Œå°±æœ‰æ¯”è¼ƒç”¨åŠ›çš„è©¦äº†ä¸€ä¸‹ï¼Œä¹Ÿå°å…¥åˆ°è‡ªå·±çš„å·¥ç¨‹æµç¨‹ä¸­ Google Cloud maintains a set of open source buildpacks for building containers to run \u003e on GKEï¼ŒAnthosï¼Œ\u0026 Cloud Run Cloud Build native support for buildpacks Cloud Run direct source deployments w/ buildpacks Cloud Shell has pack pre-installed. App Engine builds via buildpacks Cloud Functions builds via buildpacks Cloud Code deploy to Cloud Run with Buildpacks Skaffold native support for buildpacks åœ¨è·ŸåŒäº‹åˆ†äº« buildpack çš„æ™‚å€™ï¼ŒåŒäº‹è¦ºå¾—å¤ªè¤‡é›œäº†ã€‚åŒæ¨£çš„å‹•ä½œ Dockerfile æ“ä½œæ¯” buildpack ä¾†çš„å®¹æ˜“ç°¡å–®ï¼Œé‚£ç‚ºä»€éº¼é‚„éœ€è¦å°å…¥ buildpack é€™å€‹æ±è¥¿æŠŠäº‹æƒ…å¼„çš„è¤‡é›œ? ps. (å…ˆè£œå……ä¸€å€‹è¡€æ·š: åªæ‹¿åˆ°å‰äººç•™ä¸‹ä¾†çš„ container imageï¼Œæ²’æœ‰ä»»ä½• Dockerfile, å¾Œåºå†æ¬¡é–‹ç™¼åªæœ‰ä¸€å€‹æ…˜å­—ï¼Œå¦‚æœä¸€é–‹å§‹ä½¿ç”¨ buildpack å°±ä¸æœƒé‚£éº¼è¾›è‹¦) ","date":"2021-04-02","objectID":"/posts/buildpack-tips-and-tricks/:0:0","tags":["buildpacks","gcp","pack","heroku","paketo"],"title":"Buildpack Tips and Tricks","uri":"/posts/buildpack-tips-and-tricks/"},{"categories":null,"content":"Cloud Native Buildpacks Cloud Native Buildpacks transform your application source code into images that can run on any cloud. å…ˆå¾ buildpack çš„ç›®çš„ä¾†èªªï¼Œå®ƒå…¶å¯¦æ˜¯å®šç¾©äº†ä¸€å¥—å¦‚ä½•å¾ç¨‹å¼æºå§‹ç¢¼å»ºç«‹ container image çš„ buildpacks/spec: Specification for Cloud Native Buildpacks This specification defines interactions between a platform, a lifecycle, a number of buildpacks, and an application For the purpose of transforming that application into an OCI image and For the purpose of developing or executing automated tests on that application. A buildpack is software that partially or completely transforms application source code into runnable artifacts. A lifecycle is software that orchestrates buildpacks and transforms the resulting artifacts into an OCI image. A platform is software that orchestrates a lifecycle to make buildpack functionality available to end-users such as application developers. ç¸½çš„ä¾†èªªï¼Œbuildpack çš„ç›®çš„æ˜¯å»ºç«‹ä¸€å€‹é€šç”¨çš„è¦ç¯„ï¼Œ builder (Google, Heroku, Paketo) é™¤äº†å¯¦ä½œé€™å€‹è¦ç¯„ä¹‹å¤–ä¹Ÿæœƒå¢åŠ ä¸€äº›åŠŸèƒ½ä¾†æ”¯æ´è‡ªå·±çš„ç”¢å“(å¦‚ Google çš„ gcr.io/buildpacks/builder:v1 builder å°±æœ‰æ”¯æ´ Google Cloud function)ã€‚ä¸€èˆ¬çš„æƒ…æ³å°±æ˜¯é¸æ“‡ä¸€å€‹è‡ªå·±é©åˆçš„ builder ç›´æ¥ä½¿ç”¨ # Examples: pack build test_img --path apps/test-app --builder cnbs/sample-builder:bionic ç•¶æœ‰ç‰¹åˆ¥çš„éœ€æ±‚æ˜¯å¯ä»¥è‡ªå®šç¾© buildpack ä¾†å®Œæˆï¼Œä½†é–‹ç™¼è€…ä¹Ÿå¿…éœ€ä¾ç…§åŒæ¨£çš„è¦ç¯„çš„ä¾†å¯¦ä½œè‡ªå·±çš„ buildpackï¼›ä¹Ÿå› ç‚º buildpack éœ€è¦æŒ‰ç…§è¦ç¯„ä¾†å¯«ï¼Œä¸åƒ Dockerfile é€™æ¨£å¯ä»¥éš¨ä¾¿å¯«(èª¤)ï¼Œå…¥é–€æœƒæœ‰ä¸€é»é–€æª»ï¼Œä½†æ˜¯æ•ˆç›Šä¸Šæœƒé«”ç¾åœ¨å¦‚ container image çš„å®‰å…¨æ€§ï¼Œå¤§é‡ç”¢å‡º container image çš„ CI/CD æµç¨‹ä¸Š è½èµ·ä¾†å¥½åƒå¾ˆæ–¹ä¾¿åˆè¦ºå¾—é‚£é‚Šå¡å¡çš„ï¼Œæˆ‘ä¾†èªªèªªä¸€äº›å¿ƒå¾— Pros ä¸ç”¨å¯« Dcokerfile ä¸€èˆ¬çš„æƒ…æ³å¯ä»¥ç„¡æƒ±çš„ä½¿ç”¨ï¼Œå¯ä»¥æŠŠç²¾åŠ›æ”¾åœ¨å•†æ¥­é‚è¼¯ä¸Š container image çš„å®‰æ€§æ€§ç”± builder å¹«ä½ è™•ç† CI/CD æµç¨‹çš„æ•´åˆ: skaffold, cloud build, tekton éƒ½æœ‰æ”¯æ´ Cons å› ç‚ºè¦å°Šå¾ªè¦ç¯„, è‡ªå®šç¾©çš„å…¥é–€é–€æª»é‚„æ˜¯æœ‰ä¸€äº› ç„¡æƒ± build container image çœ‹ä¼¼å¾ˆç¾å¥½ï¼Œé‡åˆ° builder (Google, Heroku, Paketo) ä¸æä¾›çš„éƒ¨ä»½å°±æœƒå¾ˆé›£å—(è¸©åˆ°çš„å‘å¾Œé¢å†èªª) å¦‚æœæƒ³ build å‡º container image size å°çš„éƒ¨ä»½å¾—çœ‹ builder æœ‰æ²’æœ‰æ”¯æ´ï¼Œ(å¦‚: paketobuildpacks/builder:tiny) ","date":"2021-04-02","objectID":"/posts/buildpack-tips-and-tricks/:0:1","tags":["buildpacks","gcp","pack","heroku","paketo"],"title":"Buildpack Tips and Tricks","uri":"/posts/buildpack-tips-and-tricks/"},{"categories":null,"content":"å‘ ç¾åœ¨ä¾†è«‡è«‡æœ€è¿‘é‡åˆ°çš„å‘ï¼Œå…ˆä¾†çœ‹çœ‹ç¾åœ¨ pack å»ºè­°çš„ buildersï¼Œæœ‰ Googleã€Heroku å’Œ Paketo ä¸‰å€‹ï¼Œä½¿ç”¨è€…å¯ä»¥è·Ÿæ“šè‡ªå·±çš„éœ€æ±‚é¸æ“‡é©åˆçš„ builder pack builder suggest Suggested builders: Google: gcr.io/buildpacks/builder:v1 Ubuntu 18 base image with buildpacks for .NET, Go, Java, Node.js, and Python Heroku: heroku/buildpacks:18 Base builder for Heroku-18 stack, based on ubuntu:18.04 base image Heroku: heroku/buildpacks:20 Base builder for Heroku-20 stack, based on ubuntu:20.04 base image Paketo Buildpacks: paketobuildpacks/builder:base Ubuntu bionic base image with buildpacks for Java, .NET Core, NodeJS, Go, Ruby, NGINX and Procfile Paketo Buildpacks: paketobuildpacks/builder:full Ubuntu bionic base image with buildpacks for Java, .NET Core, NodeJS, Go, PHP, Ruby, Apache HTTPD, NGINX and Procfile Paketo Buildpacks: paketobuildpacks/builder:tiny Tiny base image (bionic build image, distroless-like run image) with buildpacks for Java Native Image and Go å‘1 paketobuildpacks/builder:tiny ç›®å‰ä¸æ”¯æŒ golang module ä¸­ä½¿ç”¨ private repo fatal: could not read Username for 'https://github.com': terminal prompts disabled Confirm the import path was entered correctly. If this is a private repository, see https://golang.org/doc/faq#git_https for additional information. ä¾æ“š Private Repository Support Â· Issue #3 Â· paketo-buildpacks/go-mod-vendor ä¸­è¨è«–çš„éƒ¨ä»½ï¼Œå¦‚æœæ˜¯ä½¿ç”¨ Golang èªè¨€ä¸” Go Module ä¸­æœ‰ä½¿ç”¨åˆ° private repo å°±æœƒé‡åˆ°æ¬Šé™ä¸è¶³çš„å•é¡Œï¼Œissues è¨è«–ä¸­ä¹Ÿè¡¨ç¤ºç›®å‰ä¸¦ä¸æ”¯æŒ private repoï¼Œä¸éæœ‰æå‡º pack å¯ä»¥ inject SSH key (ä¸éæˆ‘è‡ªå·±æ˜¯æ²’æœ‰è©¦æˆåŠŸ) é€™å€‹åªé©åˆæƒ³ç”¨ buildpack ç”¢å‡º tiny å¤§å°çš„ container image (Golang)ï¼Œä¸éå‰ææ˜¯æ²’æœ‰ä½¿ç”¨ private repo å‘2 gcr.io/buildpacks/builder:v1 gcr.io/buildpacks/gcp/run:v1 ä¸åŒ…å« /usr/share/zoneinfoï¼Œå¦‚æœ Golang ä¸­æœ‰ä½¿ç”¨åˆ° loc, _ := time.LoadLocation(\"Asia/Taipei\") æœƒå ±éŒ¯ï¼Œä¸é paketobuildpacks/builder:tiny çš„ run image æœ‰é˜¿ !!!! åœ¨æˆ‘å€‘ç”¨ gcr.io/buildpacks/builder:v1 ç”¢å‡º container image å¾ŒåŸ·è¡Œå¾Œç™¼ç¾å ±éŒ¯ï¼Œroot cause æ˜¯ container image ä¸¦ä¸åŒ…å« /usr/share/zoneinfo ç›®éŒ„å°è‡´å ±éŒ¯, pack inspect \u003ccontainer-image\u003e å¾Œå¾—çŸ¥ run image æ˜¯ gcr.io/buildpacks/gcp/run:v1ï¼Œè€Œ gcr.io/buildpacks/gcp/run:v1 æœ¬èº«å°±æ²’æœ‰åŒ…å« /usr/share/zoneinfo ç›®éŒ„ï¼Œé€™æ™‚å€™å°±å¿…éœ€æ“´å…… gcr.io/buildpacks/gcp/run:v1 ä¸­å®‰è£ tzdata FROM gcr.io/buildpacks/gcp/run:v1 USER root RUN apt-get update \u0026\u0026 apt-get install -y --no-install-recommends \\ tzdata \u0026\u0026 \\ apt-get clean \u0026\u0026 \\ rm -rf /var/lib/apt/lists/* USER cnb ç”¢å‡ºæ“´å……çš„ run image docker build -t gcr.io/retailbase-dev/ext-run:v1 -f run.Dockerfile . ç„¶å¾Œåœ¨ pack ä¸­ä»£å…¥ æ“´å……å¾Œæœ‰ run time pack build gcr.io/retailbase-dev/retailbase-organizationsvc:$SHORT_SHA --builder gcr.io/buildpacks/builder:v1 --env GOOGLE_BUILDABLE=cmd/organizationsvc/main.go --run-image gcr.io/retailbase-dev/ext-run:v1 2021/04/08 update åœ¨ç™¼ issue Include tzdata in base images Â· GoogleCloudPlatform/buildpacks@50539bf ä¹‹å¾Œï¼ŒGoogle å·²ç¶“åœ¨ base image ä¸­åŠ ä¸Šäº† tzdataï¼Œé€™æ¨£å°±ä¸éœ€è¦æ“´å…… runtime ä¾†è§£ Golang panic çš„ bugï¼Œç›´æ¥ä½¿ç”¨åŸä¾†çš„ gcr.io/buildpacks/builder:v1 å³å¯ å‘ä¸‰ gcr.io/cloud-builders/gcloud cloudbuild gcr.io/cloud-builders/gcloud ä¸­æœ‰æ•´åˆ pack çš„åƒæ•¸ï¼Œä¸éæ²’æœ‰è¾¦æ³•è¿½åŠ  runtime çš„è¨­å®šï¼Œå°±ç®—æˆ‘å€‘æ“´å……äº† run time ä¹Ÿç„¡æ³•ä»£å…¥ gcloud builds submit [[SOURCE] --no-source] [--async] [--no-cache] [--disk-size=DISK_SIZE] [--gcs-log-dir=GCS_LOG_DIR] [--gcs-source-staging-dir=GCS_SOURCE_STAGING_DIR] [--ignore-file=IGNORE_FILE] [--machine-type=MACHINE_TYPE] [--region=REGION] [--substitutions=[KEY=VALUE,...]] [--timeout=TIMEOUT] [--worker-pool=WORKER_POOL] [--config=CONFIG; default=\"cloudbuild.yaml\" | --pack=[builder=BUILDER],[env=ENV],[image=IMAGE] | --tag=TAG, -t TAG] [GCLOUD_WIDE_FLAG ...] gcr.io/cloud-builders/gcloud ä½¿ç”¨ pack çš„ç›¸é—œåƒæ•¸åªæœ‰ builder, env, åŠ image - id: pack build export name: gcr.io/cloud-builders/gcloud args: - builds - submit - --pack=builder=gcr.io/buildpacks/builder:v1,env=GOOGLE_BUILDABLE=cmd/export/main.go,image=gcr.io/retailbase-dev/retailbase-export:$SHORT_SHA æ‰€ä»¥å°±å¿…éœ€é€é GoogleCloudPlatform/cloud-builders-community: Community-contributed images for Google Cloud Build ä¸­çš„æ–¹å¼ï¼Œè‡ªè¡Œæ‰“åŒ… pack ä¾†ä½¿ç”¨ - name: gcr.io/retailbase-dev/pack:v0.18.0 args: - build - gcr.io/retailbase-dev/retailbase-export:$SHORT_SHA - --builder=gcr.io/buildpacks/builder:v1 - --env=GOOGLE_BUILDABLE=cmd/export/main.go - --run-image=gcr.io/retailbase-dev/ext-run:v1 å¦‚ä½•è‡ªå®šç¾© buildp","date":"2021-04-02","objectID":"/posts/buildpack-tips-and-tricks/:0:2","tags":["buildpacks","gcp","pack","heroku","paketo"],"title":"Buildpack Tips and Tricks","uri":"/posts/buildpack-tips-and-tricks/"},{"categories":null,"content":"Reference Cloud Native Buildpacks: Buildpack å®˜æ–¹ç¶²ç«™ GoogleCloudPlatform/buildpacks: Builders and buildpacks designed to run on Google Cloudâ€™s container platforms: Google ç‰ˆçš„ buildpack Paketo Buildpacks - Paketo Buildpacks Buildpacks | Heroku Dev Center: Heroku ç‰ˆçš„ Buildpack gcloud builds submit |Â Cloud SDK Documentation |Â Google Cloud ","date":"2021-04-02","objectID":"/posts/buildpack-tips-and-tricks/:0:3","tags":["buildpacks","gcp","pack","heroku","paketo"],"title":"Buildpack Tips and Tricks","uri":"/posts/buildpack-tips-and-tricks/"},{"categories":null,"content":"Buildpack è®“ç™¼é–‹äººå“¡å…å»äº†å¯« Dockerfile çš„ç—›è‹¦ï¼Œåœ¨ä½¿ç”¨ Cloud Run Button ä¸­å¯ä»¥é€é project.toml çš„é…ç½®ä¾†è¨­å®š buildpack åŸ·è¡Œæ™‚æœŸçš„åƒæ•¸ï¼Œåœ¨ go code é€²å…¥é»ä¸åœ¨æ ¹ç›®éŒ„ä¸­çš„ç¨‹å¼å¯ä»¥é…ç½® GOOGLE_BUILDABLE ä¾†æŒ‡å®šç¨‹å¼é€²å…¥é»ï¼Œå¿…å…å°è‡³ Container image å»ºç«‹å¤±æ•—","date":"2021-03-22","objectID":"/posts/cloud-run-button-tips/","tags":["GCP","CloudRun"],"title":"Cloud Run Button Tips","uri":"/posts/cloud-run-button-tips/"},{"categories":null,"content":"Cloud Run æœ€è¿‘ç‚ºäº†ç¯€çœ GCP æœå‹™ä¸Šçš„èŠ±è²»ï¼Œå°‡ GKE çš„ cluster çš„æ©Ÿå™¨ç­‰ç´šèª¿ä½ï¼Œç›¸å°æ‡‰çš„æ˜¯é·å‡ºéƒ¨ä»½æœå‹™åˆ° Google managed ä¸­ï¼Œä¹Ÿå› æ­¤é‡æ–°å°‡ç›®å…‰æŠ•å°„å› Cloud Run Cloud Run æ˜¯ç®—æ˜¯ Goolge Cloud Platfrom ä¸­ serverless (ä»¥ Knative æ¨™æº–æ‰“é€ ) æœå‹™çš„å…¶ä¸­ä¸€é …ï¼Œé–‹ç™¼äººå“¡æœŸæœ¬ä¸Šåªè¦æŒæ¡æ‰“åŒ… Container Image çš„æŠ€èƒ½å°±å¯ä»¥ä½¿ç”¨ Cloud Runï¼Œå¦‚æœä½ ä¸çŸ¥é“ Cloud Run å¯ä»¥ä½œä»€éº¼ï¼Œä¸‹é¢å®˜æ–¹çš„å½±ç‰‡å¯ä»¥çœ‹ä¸€ä¸‹ ","date":"2021-03-22","objectID":"/posts/cloud-run-button-tips/:1:0","tags":["GCP","CloudRun"],"title":"Cloud Run Button Tips","uri":"/posts/cloud-run-button-tips/"},{"categories":null,"content":"Container images å‰›å‰›æåˆ°é–‹ç™¼äººå“¡åªéœ€è¦æŒæ¡ Container Image æ‰“åŒ…çš„æŠ€èƒ½å°±å¯ä»¥å…¥é–€ Cloud Runã€‚è€Œæ‰“åŒ… Container Image çš„æ–¹å¼å¯ä»¥å¾ç·¨å¯« Dockerfile æˆ–ä½¿ç”¨ CNCF ä¸­ Cloud Native Buildpacks çš„æ–¹å¼å¾åŸå§‹ç¢¼æ‰“åŒ… Container imageã€‚ Google Cloud Next 20â€™ - Hands-on Keynote: Building Trust for Speedy Innovation ä¸­ä¹Ÿæœ‰å ´æ¬¡æåˆ° Google å…§éƒ¨å·²ç¶“ä½¿ç”¨ Buildpack çš„æœå‹™ Google Cloud maintains a set of open source buildpacks for building containers to run on GKEï¼ŒAnthosï¼Œ\u0026 Cloud Run Cloud Build native support for buildpacks Cloud Run direct source deployments w/ buildpacks Cloud Shell has pack pre-installed. App Engine builds via buildpacks Cloud Functions builds via buildpacks Cloud Code deploy to Cloud Run with Buildpacks Skaffold native support for buildpacks æœ€å¤§çš„å¥½è™•æ˜¯ä¸éœ€è¦ç·¨å¯« Dockerfileï¼ŒContainer ç›¸é—œçš„å®‰å…¨æ¼æ´ä¹Ÿæœƒå¹«ä½ è™•ç†å¥½ï¼Œæ›´è©³ç´°çš„éƒ¨ä»½å¯ä»¥åƒè€ƒ GoogleCloudPlatform/buildpacks: Builders and buildpacks designed to run on Google Cloudâ€™s container platforms ","date":"2021-03-22","objectID":"/posts/cloud-run-button-tips/:2:0","tags":["GCP","CloudRun"],"title":"Cloud Run Button Tips","uri":"/posts/cloud-run-button-tips/"},{"categories":null,"content":"Cloud Run Button Let anyone deploy your GitHub repos to Google Cloud Run with a single click video/cage1016_gokit-add-cloud-run.mp4 å†ä¾†ä»‹ç´¹ä»Šå¤©çš„ä¸»è§’ Cloud Run Buttonï¼Œ GoogleCloudPlatform/cloud-run-button å¯ä»¥è®“ä½ ä¸€éµéƒ¨ç½²å¯«å¥½çš„ Cloud Run Code. åŸºæœ¬çš„åŸç†å°±æ˜¯ Cloud Run Button å¹«ä½ å®Œæˆ gcloud command ä¸­ Cloud Run ç›¸é—œçš„æ“ä½œï¼Œå¾ source repo cloneï¼Œbuild container imageï¼Œåˆ°éƒ¨ç½²åˆ° Cloud Run ä¸­ï¼Œéå¸¸çš„æ–¹ä¾¿ã€‚ å†å»ºç«‹ Container image çš„éç¨‹ä¸­ä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨ Buildpack çš„æ–¹å¼ï¼Œä¹Ÿå¯ä»¥åœ¨æ ¹ç›®éŒ„ä¸­é…ç½® project.toml ä¾†è¨­å®š buildpack ç›¸é—œçš„åƒæ•¸ã€‚å¦‚ä¸‹ project.toml [[build.env]] name = \"GOOGLE_BUILDABLE\" value = \"cmd/add/main.go\" ","date":"2021-03-22","objectID":"/posts/cloud-run-button-tips/:3:0","tags":["GCP","CloudRun"],"title":"Cloud Run Button Tips","uri":"/posts/cloud-run-button-tips/"},{"categories":null,"content":"Cloud Code - Cloud Run Cloud Code - Visual Studio Marketplace å¦å¤– Cloud Code ä¹Ÿæœ‰æ”¯æ´ Cloud Run çš„æ•´åˆï¼ŒCloud Run Button æ˜¯åœ¨ Cloud shell é€é git clone çš„æ–¹å¼ä¾†ç²å–åŸå§‹ç¢¼ï¼Œå°æ–¼ç§äººå°ˆæ¡ˆå¯èƒ½æ²’æœ‰é‚£éº¼é©åˆï¼Œå°±å¯ä»¥é¸æ“‡ Cloud Code - Cloud Runï¼ŒCloud Code - Cloud Run ä¸€æ¨£æœ‰æ•´åˆ buildpackï¼ŒåŒæ¨£é©é… project.toml è¨­å®šåƒæ•¸ ","date":"2021-03-22","objectID":"/posts/cloud-run-button-tips/:3:1","tags":["GCP","CloudRun"],"title":"Cloud Run Button Tips","uri":"/posts/cloud-run-button-tips/"},{"categories":null,"content":"Demo https://github.com/cage1016/gokit-add-cloud-run ","date":"2021-03-22","objectID":"/posts/cloud-run-button-tips/:3:2","tags":["GCP","CloudRun"],"title":"Cloud Run Button Tips","uri":"/posts/cloud-run-button-tips/"},{"categories":null,"content":"å»¶çºŒä¸Šä¸€ç¯‡æ–‡ç«  Rbac1 Designï¼Œé€é Postgres Transpose Rows to Columns (crosstab) å°‡è¡Œåˆ—äº’æ›ï¼Œå¯ä»¥æ‹¿åˆ°ä¸€å€‹åŸºæ–¼æ¯ä¸€å€‹ä½¿ç”¨è€…åŸºæ–¼ RBAC resource å°æ‡‰æ“ä½œæ¬Šé™","date":"2021-02-04","objectID":"/posts/postgres-transpose-rows-to-columns/","tags":["rbac1","rbac","postgres"],"title":"Postgres Transpose Rows to Columns","uri":"/posts/postgres-transpose-rows-to-columns/"},{"categories":null,"content":"å»¶çºŒä¸Šä¸€ç¯‡æ–‡ç«  Rbac1 Design ï½œ KaiChu, æˆ‘å€‘é€é Postgres ä¸­çš„ CTE (common table expression) recursive query ä¾†æŸ¥è©¢æœ‰ç¹¼æ‰¿ Role çš„æœ‰å°æ‡‰çš„æ¬Šé™ ","date":"2021-02-04","objectID":"/posts/postgres-transpose-rows-to-columns/:0:0","tags":["rbac1","rbac","postgres"],"title":"Postgres Transpose Rows to Columns","uri":"/posts/postgres-transpose-rows-to-columns/"},{"categories":null,"content":"user_id permission user_id key 87gb8fKJHGxh2Pz_Gk_R2 create:devops 87gb8fKJHGxh2Pz_Gk_R2 create:rbac 87gb8fKJHGxh2Pz_Gk_R2 create:users 87gb8fKJHGxh2Pz_Gk_R2 delete:devops 87gb8fKJHGxh2Pz_Gk_R2 delete:rbac 87gb8fKJHGxh2Pz_Gk_R2 delete:users 87gb8fKJHGxh2Pz_Gk_R2 read:devops 87gb8fKJHGxh2Pz_Gk_R2 read:rbac 87gb8fKJHGxh2Pz_Gk_R2 read:users 87gb8fKJHGxh2Pz_Gk_R2 update:devops 87gb8fKJHGxh2Pz_Gk_R2 update:rbac 87gb8fKJHGxh2Pz_Gk_R2 update:users h8Iqlb8Ixc4IltuOoY5QC create:devops h8Iqlb8Ixc4IltuOoY5QC delete:devops h8Iqlb8Ixc4IltuOoY5QC read:devops h8Iqlb8Ixc4IltuOoY5QC update:devops SbZeBSpuy2OdJ0WZ2Z_Qo read:devops SJ36zw7nRS4lx18dZlCoo create:users SJ36zw7nRS4lx18dZlCoo delete:users SJ36zw7nRS4lx18dZlCoo read:users SJ36zw7nRS4lx18dZlCoo update:users ","date":"2021-02-04","objectID":"/posts/postgres-transpose-rows-to-columns/:0:1","tags":["rbac1","rbac","postgres"],"title":"Postgres Transpose Rows to Columns","uri":"/posts/postgres-transpose-rows-to-columns/"},{"categories":null,"content":"user vs resource permission read:R, write:C, delete:D, update:U user_id devops rbac users 87gb8fKJHGxh2Pz_Gk_R2 CDRU CDRU CDRU h8Iqlb8Ixc4IltuOoY5QC CDRU NULL NULL SbZeBSpuy2OdJ0WZ2Z_Qo R NULL NULL SJ36zw7nRS4lx18dZlCoo NULL NULL CDRU é€é postgres çš„ Transpose Rows to Columns å¯ä»¥å¾—åˆ°ä¸Šé¢ä¸€å€‹äººçœ¼æ¯”è¼ƒç›´è¦ºå¾—å¤§è¡¨ æ ¸å¿ƒçš„ sql å°±æ˜¯ä½¿ç”¨ crosstab æŒ‡ä»¤, å®Œæ•´æ“ä½œè«‹çœ‹ä¸‹æ–¹ full sql select * from crosstab( 'query order by 1', 'query distinct resource order by 1' ) as ( user_id text, \"devops\" text, \"rbac\" text, \"users\" text ) full sql create table roles ( id varchar(21) not null constraint roles_pkey primary key, parent_id varchar(21) constraint fk_roles_roles references roles, role_name text, description text, type bigint, enabled boolean, created_at timestamp with time zone, updated_at timestamp with time zone ); create table permissions ( id varchar(21) not null constraint permissions_pkey primary key, action_id text, resource_id text, key text, created_at timestamp with time zone, updated_at timestamp with time zone ); create table role_permission ( permission_id varchar(21) not null constraint fk_role_permission_permission references permissions, role_id varchar(21) not null constraint fk_role_permission_role references roles, constraint role_permission_pkey primary key (permission_id, role_id) ); create table actions ( id varchar(21) not null constraint actions_pkey primary key, name text, description text, created_at timestamp with time zone, updated_at timestamp with time zone ); create table resources ( id varchar(21) not null constraint resources_pkey primary key, name text, created_at timestamp with time zone, updated_at timestamp with time zone ); create table users ( id varchar(21) not null constraint users_pkey primary key, name text, enabled boolean, created_at timestamp with time zone, updated_at timestamp with time zone ); create table user_role ( role_id varchar(21) not null constraint fk_user_role_role references roles, user_id varchar(21) not null constraint fk_user_role_user references users, constraint user_role_pkey primary key (role_id, user_id) ); -- data INSERT INTO actions (id, name, description, created_at, updated_at) VALUES ('QPjlpxmEE7fSjeTvavn0C', 'create', 'create', '2021-01-24T10:24:17+08:00', '2021-01-24T10:24:17+08:00'); INSERT INTO actions (id, name, description, created_at, updated_at) VALUES ('2iNamDFktFA6qfz_Tk5nH', 'update', 'update', '2021-01-24T10:24:17+08:00', '2021-01-24T10:24:17+08:00'); INSERT INTO actions (id, name, description, created_at, updated_at) VALUES ('kZBX-FnIYa374wt4D5OlK', 'delete', 'delete', '2021-01-24T10:24:17+08:00', '2021-01-24T10:24:17+08:00'); INSERT INTO actions (id, name, description, created_at, updated_at) VALUES ('ozXzHwl1tDLmgIwCBjQMc', 'read', 'read', '2021-01-24T10:24:17+08:00', '2021-01-24T10:24:17+08:00'); INSERT INTO resources (id, name, created_at, updated_at) VALUES ('k4Wcq9zGqShiSH6-HmR9_', 'rbac', '2021-01-24T10:24:17+08:00', '2021-01-24T10:24:17+08:00'); INSERT INTO resources (id, name, created_at, updated_at) VALUES ('AoiiJEVfm3Fe8gtlZvE0_', 'users', '2021-01-24T10:24:17+08:00', '2021-01-24T10:24:17+08:00'); INSERT INTO resources (id, name, created_at, updated_at) VALUES ('_-0lB0FJklZQf0wMCOdb3', 'devops', '2021-01-24T10:24:17+08:00', '2021-01-24T10:24:17+08:00'); INSERT INTO permissions (id, action_id, resource_id, created_at, updated_at, key) VALUES ('7BvEdc4TA-gDOF-mfR3Wy', 'ozXzHwl1tDLmgIwCBjQMc', '_-0lB0FJklZQf0wMCOdb3', '2021-01-24T10:24:17+08:00', '2021-01-24T10:24:17+08:00', 'read:devops'); INSERT INTO permissions (id, action_id, resource_id, created_at, updated_at, key) VALUES ('4vIzJkqwRPj2vN_w4Oq88', 'QPjlpxmEE7fSjeTvavn0C', 'k4Wcq9zGqShiSH6-HmR9_', '2021-01-24T10:24:17+08:00', '2021-01-24T10:24:17+08:00', 'create:rbac'); INSERT INTO permissions (id, action_id, resource_id, created_at, updated_at, key) VALUES ('0rhMOepRtB5GPO_6xDLZ3', 'ozXzHwl1tDLmgIwCBjQMc', 'k4Wcq9zGqShiSH6-HmR9_', '2021-01-24T10:24:17+08:00', '2021-01-24T10:24:17+08:00', 'read:rbac'); INSERT INTO permissions (id,","date":"2021-02-04","objectID":"/posts/postgres-transpose-rows-to-columns/:0:2","tags":["rbac1","rbac","postgres"],"title":"Postgres Transpose Rows to Columns","uri":"/posts/postgres-transpose-rows-to-columns/"},{"categories":null,"content":"æ¬Šé™ç³»çµ±åœ¨ä»»ä½•æ‡‰ç”¨ç¨‹å¼éƒ½æ˜¯åŸºç¤ä¸”é‡è¦çš„éƒ¨ä»½ï¼Œä¸»è¦æ˜¯å°ä¸åŒçš„äººè¨ªå•è³‡æºé€²è¡Œæ¬Šé™çš„æ§åˆ¶ï¼Œæœ¬ç¯‡æ–‡ç« ä¸¦æ²’æœ‰ç‰¹åˆ¥çš„å†èªªæ˜ Role-Based Access Control, è§£é‡‹çš„æ–‡ç« å·²ç¶“å¤ªå¤šäº†ï¼Œéš¨ä¾¿ Google éƒ½æ˜¯ä¸€å †ã€‚æœ€æœŸåœ¨å…¬å¸çš„å°ˆæ¡ˆä¹Ÿæ˜¯æœ‰æ¡ç”¨ RBAC ä¾†ç®¡æ§ç³»çµ±çš„æ¬Šé™ï¼Œä¸€èˆ¬çš„ RBAC0 (æœ€åŸºæœ¬çš„ User - Role - Permission) çš„æ¨¡å‹å¤§è‡³ä¸Šå¯ä»¥ç¬¦åˆéœ€æ±‚ï¼Œä¸éåœ¨æ¬Šé™é…ç›´çš„æ™‚å€™æœƒæœ‰ä¸€é»é‡å·¥ï¼Œæ‰€ä»¥é¸æ“‡äº†æœ‰è§’è‰²ç¹¼æ‰¿çš„ RBAC1 ä¾†é€²è¡Œå¯¦ä½œ","date":"2021-01-24","objectID":"/posts/rbac1-design/","tags":["rbac1","rbac","postgres"],"title":"Rbac1 Design","uri":"/posts/rbac1-design/"},{"categories":null,"content":"æ¬Šé™ç³»çµ±åœ¨ä»»ä½•æ‡‰ç”¨ç¨‹å¼éƒ½æ˜¯åŸºç¤ä¸”é‡è¦çš„éƒ¨ä»½ï¼Œä¸»è¦æ˜¯å°ä¸åŒçš„äººè¨ªå•è³‡æºé€²è¡Œæ¬Šé™çš„æ§åˆ¶ï¼Œæœ¬ç¯‡æ–‡ç« ä¸¦æ²’æœ‰ç‰¹åˆ¥çš„å†èªªæ˜ Role-Based Access Control, è§£é‡‹çš„æ–‡ç« å·²ç¶“å¤ªå¤šäº†ï¼Œéš¨ä¾¿ Google éƒ½æ˜¯ä¸€å †ã€‚æœ€æœŸåœ¨å…¬å¸çš„å°ˆæ¡ˆä¹Ÿæ˜¯æœ‰æ¡ç”¨ RBAC ä¾†ç®¡æ§ç³»çµ±çš„æ¬Šé™ï¼Œä¸€èˆ¬çš„ RBAC0 (æœ€åŸºæœ¬çš„ User - Role - Permission) çš„æ¨¡å‹å¤§è‡³ä¸Šå¯ä»¥ç¬¦åˆéœ€æ±‚ï¼Œä¸éåœ¨æ¬Šé™é…ç›´çš„æ™‚å€™æœƒæœ‰ä¸€é»é‡å·¥ï¼Œæ‰€ä»¥é¸æ“‡äº†æœ‰è§’è‰²ç¹¼æ‰¿çš„ RBAC1 ä¾†é€²è¡Œå¯¦ä½œ RBAC1 Postgres Database Schema ","date":"2021-01-24","objectID":"/posts/rbac1-design/:0:0","tags":["rbac1","rbac","postgres"],"title":"Rbac1 Design","uri":"/posts/rbac1-design/"},{"categories":null,"content":"public.actions column comment type length default constraints values id (pk) character varying 21 NOT NULL name text description text created_at timestamp with time zone updated_at timestamp with time zone ","date":"2021-01-24","objectID":"/posts/rbac1-design/:0:1","tags":["rbac1","rbac","postgres"],"title":"Rbac1 Design","uri":"/posts/rbac1-design/"},{"categories":null,"content":"public.permissions column comment type length default constraints values id (pk) character varying 21 NOT NULL action_id text resource_id text key text created_at timestamp with time zone updated_at timestamp with time zone ","date":"2021-01-24","objectID":"/posts/rbac1-design/:0:2","tags":["rbac1","rbac","postgres"],"title":"Rbac1 Design","uri":"/posts/rbac1-design/"},{"categories":null,"content":"public.resources column comment type length default constraints values id (pk) character varying 21 NOT NULL name text created_at timestamp with time zone updated_at timestamp with time zone ","date":"2021-01-24","objectID":"/posts/rbac1-design/:0:3","tags":["rbac1","rbac","postgres"],"title":"Rbac1 Design","uri":"/posts/rbac1-design/"},{"categories":null,"content":"public.role_permission column comment type length default constraints values permission_id (pk) character varying 21 NOT NULL, permission_id role_id (pk) character varying 21 NOT NULL, role_id ","date":"2021-01-24","objectID":"/posts/rbac1-design/:0:4","tags":["rbac1","rbac","postgres"],"title":"Rbac1 Design","uri":"/posts/rbac1-design/"},{"categories":null,"content":"public.roles column comment type length default constraints values id (pk) character varying 21 NOT NULL parent_id character varying 21 parent_id role_name text description text type bigint enabled boolean created_at timestamp with time zone updated_at timestamp with time zone ","date":"2021-01-24","objectID":"/posts/rbac1-design/:0:5","tags":["rbac1","rbac","postgres"],"title":"Rbac1 Design","uri":"/posts/rbac1-design/"},{"categories":null,"content":"public.user_role column comment type length default constraints values role_id (pk) character varying 21 NOT NULL, role_id user_id (pk) character varying 21 NOT NULL, user_id ","date":"2021-01-24","objectID":"/posts/rbac1-design/:0:6","tags":["rbac1","rbac","postgres"],"title":"Rbac1 Design","uri":"/posts/rbac1-design/"},{"categories":null,"content":"public.users column comment type length default constraints values id (pk) character varying 21 NOT NULL name text enabled boolean created_at timestamp with time zone updated_at timestamp with time zone create table roles ( id varchar(21) not null constraint roles_pkey primary key, parent_id varchar(21) constraint fk_roles_roles references roles, role_name text, description text, type bigint, enabled boolean, created_at timestamp with time zone, updated_at timestamp with time zone ); create table permissions ( id varchar(21) not null constraint permissions_pkey primary key, action_id text, resource_id text, key text, created_at timestamp with time zone, updated_at timestamp with time zone ); create table role_permission ( permission_id varchar(21) not null constraint fk_role_permission_permission references permissions, role_id varchar(21) not null constraint fk_role_permission_role references roles, constraint role_permission_pkey primary key (permission_id, role_id) ); create table actions ( id varchar(21) not null constraint actions_pkey primary key, name text, description text, created_at timestamp with time zone, updated_at timestamp with time zone ); create table resources ( id varchar(21) not null constraint resources_pkey primary key, name text, created_at timestamp with time zone, updated_at timestamp with time zone ); create table users ( id varchar(21) not null constraint users_pkey primary key, name text, enabled boolean, created_at timestamp with time zone, updated_at timestamp with time zone ); create table user_role ( role_id varchar(21) not null constraint fk_user_role_role references roles, user_id varchar(21) not null constraint fk_user_role_user references users, constraint user_role_pkey primary key (role_id, user_id) ); -- data INSERT INTO public.actions (id, name, description, created_at, updated_at) VALUES ('QPjlpxmEE7fSjeTvavn0C', 'create','create', '2021-01-24T10:24:17+08:00', '2021-01-24T10:24:17+08:00'); INSERT INTO public.actions (id, name, description, created_at, updated_at) VALUES ('2iNamDFktFA6qfz_Tk5nH', 'update','update', '2021-01-24T10:24:17+08:00', '2021-01-24T10:24:17+08:00'); INSERT INTO public.actions (id, name, description, created_at, updated_at) VALUES ('kZBX-FnIYa374wt4D5OlK', 'delete','delete', '2021-01-24T10:24:17+08:00', '2021-01-24T10:24:17+08:00'); INSERT INTO public.actions (id, name, description, created_at, updated_at) VALUES ('ozXzHwl1tDLmgIwCBjQMc', 'read','read', '2021-01-24T10:24:17+08:00', '2021-01-24T10:24:17+08:00'); INSERT INTO public.resources (id, name, created_at, updated_at) VALUES ('k4Wcq9zGqShiSH6-HmR9_', 'rbac', '2021-01-24T10:24:17+08:00', '2021-01-24T10:24:17+08:00'); INSERT INTO public.resources (id, name, created_at, updated_at) VALUES ('AoiiJEVfm3Fe8gtlZvE0_', 'users', '2021-01-24T10:24:17+08:00', '2021-01-24T10:24:17+08:00'); INSERT INTO public.resources (id, name, created_at, updated_at) VALUES ('_-0lB0FJklZQf0wMCOdb3', 'devops', '2021-01-24T10:24:17+08:00', '2021-01-24T10:24:17+08:00'); INSERT INTO public.permissions (id, action_id, resource_id, created_at, updated_at, key) VALUES ('7BvEdc4TA-gDOF-mfR3Wy', 'ozXzHwl1tDLmgIwCBjQMc', '_-0lB0FJklZQf0wMCOdb3', '2021-01-24T10:24:17+08:00', '2021-01-24T10:24:17+08:00', 'read:devops'); INSERT INTO public.permissions (id, action_id, resource_id, created_at, updated_at, key) VALUES ('4vIzJkqwRPj2vN_w4Oq88', 'QPjlpxmEE7fSjeTvavn0C', 'k4Wcq9zGqShiSH6-HmR9_', '2021-01-24T10:24:17+08:00', '2021-01-24T10:24:17+08:00', 'create:rbac'); INSERT INTO public.permissions (id, action_id, resource_id, created_at, updated_at, key) VALUES ('0rhMOepRtB5GPO_6xDLZ3', 'ozXzHwl1tDLmgIwCBjQMc', 'k4Wcq9zGqShiSH6-HmR9_', '2021-01-24T10:24:17+08:00', '2021-01-24T10:24:17+08:00', 'read:rbac'); INSERT INTO public.permissions (id, action_id, resource_id, created_at, updated_at, key) VALUES ('4P3xauyVkRxinMmKPL6Lh', '2iNamDFktFA6qfz_Tk5nH', 'k4Wcq9zGqShiSH6-HmR9_', '2021-01-24T10:24:17+08:00', '2021-01-24T10:24:17+08:00', 'update:rbac'); INSE","date":"2021-01-24","objectID":"/posts/rbac1-design/:0:7","tags":["rbac1","rbac","postgres"],"title":"Rbac1 Design","uri":"/posts/rbac1-design/"},{"categories":null,"content":"DB fiddle Playground https://www.db-fiddle.com/f/4jyoMCicNSZpjMt4jFYoz5/1179 ","date":"2021-01-24","objectID":"/posts/rbac1-design/:0:8","tags":["rbac1","rbac","postgres"],"title":"Rbac1 Design","uri":"/posts/rbac1-design/"},{"categories":null,"content":"Golang ä¹Ÿå› ç‚ºé–‹æºã€ç¨‹å¼èªæ³•çš„ç°¡æ½”é–‹å§‹å—åˆ°ç¨‹å¼é–‹ç™¼äººå“¡çš„å–œå¥½ã€‚ä¹Ÿå› äº›åœ¨æ­å»ºå¾®æœå‹™æ¶æ§‹æ‡‰ç”¨ç¨‹å¼çš„æ™‚å€™æœ‰å¾ˆå¤šé¸æ“‡ï¼Œåœ¨ Web æ¡†æ¶ä¸­å°±æœ‰ Gin, Echo, Beego ç­‰ç­‰ï¼Œæ¯ä¸€å€‹ Web æ¡†æ¶éƒ½æœ‰å…¶ä¸åŒçš„ç‰¹æ€§ï¼Œè€Œ Go-Kit æ˜¯ä¸€å€‹å¾®æœå‹™é–‹ç™¼çš„å·¥å…·éˆï¼Œæœ¬å ´æ¬¡å°‡åŸºæ–¼ Kuberentes/Istio é€é Go-kit æ­å»ºå¾®æœå‹™æ¶æ§‹æ‡‰ç”¨ç¨‹å¼å¯¦æˆ°ä¸­çš„å·¥ç¨‹é …ç›®é€²è¡Œèªªæ˜","date":"2020-11-16","objectID":"/posts/gokit-engineering-operation/","tags":["gokit","kubernetes","microservices","istio","toolchain","gophercon"],"title":"GoPherCon 2020 TW: å¦‚ä½•é€é Go-kit å¿«é€Ÿæ­å»ºå¾®æœå‹™æ¶æ§‹æ‡‰ç”¨ç¨‹å¼å¯¦æˆ°","uri":"/posts/gokit-engineering-operation/"},{"categories":null,"content":" å¦‚ä½•é€é Go-kit å¿«é€Ÿæ­å»ºå¾®æœå‹™æ¶æ§‹æ‡‰ç”¨ç¨‹å¼å¯¦æˆ° åœ¨ç¬¬ä¸€å±†çš„ GopherCon TW ä¸­åˆ†äº« å¦‚ä½•é€é Go-kit å¿«é€Ÿæ­å»ºå¾®æœå‹™æ¶æ§‹æ‡‰ç”¨ç¨‹å¼å¯¦æˆ° ","date":"2020-11-16","objectID":"/posts/gokit-engineering-operation/:0:0","tags":["gokit","kubernetes","microservices","istio","toolchain","gophercon"],"title":"GoPherCon 2020 TW: å¦‚ä½•é€é Go-kit å¿«é€Ÿæ­å»ºå¾®æœå‹™æ¶æ§‹æ‡‰ç”¨ç¨‹å¼å¯¦æˆ°","uri":"/posts/gokit-engineering-operation/"},{"categories":null,"content":"Aganda Go-kit Layout Test Toolchain ç°¡å–®çš„å…§å®¹ç¸½çµã€‚ç¬¬ä¸€éƒ¨ä»½é‚„æ˜¯ç°¡å–®çš„èªªæ˜ Go-kit ä½œç‚ºä¸€å€‹å¾®æœå‹™å·¥å…·åŒ…çš„è¨­è¨ˆç†å¿µåŠå…¶ä¸­çš„æ¨¡å‹åˆ†å±¤ Service, Endpoint \u0026 Transport ï¼Œåœ¨å°å‹çš„æ‡‰ç”¨ä¸­é€²è¡Œæ¶æ§‹å¼·åˆ¶åˆ†é›¢æœƒè¦ºå¾—æœ‰ä¸€é»æŠŠå•é¡Œè¤‡é›œåŒ–ã€‚ä¸éåœ¨å¾®æœå‹™æ•¸é‡é–‹å§‹è®Šå¤šï¼Œé–‹ç™¼äººå“¡è®Šå¤šçš„ç‹€æ³ä¸‹ï¼Œæ¶æ§‹å¼·åˆ¶åˆ†é›¢å¥½è™•æ•ˆç›Šå°±æœƒå‡ºç¾ã€‚ é€²è€Œåœ¨å°å…¥ Istio Service mesh å¯ä»¥è®“ Go-kit æ ¸å¿ƒæ¦‚å¿µä¿ç•™ï¼ŒæŠŠå¾®æœå‹™çµ„ä»¶ä¸‹æ”¾è‡³ Istio ä¸­é€²è¡Œè™•ç†ï¼Œä½¿å–®ä¸€å¾®æœå‹™åªéœ€è¦å°ˆæ³¨å•†æ¥­é‚è¼¯é–‹ç™¼ Layout çš„éƒ¨ä»½å°±æ˜¯åŸºæ–¼ golang-standards/project-layout: Standard Go Project Layout é€²è¡Œä¸€äº›æª”æ¡ˆé…ç½®çš„å®‰æ’, é…åˆæ¶æ§‹å¼·åˆ¶åˆ†é›¢è®“é–‹ç™¼è€…çŸ¥é“ä»€éº¼æ±è¥¿è©²æ”¾åœ¨é‚£è£¡ Test éƒ¨ä»½ä¾ç…§ Service, Transport åˆ†åˆ¥é€²è¡Œç›¸å°æ‡‰çš„ unitestï¼Œæ¡ç”¨ table case åŠ mock æ¦‚å¿µ Toolchain å‰‡å¼·èª¿ï¼Œæ¶æ§‹å¼·åˆ¶åˆ†é›¢é…åˆç¨‹å¼ç¢¼ç”¢ç”Ÿå™¨å¯ä»¥åŠ å¿«é–‹ç™¼çš„é€Ÿåº¦ ","date":"2020-11-16","objectID":"/posts/gokit-engineering-operation/:0:1","tags":["gokit","kubernetes","microservices","istio","toolchain","gophercon"],"title":"GoPherCon 2020 TW: å¦‚ä½•é€é Go-kit å¿«é€Ÿæ­å»ºå¾®æœå‹™æ¶æ§‹æ‡‰ç”¨ç¨‹å¼å¯¦æˆ°","uri":"/posts/gokit-engineering-operation/"},{"categories":null,"content":"è£œå……è³‡æ–™ Cloud Native Buildpacks Â· Cloud Native Buildpacks æ˜¯ CNCF ä¸‹é¢çš„ä¸€å€‹å°ˆæ¡ˆï¼Œç°¡å–®ä¾†èªªå°±æ˜¯é€é container çš„æ–¹å¼ä¾†å¹«ä½ å¾åŸå§‹ç¢¼æ‰“åŒ… container image è€Œä¸éœ€è¦ç·¨å¯« Dockerfile, Google ä¹Ÿåœ¨ä»Šå¹´çš„ Cloud Next 20â€™ OnAir ä¸Šå®£ä½ˆ Cloud Build, Cloud Run, Cloud Shell, Cloud Function, Cloud Code \u0026 Skafflold éƒ½å·²ç¶“åŸç”Ÿæ”¯æ´ GoogleCloudPlatform/buildpacks Suggested builders: Google: gcr.io/buildpacks/builder:v1 Ubuntu 18 base image with buildpacks for .NET, Go, Java, Node.js, and Python Heroku: heroku/buildpacks:18 heroku-18 base image with buildpacks for Ruby, Java, Node.js, Python, Golang, \u0026 PHP Paketo Buildpacks: paketobuildpacks/builder:base Ubuntu bionic base image with buildpacks for Java, NodeJS and Golang Paketo Buildpacks: paketobuildpacks/builder:full Ubuntu bionic base image with buildpacks for Java, .NET, NodeJS, Golang, PHP, HTTPD and NGINX Paketo Buildpacks: paketobuildpacks/builder:tiny Tiny base image (bionic build image, distroless run image) with buildpacks for Golang ä¸Šé¢åˆ—å‡ºçš„æ˜¯ç›®å‰å»ºè­°çš„å¯¦ä½œ buildpack çš„ buildersï¼Œæ¯ä¸€å®¶ builder æä¾›çš„åƒæ•¸å¯èƒ½æœ‰äº›ä¸ä¸€æ¨£ï¼Œå°±è«‹å¤§å®¶åƒç…§å„åˆ¥çš„èªªæ˜æ–‡ä»¶ ","date":"2020-11-16","objectID":"/posts/gokit-engineering-operation/:0:2","tags":["gokit","kubernetes","microservices","istio","toolchain","gophercon"],"title":"GoPherCon 2020 TW: å¦‚ä½•é€é Go-kit å¿«é€Ÿæ­å»ºå¾®æœå‹™æ¶æ§‹æ‡‰ç”¨ç¨‹å¼å¯¦æˆ°","uri":"/posts/gokit-engineering-operation/"},{"categories":null,"content":"å½±ç‰‡ ","date":"2020-11-16","objectID":"/posts/gokit-engineering-operation/:0:3","tags":["gokit","kubernetes","microservices","istio","toolchain","gophercon"],"title":"GoPherCon 2020 TW: å¦‚ä½•é€é Go-kit å¿«é€Ÿæ­å»ºå¾®æœå‹™æ¶æ§‹æ‡‰ç”¨ç¨‹å¼å¯¦æˆ°","uri":"/posts/gokit-engineering-operation/"},{"categories":null,"content":"æŠ•å½±ç‰‡ https://www2.slideshare.net/cagechung/gokit-239269720 ","date":"2020-11-16","objectID":"/posts/gokit-engineering-operation/:0:4","tags":["gokit","kubernetes","microservices","istio","toolchain","gophercon"],"title":"GoPherCon 2020 TW: å¦‚ä½•é€é Go-kit å¿«é€Ÿæ­å»ºå¾®æœå‹™æ¶æ§‹æ‡‰ç”¨ç¨‹å¼å¯¦æˆ°","uri":"/posts/gokit-engineering-operation/"},{"categories":null,"content":"æŠ•å½±ç‰‡ä¸­ç›¸é—œçš„ demo cage1016/gokit-workshop Simple tutorial from http/net to Gokit skeleton cage1016/ms-demo: gokit microservice demo gokit microservice demo cage1016/gk at feature/gokitconsulk8sistio gokit toolchain ","date":"2020-11-16","objectID":"/posts/gokit-engineering-operation/:0:5","tags":["gokit","kubernetes","microservices","istio","toolchain","gophercon"],"title":"GoPherCon 2020 TW: å¦‚ä½•é€é Go-kit å¿«é€Ÿæ­å»ºå¾®æœå‹™æ¶æ§‹æ‡‰ç”¨ç¨‹å¼å¯¦æˆ°","uri":"/posts/gokit-engineering-operation/"},{"categories":null,"content":" KAI CHU CHUNG Cloud GDE GDG Cloud Taipei co-organizers ","date":"2020-11-09","objectID":"/about/:0:0","tags":null,"title":"About","uri":"/about/"},{"categories":null,"content":"Kubernetes Nginx ingress/Istio manifest for Gokit microservice demo","date":"2020-11-03","objectID":"/posts/gokit-ms-demo/","tags":["gokit","kubernetes","microservices","istio"],"title":"Gokit microservice demo","uri":"/posts/gokit-ms-demo/"},{"categories":null,"content":"å°å¼Ÿåœ¨ GDG Devfest 2019 åˆ†äº«é Build go kit microservices at kubernetes with easeï¼ŒGokit æ˜¯ä¸€å€‹å»ºç«‹ microservice çš„ toolkitï¼ŒGokit æå‡º Transport Endpoint Service ä¸‰ç¨®æ¦‚å¿µä¾†å¹«åŠ©é–‹å§‹è€…é€²è¡Œæ¶æ§‹åˆ†é›¢ï¼Œå°å–®ä¸€å¾®æœå‹™é€²è¡Œæ¶æ§‹å¼·åˆ¶åˆ†é›¢æˆ–è¨±æœƒå¢åŠ ç¨‹å¼ç¢¼çš„é–±è®€æ€§ï¼Œä¸éå°ä¸€å®šè¦æ¨¡çš„å¾®æœå‹™ä¾†èªªï¼Œä¸€è‡´æ€§çš„ç¨‹å¼æ¶æ§‹åˆ†é›¢åè€Œæœƒå¢åŠ å¤šäººé–‹ç™¼çš„æ•ˆç‡ ","date":"2020-11-03","objectID":"/posts/gokit-ms-demo/:0:0","tags":["gokit","kubernetes","microservices","istio"],"title":"Gokit microservice demo","uri":"/posts/gokit-ms-demo/"},{"categories":null,"content":"cage1016/ms-demo Service Description add Expose Sum method tictac Expose Tic/Tac method cage1016/ms-demo: gokit microservice demo æä¾›äº†ä½¿ç”¨ gokit å»ºç«‹çš„ kubernetes/istio çš„ manifest, å¯ä»¥è®“ä½¿ç”¨è€…å¿«é€Ÿçš„ç·´ç¿’åŸºæ–¼ kubernetes/istio ä¾†æ­å»º gokit å¾®æœå‹™ ","date":"2020-11-03","objectID":"/posts/gokit-ms-demo/:1:0","tags":["gokit","kubernetes","microservices","istio"],"title":"Gokit microservice demo","uri":"/posts/gokit-ms-demo/"},{"categories":null,"content":"Install Run skaffold run (first time will be slow) Set the ADD_HTTP_LB_URL/ADD_GRPC_LB_URL \u0026 TICTAC_HTTP_LB_URL/TICTAC_GRPC_LB_URL environment variable in your shell to the public IP/port of the Kubernetes loadBalancer export ADD_HTTP_LB_PORT=$(kubectl get service add-external -o jsonpath='{.spec.ports[?(@.name==\"http\")].port}') export ADD_GRPC_LB_PORT=$(kubectl get service add-external -o jsonpath='{.spec.ports[?(@.name==\"grpc\")].port}') export ADD_LB_HOST=$(kubectl get service add-external -o jsonpath='{.status.loadBalancer.ingress[0].hostname}') export ADD_HTTP_LB_URL=$ADD_LB_HOST:$ADD_HTTP_LB_PORT export ADD_GRPC_LB_URL=$ADD_LB_HOST:$ADD_GRPC_LB_PORT echo $ADD_HTTP_LB_URL echo $ADD_GRPC_LB_URL export TICTAC_HTTP_LB_PORT=$(kubectl get service tictac-external -o jsonpath='{.spec.ports[?(@.name==\"http\")].port}') export TICTAC_GRPC_LB_PORT=$(kubectl get service tictac-external -o jsonpath='{.spec.ports[?(@.name==\"grpc\")].port}') export TICTAC_LB_HOST=$(kubectl get service tictac-external -o jsonpath='{.status.loadBalancer.ingress[0].hostname}') export TICTAC_HTTP_LB_URL=$TICTAC_LB_HOST:$TICTAC_HTTP_LB_PORT export TICTAC_GRPC_LB_URL=$TICTAC_LB_HOST:$TICTAC_GRPC_LB_PORT echo $TICTAC_HTTP_LB_URL echo $TICTAC_GRPC_LB_URL Access by command sum method curl -X POST $ADD_HTTP_LB_URL/sum -d '{\"a\": 1, \"b\":1}' or grpcurl -d '{\"a\": 1, \"b\":1}' -plaintext -proto ./pb/add/add.proto $ADD_GRPC_LB_URL pb.Add.Sum tic method curl -X POST $TICTAC_HTTP_LB_URL/tic or grpcurl -plaintext -proto ./pb/tictac/tictac.proto $TICTAC_GRPC_LB_URL pb.Tictac.Tic tac method curl $TICTAC_HTTP_LB_URL/tac or grpcurl -plaintext -proto ./pb/tictac/tictac.proto $TICTAC_GRPC_LB_URL pb.Tictac.Tac Apply istio manifests kubectl apply -f deployments/istio-manifests Set the GATEWAY_HTTP_URL/GATEWAY_GRPC_URL environment variable in your shell to the public IP/port of the Istio Ingress gateway. export INGRESS_HTTP_PORT=$(kubectl -n istio-system get service istio-ingressgateway -o jsonpath='{.spec.ports[?(@.name==\"http2\")].port}') export INGRESS_GRPC_PORT=$(kubectl -n istio-system get service istio-ingressgateway -o jsonpath='{.spec.ports[?(@.name==\"https\")].port}') export INGRESS_HOST=$(kubectl -n istio-system get service istio-ingressgateway -o jsonpath='{.status.loadBalancer.ingress[0].hostname}') export GATEWAY_HTTP_URL=$INGRESS_HOST:$INGRESS_HTTP_PORT export GATEWAY_GRPC_URL=$INGRESS_HOST:$INGRESS_GRPC_PORT echo $GATEWAY_HTTP_URL echo $GATEWAY_GRPC_URL Access by command sum method curl -X POST $GATEWAY_HTTP_URL/api/v1/add/sum -d '{\"a\": 1, \"b\":1}' or grpcurl -d '{\"a\": 1, \"b\":1}' -plaintext -proto ./pb/add/add.proto $GATEWAY_GRPC_URL pb.Add.Sum tic method curl -X POST $GATEWAY_HTTP_URL/api/v1/tictac/tic or grpcurl -plaintext -proto ./pb/tictac/tictac.proto $GATEWAY_GRPC_URL pb.Tictac.Tic tac method curl $GATEWAY_HTTP_URL/api/v1/tictac/tac or grpcurl -plaintext -proto ./pb/tictac/tictac.proto $GATEWAY_GRPC_URL pb.Tictac.Tac ","date":"2020-11-03","objectID":"/posts/gokit-ms-demo/:1:1","tags":["gokit","kubernetes","microservices","istio"],"title":"Gokit microservice demo","uri":"/posts/gokit-ms-demo/"},{"categories":null,"content":"CleanUP skaffold delete or kubectl delete -f deployments/istio-manifests ","date":"2020-11-03","objectID":"/posts/gokit-ms-demo/:1:2","tags":["gokit","kubernetes","microservices","istio"],"title":"Gokit microservice demo","uri":"/posts/gokit-ms-demo/"},{"categories":null,"content":"åœ¨é›²åŸç”Ÿæ™‚ä»£ï¼ŒåŸºæ–¼ Kubernetes çš„å¾®æœå‹™æ‡‰ç”¨ç¨‹å¼æ¶æ§‹æ¨¡å¼å·²ç¶“å¿«è®ŠæˆåŸºæœ¬å‹•ä½œï¼Œæœ¬è­°ç¨‹å°‡ä»‹ç´¹å¦‚ä½•åœ¨ Kubernetes é€²è¡Œ Debug ä¾†åŠ å¿«é–‹ç™¼çš„é€Ÿåº¦","date":"2020-10-20","objectID":"/posts/devfest20-how-to-debug-microservices-on-kubernetes-as-a-pros/","tags":["devfest","microservices","debug","kubernetes"],"title":"Devfest20 How to Debug Microservices on Kubernetes as a Pros","uri":"/posts/devfest20-how-to-debug-microservices-on-kubernetes-as-a-pros/"},{"categories":null,"content":"å–œæ­¡æ‹¿ YouTube å½±ç‰‡ä¾†è£½ä½œè‡ªå·±å®¢è£½ä½œçš„ iPhone éˆ´è²ï¼Œcage1016/ios-ringtone-maker-yt container å¹«ä½ ä¸€å£æ°£å¾ä¸‹è¼‰éŸ³é »ã€è£åˆ‡ã€è½‰æª”(æ¼¸å…¥æ¼¸å‡º)ã€è¼¸å‡ºè‡³æœ¬åœ°ï¼Œå‰©ä¸‹çš„å°±æ˜¯é€é Garageband è¼¸å‡ºè‡³æ‰‹æ©Ÿå³å¯","date":"2020-06-20","objectID":"/posts/ios-ringtone-maker-from-youtube/","tags":["docker","annie","ringtone","YouTube","iOS"],"title":"iOS ringtone maker from YouTube video","uri":"/posts/ios-ringtone-maker-from-youtube/"},{"categories":null,"content":"æœ€è¿‘å¤§ç«¹å¼Ÿæ‰“é›»è©±å•èªª iOS éˆ´è²åœ¨ Garageband ä¸Šé¢è£½ä½œçš„æª”æ¡ˆæ€éº¼é€™éº¼å¤§ï¼Œå…¶å¯¦åªæœ‰ 5 ç§’çš„éˆ´è² å…ˆä¾†èªªä¸€ä¸‹ iPhone ä¸Šé…ç½®å®¢è£½çš„éˆ´è²æœ‰äºŒç¨®æ–¹å¼ iTunes Garageband ä¸Šç·¨è¼¯ç›´æ¥è¼¸å‡ºè‡³éˆ´è² ç”±æ–¼ macOS 10.15 ç‰ˆæœ¬å°±æ²’æœ‰ itunes å¯ä»¥ç”¨ï¼Œæ‰€ä»¥åŸºæœ¬ä¸Šç¶²è·¯çš„æ•™å­¸å¤§ä¹Ÿæ˜¯ç›´æ¥åœ¨ Garageband ä¸Šç›´æ¥ç·¨è¼¯å¾Œç›´æ¥è¼¸å‡ºè‡³ iPhone çš„éˆ´è² ä»¥å‰æˆ‘è‡ªå·±ä¹Ÿæ˜¯æ›éä¸å°‘éˆ´è²ï¼Œä»¥å‰æ˜¯é€é Free Ringtones for Android and iPhone. Free Ringtone Maker - Audiko é¸æ“‡å–œæ­¡çš„æª”æ¡ˆä¸‹è¼‰å®‰è£ é›–ç„¶ç¾æˆçš„å·¥å…·æ–¹ä¾¿ï¼Œä¸éæœ‰æ™‚å€™æ‰¾ä¸åˆ°è‡ªå·±å–œæ­¡çš„æ­Œæ›²ï¼Œé‚£å°±åœŸç ²ä¸€å€‹å§ ","date":"2020-06-20","objectID":"/posts/ios-ringtone-maker-from-youtube/:0:0","tags":["docker","annie","ringtone","YouTube","iOS"],"title":"iOS ringtone maker from YouTube video","uri":"/posts/ios-ringtone-maker-from-youtube/"},{"categories":null,"content":"iOS ringtone maker from YouTube video cage1016/ios-ringtone-maker-yt: iOS ringtone maker from Youtube video åŸºæœ¬ä¸Šçš„æµç¨‹ æ‰¾åˆ°å–œæ­¡çš„ YouTube vide æ‰¾åˆ°æƒ³è¦éŸ³é »çš„é–‹å§‹ç§’æ•¸ ex: 00:04:00 æ±ºå®šéˆ´è²çš„ç§’æ•¸ ex: 30 æ˜¯å¦è¦éŸ³é »æ¼¸å…¥æ¼¸å‡ºæ•ˆæœ ç›´æ¥ä¸‹ command container æœƒç›´æ¥è¼¸å‡º m4r copy è‡³ iCloud åœ¨ Garageband å¼•å…¥ m4r è¼¸å‡ºè‡³éˆ´è² æ‰“å®Œæ”¶å·¥ ","date":"2020-06-20","objectID":"/posts/ios-ringtone-maker-from-youtube/:0:1","tags":["docker","annie","ringtone","YouTube","iOS"],"title":"iOS ringtone maker from YouTube video","uri":"/posts/ios-ringtone-maker-from-youtube/"},{"categories":null,"content":"demo æ‰¾åˆ°ä¸€å€‹ YouTube å½±ç‰‡ SenÌƒorita - YouTube å¾ 22 ç§’é–‹å§‹ å…± 30 ç§’ éŸ³é »æ¼¸å…¥æ¼¸å‡ºæ•ˆæœ: fadein 3 ç§’ï¼Œ fadeout 3 ç§’ éˆ´è²ç›´æ¥è¼¸å‡ºåœ¨åŸ·è¡Œ docker è·¯å¾‘ä¸‹ ./output $ ls ./output/ Pkh8UtuejGw.m4r å‰©ä¸‹çš„å°±æ˜¯å°‡æª”æ¡ˆå‚³è‡³æ‰‹æ©Ÿï¼Œé€é Garageband è¼¸å‡ºè‡³ iPhone DONE! BTW. æœ‰æ™‚å€™å†ä¾†å¼„ UI ","date":"2020-06-20","objectID":"/posts/ios-ringtone-maker-from-youtube/:0:2","tags":["docker","annie","ringtone","YouTube","iOS"],"title":"iOS ringtone maker from YouTube video","uri":"/posts/ios-ringtone-maker-from-youtube/"},{"categories":null,"content":"é€é Google App Engine å’Œ NATS å»ºç«‹ Websocket PUBSUB ä¼ºæœå™¨","date":"2020-03-16","objectID":"/posts/gae-custom-ws/","tags":["GAE","Google compute engine","Golang","websocket","GCP","NATS","CloudBuild"],"title":"Establishing a Websocket PUBSUB server with NATS and Google App Engine","uri":"/posts/gae-custom-ws/"},{"categories":null,"content":"åœ¨è¨­è¨ˆ API server çš„æ™‚å€™æœƒæœ‰é‡åˆ°å³æ™‚è¨Šæ¯å‚³éçš„éœ€æ±‚ï¼ŒåŒæ­¥å¯ä»¥ç”¨ GRPC å»ºç«‹é€£ç·šä¾†æºé€šï¼Œç‚ºäº†é™ä½ç³»çµ±çš„è€¦åˆæ€§ï¼Œå¯ä»¥é¸æ“‡éåŒæ­¥çš„æ–¹å¼ã€‚è€Œ PubSub çµåˆ websocket æ˜¯å¸¸ç”¨çš„æ–¹å¼ã€‚å°æ–¼ä¸€ä½ Gopher ä¾†èªªï¼ŒNATS æ˜¯ CNCF ä¸‹é¢ä¸­é—œæ–¼è¨Šæ¯å‚³éçš„é–‹æºå°ˆæ¡ˆä¸”å° Golang å‹å–„(æ¯” Kafka å¥½å¤šäº† XD)ï¼Œé¸æ“‡ NATS çš„ PubSub åŠŸèƒ½æ­é… websocket å¥½åƒä¹Ÿæ˜¯ä¸€å€‹åˆç†çš„é¸æ“‡ åœ¨ Google App Engine ä¸Šæ­å»ºæ•´å€‹ç³»çµ±éœ€è¦å¹¾å€‹çŸ¥è­˜é»ï¼Œè®“æˆ‘å€‘ä¸€å€‹ä¸€å€‹ä¾†è§£é‡‹ï¼Œæœ€å¾Œæœƒé™„ä¸Šå®Œæ•´çš„ç¨‹å¼ç¢¼ Google App Engine æœ‰ä¸€å€‹å¾ˆæ£’çš„åŠŸèƒ½æ˜¯éå¸¸å®¹æ˜“çš„å»ºç«‹ serviceï¼Œæ¯ä¸€å€‹ service å¯ä»¥é¡æ¯”æˆ microserviceã€‚ç¾åœ¨å·²ç¶“æ”¯æ´äº† Python, Java, Node.js, PHP, Runy, Go ç­‰å¹¾ç¨®ç¨‹å¼èªè¨€ï¼Œä¹Ÿå¯ä»¥åœ¨ standard, flex, custom runtime (æ‰“åŒ…æˆ Docker å°±ä¸å—åˆ°ç¨‹å¼èªè¨€é™åˆ¶äº†) ä¸­é€²è¡Œæ··æ­ï¼Œæ€éº¼æ­é…å°±çœ‹é¡Œç›®é€²è¡Œé¸æ“‡ ä¸å›‰å—¦ï¼Œå…ˆçœ‹æ•´å€‹æ¶æ§‹åœ– é€™é‚Šæˆ‘å€‘æœ‰ 3 å€‹ service + 1 å€‹ Google compute engine instance default (us-central1): æ¯ä¸€å€‹ Google App Engine ä¸€å®šè¦æœ‰ä¸€å€‹ default service ä¸”è¦ç¬¬ä¸€å€‹é€²è¡Œéƒ¨ç½² add (us-central1): æ ¸çš„çš„ serviceï¼Œæä¾› 2 å€‹ APIï¼Œsum å’Œ concat ws (us-central1): é€é NATS çš„ client library + gorilla websocket ä¾†å¯¦ä½œ NATS (asia-east1-b): NATS çš„ server ","date":"2020-03-16","objectID":"/posts/gae-custom-ws/:0:0","tags":["GAE","Google compute engine","Golang","websocket","GCP","NATS","CloudBuild"],"title":"Establishing a Websocket PUBSUB server with NATS and Google App Engine","uri":"/posts/gae-custom-ws/"},{"categories":null,"content":"çŸ¥è­˜é» ","date":"2020-03-16","objectID":"/posts/gae-custom-ws/:1:0","tags":["GAE","Google compute engine","Golang","websocket","GCP","NATS","CloudBuild"],"title":"Establishing a Websocket PUBSUB server with NATS and Google App Engine","uri":"/posts/gae-custom-ws/"},{"categories":null,"content":"## Google App Engine ä¸Šå¯¦ä½œ websocket åªèƒ½ä½¿ç”¨ flex or custom runtime é€™å€‹æ˜¯ä¸€å€‹åŸºæœ¬é™åˆ¶ï¼Œå¦‚æœåœ¨ Google App Engine ä¸Šæœ‰å»ºç«‹ websocket çš„éœ€æ±‚ï¼Œåªèƒ½é¸æ“‡ flex or custom runtime. Google å®˜ç¶²æœ‰å¥½å¹¾å€‹ç¨‹å¼èªè¨€çš„ç¯„ä¾‹1 ","date":"2020-03-16","objectID":"/posts/gae-custom-ws/:1:1","tags":["GAE","Google compute engine","Golang","websocket","GCP","NATS","CloudBuild"],"title":"Establishing a Websocket PUBSUB server with NATS and Google App Engine","uri":"/posts/gae-custom-ws/"},{"categories":null,"content":"## éƒ¨è‘— NATS server ç¨æ—©æéï¼ŒNATS æ˜¯ CNCF ä¸‹é¢ä¸­é—œæ–¼è¨Šæ¯å‚³éçš„é–‹æºå°ˆæ¡ˆä¸”å¯ä»¥è¦–ç‚º cloud native (rock)ï¼Œéƒ¨ç½²ä¸€å€‹ NATS server éå¸¸ç°¡å–®ã€‚docker å°±å¯ä»¥è·‘äº†ï¼Œåœ¨ Google Cloud Platfrom ä¸Šæˆ‘å€‘å¯ä»¥é€é Cloud Deployment Manager ä¸€éµéƒ¨ç½²ä¸€å€‹ NATS Certified by Bitnami éƒ¨è‘—æˆåŠŸä¹‹å¾Œå¯ä»¥æŸ¥çœ‹åˆ°ç›¸é—œçš„è¨Šæ¯ï¼ŒåŒ…å«è¦é€£ç·šçš„å¯†ç¢¼ ","date":"2020-03-16","objectID":"/posts/gae-custom-ws/:1:2","tags":["GAE","Google compute engine","Golang","websocket","GCP","NATS","CloudBuild"],"title":"Establishing a Websocket PUBSUB server with NATS and Google App Engine","uri":"/posts/gae-custom-ws/"},{"categories":null,"content":"## Google App Engine Access NATS server via Serverless VPC ç•¶æˆ‘å€‘ä¸€é–‹å§‹å»ºç«‹ Google App Engine å°ˆæ¡ˆæ™‚æˆ‘å•æˆ‘å€‘è¦éƒ¨ç½²åœ¨ä»€éº¼ region northamerica-northeast1 (MontrÃ©al) us-central (Iowa) us-west2 (Los Angeles) us-west3 (Salt Lake City) us-east1 (South Carolina) us-east4 (Northern Virginia) southamerica-east1 (SÃ£o Paulo) europe-west (Belgium) europe-west2 (London) europe-west3 (Frankfurt) europe-west6 (ZÃ¼rich) asia-northeast1 (Tokyo) asia-northeast2 (Osaka) asia-northeast3 (Seoul) asia-east2 (Hong Kong) asia-south1 (Mumbai) australia-southeast1 (Sydney) asia ä¸­æ—¥æœ¬ï¼ŒéŸ“åœ‹ï¼Œé¦™æ¸¯éƒ½æœ‰ï¼Œå°ç£å°±æ˜¯æ²’æœ‰ï¼Œè¡¨ç¤ºå“­å“­ ç•¶æˆ‘å€‘ä½¿ç”¨ standard runtime å»ºç«‹çš„æ‡‰ç”¨ç¨‹å¼æœ‰éœ€è¦è·Ÿæˆ‘å€‘è‡ªå·±å»ºç«‹çš„ Google compute engine instance é€²è¡Œæºé€šæ™‚ï¼Œå°±å¿…éœ€é€é VPC é€²è¡Œé€£ç·šï¼Œé˜¿ä¸æ˜¯åœ¨ GCP å°ˆæ¡ˆä¸‹çš„æ©Ÿå™¨æ˜¯ç›¸é€šçš„å—ï¼Ÿ ä¸€å€‹ç°¡å–®çš„åˆ¤åˆ¥æ–¹å¼ï¼Œå¦‚æœæœå‹™å¯ä»¥è®“ä½ è¨­å®š network ç›¸é—œçš„è¨­å®šå°±æ˜¯ï¼›Google app engine standard runtime app.yaml ä¸¦æ²’æœ‰ network ç›¸é—œå¯ä»¥é…ç½®çš„è¨­å®š (flex, custom runtime ä¸­æœ‰)ã€‚è€Œåœ¨ standard runtime çš„ beta ä¸­å¯ä»¥è®“æˆ‘å€‘åœ¨ app.yaml é€éæŒ‡å®š vpc_access_connector ä¾† Configuring Serverless VPC Access å­˜å– Google compute engine2 ä¸Šç›¸é—œçš„è³‡æº ","date":"2020-03-16","objectID":"/posts/gae-custom-ws/:1:3","tags":["GAE","Google compute engine","Golang","websocket","GCP","NATS","CloudBuild"],"title":"Establishing a Websocket PUBSUB server with NATS and Google App Engine","uri":"/posts/gae-custom-ws/"},{"categories":null,"content":"## é€é cloudbuild éƒ¨ç½²æ•´å€‹ app engine application éœ€è¦çš„å•Ÿç”¨çš„ APIåŠæ¬Šé™ $ gcloud app GROUP | COMMAND [GCLOUD_WIDE_FLAG ...] éƒ¨ç½² Google app engine çš„æ–¹å¼ç‚ºä½¿ç”¨ gcloud commandï¼Œç•¶æ•¸é‡å°‘çš„æ™‚å€™å¯ä»¥æ‰‹å‹•é€²è¡Œéƒ¨ç½²ï¼Œä¸éç•¶ service æ•¸é‡å¤šæ™‚å€™ï¼Œæ‰‹å‹•éƒ¨ç½²æ˜¯å¾ˆç´¯äººçš„ï¼Œæ‰€ä»¥é€é Cloud Build å°±æ˜¯ä¸€å€‹ç°¡å–®çš„æ–¹å¼ï¼Œè¦æ³¨æ„çš„éƒ¨ä»½æ˜¯ï¼Œåœ¨ local æ™‚æ˜¯ä»¥ gcloud auth çš„èº«ä»½é€²è¡Œéƒ¨ç½²ï¼Œä¸éåœ¨ cloud build ä¸­æ˜¯é€é cloud build çš„ service account (xxx@cloudbuild.gserviceaccount.com), æ‰€ä»¥éœ€åœ¨å•Ÿç”¨ç›¸é—œçš„ API åŠé…ç½®ç›¸é—œæ‡‰çš„æ¬Šé™çµ¦ cloud build çš„ service account æ‰ä¸æœƒå ±éŒ¯ éœ€è¦ç‰¹åˆ¥å•Ÿç”¨çš„ API Cloud Build API App Engine Admin API: åœ¨ Cloud build ä¸­çš„è¨­å®šç›´æ¥ enable å°±å¥½ Serverless VPC Access API cloudbuild.yaml timeout: 1200s # 20 mins steps: - id: deploy website name: gcr.io/cloud-builders/gcloud args: - app - deploy - website/app.yaml - --version=$SHORT_SHA - --project=$PROJECT_ID - -q - id: deploy add service name: gcr.io/cloud-builders/gcloud args: - beta - app - deploy - cmd/add/app.yaml - --version=$SHORT_SHA - --project=$PROJECT_ID - -q - id: build ws name: gcr.io/cloud-builders/docker entrypoint: bash args: - -exc - | docker build --tag gcr.io/$PROJECT_ID/ws:$COMMIT_SHA --tag gcr.io/$PROJECT_ID/ws:$SHORT_SHA --file Dockerfile.ws . docker push gcr.io/$PROJECT_ID/ws:$COMMIT_SHA docker push gcr.io/$PROJECT_ID/ws:$SHORT_SHA - id: deploy ws service name: gcr.io/cloud-builders/gcloud args: - beta - app - deploy - cmd/ws/app.yaml - --version=$SHORT_SHA - --project=$PROJECT_ID - --image-url=gcr.io/$PROJECT_ID/ws:$SHORT_SHA - -q - id: deploy disptach name: gcr.io/cloud-builders/gcloud args: - app - deploy - dispatch.yaml cloud build ä¸­çš„æµç¨‹æ˜¯ deploy website: default service, golang standard runtime deploy add: add service, golang standard runtime build ws docker image and push to gcr.io deploy ws service, golang custom runtime update disptach éœ€è¦é…ç½®ä»¥ä¸‹æ¬Šé™çµ¦ cloud build service account App Engine Admin: cloud build deploy Google app engine Cloud Build Service Account: (default) Compute Network User: Access network Serverless VPC Access User: The â€œvpcaccess.connectors.useâ€ permission is required. ","date":"2020-03-16","objectID":"/posts/gae-custom-ws/:1:4","tags":["GAE","Google compute engine","Golang","websocket","GCP","NATS","CloudBuild"],"title":"Establishing a Websocket PUBSUB server with NATS and Google App Engine","uri":"/posts/gae-custom-ws/"},{"categories":null,"content":"demo Google app engine é‚„æœ‰ä¸€å€‹ä½›å¿ƒçš„éƒ¨ä»½å°±æ˜¯è‡ªå¸¶ HTTPSï¼Œæ‰€ä»¥æˆ‘å€‘å¯¦ä½œçš„ websocket entrypoint ä¹Ÿå¯å¾ ws:// ç›´æ¥è½‰æˆ wss:// (rock) ","date":"2020-03-16","objectID":"/posts/gae-custom-ws/:2:0","tags":["GAE","Google compute engine","Golang","websocket","GCP","NATS","CloudBuild"],"title":"Establishing a Websocket PUBSUB server with NATS and Google App Engine","uri":"/posts/gae-custom-ws/"},{"categories":null,"content":"repo https://github.com/cage1016/gae-custom-ws ","date":"2020-03-16","objectID":"/posts/gae-custom-ws/:3:0","tags":["GAE","Google compute engine","Golang","websocket","GCP","NATS","CloudBuild"],"title":"Establishing a Websocket PUBSUB server with NATS and Google App Engine","uri":"/posts/gae-custom-ws/"},{"categories":null,"content":"Reference Creating Persistent Connections with WebSockets, æ›ç¨‹å¼èªè¨€ä¹Ÿå°æ‡‰åˆ°ç›¸é—œçš„ç¯„ä¾‹Â â†©ï¸ ç¾åœ¨ vpc_access_connector å±¬æ–¼ betaï¼Œæ‰€ä»¥åœ¨éœ€è¦ä½¿ç”¨ gcloud beta app deploy ...Â â†©ï¸ ","date":"2020-03-16","objectID":"/posts/gae-custom-ws/:4:0","tags":["GAE","Google compute engine","Golang","websocket","GCP","NATS","CloudBuild"],"title":"Establishing a Websocket PUBSUB server with NATS and Google App Engine","uri":"/posts/gae-custom-ws/"},{"categories":null,"content":"Gokit is microservice tookit and use Service/Endpoint/Transport to strict separation of concerns design. This talk to use go-kit develop microservice application integrate with consul, zipkin, prometheus, etc service and deploy on Kubernetes ","date":"2019-12-01","objectID":"/posts/devfest19-build-go-kit-microservices-at-kubernetes-with-ease/:0:0","tags":["devfest","microservices","kubernetes","golang"],"title":"Devfest19 Build Go Kit Microservices at Kubernetes With Ease","uri":"/posts/devfest19-build-go-kit-microservices-at-kubernetes-with-ease/"},{"categories":null,"content":"skaffold v38.0 é–‹å§‹æ”¯æŒ Go container debugging supportï¼Œéå¸¸å¤§ç¨‹åº¦è§£æ±ºå…ˆå‰ remote debug golang çš„ç—›è‹¦","date":"2019-10-04","objectID":"/posts/skaffold-debug-goland/","tags":["kubernetes","skaffold","debug","golang","vscode","GoLand"],"title":"Skaffold debug goland","uri":"/posts/skaffold-debug-goland/"},{"categories":null,"content":"ä»Šå¹´çš„ Google Cloud Summit å°åŒ—å ´ æ–¼ 9/24 åœ¨å…§æ¹–è¬è±ªé…’åº—èˆ‰è¡Œï¼Œåœ¨ä¸»é¡Œæ¼”è¬›ä¸­å†æ¬¡è½åˆ° Cloud Code çš„éƒ¨ä»½ä¹Ÿçœ‹åˆ°æ¯”è¼ƒæœ‰æ„Ÿè¦ºçš„ Live demo Cloud Code éš¨é™„çš„å·¥å…·èƒ½å”åŠ©æ‚¨ä»¥è¼•é¬†å¿«é€Ÿçš„æ–¹å¼ç·¨å¯«ã€éƒ¨ç½²åŠåµéŒ¯é›²ç«¯åŸç”Ÿçš„æ‡‰ç”¨ç¨‹å¼ã€‚é€™é …ç”¢å“æä¾› Visual Studio Code å’Œ IntelliJ ç­‰ IDE çš„æ“´å……åŠŸèƒ½ï¼Œæ–¹ä¾¿æ‚¨åœ¨ Kubernetes ä¸Šé‡å°ç¨‹å¼ç¢¼å¿«é€Ÿé€²è¡Œç–Šä»£ã€åµéŒ¯åŠéƒ¨ç½²ç­‰ä½œæ¥­ã€‚ Cloud Code æ˜¯åŸºæ–¼ GoogleContainerTools/skaffold: Easy and Repeatable Kubernetes Development ç‚ºåŸºç¤ä¸Šå†æ•´åˆ Visual Studio Code å’Œ IntelliJ IDE, è®“é–‹ç™¼è€…å¯ä»¥ç›´æ¥åœ¨ IDE ä¸Šå°±å¯ä»¥å¿«é€Ÿé–‹ç™¼ Kubernetes ä¸Šçš„æ‡‰ç”¨ç¨‹å¼ åŸºæœ¬ä¸Šä¾†èªª Cloud Code çµ¦ Visual Studio Code å’Œ IntelliJ IDE çš„ plugin å°±æ˜¯åŸºæ–¼ skaffold æ‰“é€ çš„(å¦‚ä¸‹åœ–)ï¼Œç•¶ä½ åœ¨ Visual Studio Code åŸ·è¡Œ(cmd+shift+p) Cloud Code: Continues Deploy çš„ log å°±æœƒçŸ¥é“ ","date":"2019-10-04","objectID":"/posts/skaffold-debug-goland/:0:0","tags":["kubernetes","skaffold","debug","golang","vscode","GoLand"],"title":"Skaffold debug goland","uri":"/posts/skaffold-debug-goland/"},{"categories":null,"content":"Cloud Code \u0026 debug åœ¨è«‡è«‡ Skaffold debug k8s golang çš„ç¨‹å¼å‰ï¼Œå…ˆä¾†çœ‹çœ‹ç›®å‰ Cloud Code debug çš„éƒ¨ä»½æ”¯æ´å¹¾ç¨®ç¨‹å¼èªè¨€ Visual Studio Code ä¸­ Cloud code å¯ä»¥æ–°å¢çš„å°ˆæ¡ˆç¯„æœ¬ ä¾ç…§å®˜æ–¹æ–‡ä»¶ï¼Œç¾åœ¨ Cloud Code æœ‰æ•´åˆ debug çš„éƒ¨ä»½æœ‰ Node.jsã€ Pythonã€Javaã€‚ Go ç›®å‰ä¸æ”¯æ´, ä¸éåœ¨ skaffold v38.0 çš„æ™‚å€™çµ‚æ–¼åŠ é€²äº†. (Add Go container debugging support #2306)ï¼Œæ‰€ä»¥å°±æœ‰äº†é€™ä¸€ç¯‡æ–‡ç« ã€‚è‡³æ–¼æœ¬ä¾† Cloud Code å°±æœ‰æ•´åˆçš„èªè¨€å°±ä¾ç…§å®˜æ–¹çš„æ“ä½œæµç¨‹æ‡‰è©²å°±å¯ä»¥æ­£å¸¸é‹ä½œï¼Œæ‰€ä»¥é€™é‚Šå°±ä¸åœ¨èªªæ˜äº† ","date":"2019-10-04","objectID":"/posts/skaffold-debug-goland/:1:0","tags":["kubernetes","skaffold","debug","golang","vscode","GoLand"],"title":"Skaffold debug goland","uri":"/posts/skaffold-debug-goland/"},{"categories":null,"content":"Golang debug \u0026 skaffold ç•¶æˆ‘å€‘é–‹ç™¼ kubernetes æ‡‰ç”¨ç¨‹å¼(golang)æœƒæœ‰ remote debug çš„éœ€æ±‚ï¼Œåœ¨ skaffold v38.0 ç‰ˆä¹‹å‰ remote debug golang æ˜¯éœ€è¦æ¯”è¼ƒè¤‡é›œçš„æ–¹å¼(docker-compose or kubernetes)) ä¹‹å‰æˆ‘å€‘æ€éº¼é€²è¡Œ remote debug golang ç·¨è­¯ binary æ™‚éœ€è¦åŠ å…¥ github.com/derekparker/delve/cmd/dlv åŸ·è¡Œ binary æ™‚éœ€è¦å¸¶å…¥ CMD [\"/go/bin/dlv\", \"--listen=:2345\", \"--headless=true\", \"--api-version=2\", \"exec\", \"/exe\"] docker-compose \u0026 kubernetes YAML æª”éƒ½éœ€è¦åŠ å…¥é¡å¤–çš„è²æ˜(å®Œæ•´çš„ yaml ç¯„ä¾‹å¯ä»¥çœ‹ é€™) ... security_opt: - apparmor:unconfined cap_add: - SYS_PTRACE ... éœ€è¦ port forwarding dlv debug port åˆ°æœ¬æ©Ÿ é€é localhost port forwarding å°±å¯ä»¥ attach åˆ° remote çš„ golang æ­¥é©Ÿæœ‰ä¸€é»éº»ç…© ç•¶ skaffold v38.0 é–‹å§‹æ”¯æ´ container debugging supportï¼Œäº‹æƒ…å°±è®Šç°¡å–®äº† remote debug é‚„æ˜¯éœ€è¦ dlvï¼Œä¸é skaffold é€é kubernetes ä¸­çš„ initContainers çš„æ–¹å¼ä¾†å¹«æˆ‘å€‘è¼‰å…¥(Mount)ç›¸é—œçš„å¥—ä»¶(dlv/dbg)ï¼Œä¸”æœƒè‡ªå‹•è­˜åˆ¥ runtime ä¾†æ±ºå®šè¼‰å…¥çš„å¥—ä»¶ï¼Œéœ€ golang çš„éƒ¨ä»½å°±åœ¨ gcr.io/gcp-dev-tools/duct-tape/goï¼Œ(å…¶ä»–çš„ runtime å¯ç”± https://github.com/GoogleContainerTools/container-debug-support/ æŸ¥è©¢)ï¼Œä¸¦ä¸”æœƒåœ¨ metadata çš„ anootation ä¸­åŠ ä¸Š debug.cloud.google.com/config: {\"addsvc\":{\"dlv\":56268,\"runtime\":\"go\"}} remote debug é‚„æ˜¯éœ€è¦ dlv ç›¸é—œçš„å•Ÿå‹•åƒæ•¸ï¼Œskaffold æœƒè‡ªå‹•å¹«æˆ‘è¼‰å…¥ Containers: addsvc: Container ID: docker://493a405f1dc0ee462f4e5f269ae2fdb352e8468c186cbb26905c42e0bf5675cf Image: cage1016/skaffold-debug-go-demo-addsvc:88f846061af2d34e8347a6325dcf48bb638f6baa50fd4599240fa5280054048e Image ID: docker://sha256:88f846061af2d34e8347a6325dcf48bb638f6baa50fd4599240fa5280054048e Ports: 8020/TCP, 8021/TCP, 56268/TCP Host Ports: 0/TCP, 0/TCP, 0/TCP Command: /dbg/go/bin/dlv exec --headless --continue --accept-multiclient --listen=localhost:56268 --api-version=2 /exe docker-compose \u0026 kubernetes YAML ä¸éœ€è¦å†åŠ è¨»å…¶ä»–çš„è²æ˜ Cloud Code ä¸Šè·‘ skaffold debug æœƒè‡ªå‹•å¹«æˆ‘å€‘å»ºç«‹ port forwarding Cloud Code ä¸Šé€²è¡Œ deubg çš„è¨­å®šï¼Œ { \"type\": \"cloudcode\", \"language\": \"Go\", \"request\": \"attach\", \"debugPort\": 56268, \"localRoot\": \"${workspaceFolder}/go\", \"remoteRoot\": \"/go/\", \"name\": \"skaffold-debug-go-demo\", \"podSelector\": { \"app\": \"addsvc\" } } ","date":"2019-10-04","objectID":"/posts/skaffold-debug-goland/:2:0","tags":["kubernetes","skaffold","debug","golang","vscode","GoLand"],"title":"Skaffold debug goland","uri":"/posts/skaffold-debug-goland/"},{"categories":null,"content":"åƒåŠ  Global GDG Leaders Summit 2018 and Google I/O 2018 å¿ƒå¾—åˆ†äº«","date":"2018-08-20","objectID":"/posts/gdg-summit-2018-and-google-io-2018/","tags":["devfest","Google","I/O","2018","GDG","summit"],"title":"Global GDG Leaders Summit 2018 and Google I/O 2018 ç¶“é©—åˆ†äº«","uri":"/posts/gdg-summit-2018-and-google-io-2018/"},{"categories":null,"content":"è£œä½œæ¥­ èªªäº†å¥½ä¹…æƒ³å» Google I/O çµ‚æ–¼åœ¨ä»Šå¹´é”æˆã€‚ç¬¬ä¸€æ¬¡è‡ªè²»åƒåŠ  Google I/O ä¹‹å¤–ï¼Œä¹Ÿä»¥ \u001cGCPUG.TW organizer çš„èº«ä»½åƒåŠ äº†ä¸€å‰ä¸€å¤©çš„ Global GDG Leaders Summit 20181 ","date":"2018-08-20","objectID":"/posts/gdg-summit-2018-and-google-io-2018/:0:0","tags":["devfest","Google","I/O","2018","GDG","summit"],"title":"Global GDG Leaders Summit 2018 and Google I/O 2018 ç¶“é©—åˆ†äº«","uri":"/posts/gdg-summit-2018-and-google-io-2018/"},{"categories":null,"content":"Global GDG Leaders Summit 534 GDG Leads. 91 Counties, 99 WTM Leads ä»Šå¹´çš„ Global GDG Leaders Summit 2018 åœ¨ Google Event Center èˆ‰è¾¦ï¼Œç‚ºæœŸä¸€å¤©çš„æ´»å‹•æœ‰æ»¿æ»¿çš„ Sessions Growth Collaboration Devfest Organizer Team Culture Event Management Misc. 2 é™¤äº†è½è½ Session ä¹‹å¤–ï¼Œæœ€é‡è¦çš„éƒ¨ä»½å°±å±¬èªè­˜ä¾†è‡ªå…¨çƒçš„å…¶ä»– GDG æœ‹å‹ (åŠ æ‹¿å¤§ã€ä¸­åœ‹ã€é¦™æ¸¯ã€æ—¥æœ¬ã€æ¾³æ´²ã€ç´è¥¿è˜­ etcs)ã€‚ç¬¬ä¸‰å¤©æ™šä¸Šä¹ŸåƒåŠ äº† Northeast Asia and Oceania Community Summit3 ","date":"2018-08-20","objectID":"/posts/gdg-summit-2018-and-google-io-2018/:1:0","tags":["devfest","Google","I/O","2018","GDG","summit"],"title":"Global GDG Leaders Summit 2018 and Google I/O 2018 ç¶“é©—åˆ†äº«","uri":"/posts/gdg-summit-2018-and-google-io-2018/"},{"categories":null,"content":"Google I/O 2018 ä»¥å¾€çš„ Google I/O Keynote éƒ½åªèƒ½åœ¨å°ç£ç†¬å¤œè§€çœ‹(å°ç£/åŠ å·æ™‚é–“15å€‹å°æ™‚)ï¼Œé€™ä¸€æ¬¡çµ‚æ–¼åœ¨ç¾åœ¨è½ Pichai é–‹å ´(é›–ç„¶æ˜¯ç™½å¤©ï¼Œèº«é«”å¯¦éš›ä¸Šé‚„æ˜¯åœ¨ç†¬å¤œ QQ)ã€‚ç‚ºæœŸ3å¤©çš„è­°ç¨‹ï¼Œå› ç‚ºç®—æ˜¯ Google ä¸€å¹´ä¸€åº¦çš„ç§‘æŠ€å¤§æ‹œæ‹œï¼Œæ‰€ä»¥è­°ç¨‹å¹¾ä¹å«æ‹¬äº†æ‰€æœ‰çš„ç”¢å“ç·šï¼Œä¸éæˆ‘å¤§è‡³ä¸Šé‚„æ˜¯æŒ‘é¸è·Ÿ Cloud åŠæœ‰èˆˆè¶£çš„ä¸»é¡Œä¾†è½ï¼Œå¦å¤–ç¾å ´é‚„æ˜¯æœ‰è¨±å¤š Sandbox å¯ä»¥åƒè§€ Google Assistant Cloud Firebase / Flutter Android / Android TV / Google Play / Wear OS by Google Android Things / Nest AR / VR Design Accessibility Web Payments Experiments AI / Machine Learning Sandbox åªæœ‰ç¾åœ¨æ‰çœ‹çš„åˆ°ï¼Œæ‰€ä»¥é€™ç¨®æ´»å‹•æœ‰æ™‚é–“é‚„æ˜¯è¦èµ°å®Œæ¯”è¼ƒå€¼å¾—ã€‚å½±ç‰‡éƒ½æœƒæœ‰éŒ„å½±ï¼Œæ‰€ä»¥å›ä¾†é‚„æ˜¯æœ‰æ©Ÿæœƒå¯ä»¥çœ‹çš„ã€‚Google I/O Social é‚„æ˜¯éœ€è¦çš„å•¦ï¼Œèªè­˜æ–°æœ‹å‹æ˜¯ä¸€ä»¶å¾ˆæ£’çš„äº‹ Reference Global GDG Leaders Summit - HomeÂ â†©ï¸ Global GDG Leaders Summit 2018 agdendaÂ â†©ï¸ NEAO Community GatheringÂ â†©ï¸ ","date":"2018-08-20","objectID":"/posts/gdg-summit-2018-and-google-io-2018/:2:0","tags":["devfest","Google","I/O","2018","GDG","summit"],"title":"Global GDG Leaders Summit 2018 and Google I/O 2018 ç¶“é©—åˆ†äº«","uri":"/posts/gdg-summit-2018-and-google-io-2018/"},{"categories":null,"content":"åœ¨ iOS ä¸Šå¯ä»¥å¿«é€Ÿè¤‡è£½ titl åŠ url/surl çš„ recipe","date":"2018-06-14","objectID":"/posts/copy2clipboardwitheasy/","tags":["iOS","workflow","recipe"],"title":"workflow recipe -  Copy2ClipboardWithEasy","uri":"/posts/copy2clipboardwitheasy/"},{"categories":null,"content":" å°å¼Ÿä¹‹å‰åœ¨åœ¨ Chrome Extension Store ä¸Šç™¼ä½ˆäº†ä¸€å€‹ç°¡å–®çš„å°å·¥å…· copy 2 clipboard with ease - Chrome Web Store å¯ä»¥å¿«é€Ÿçš„è¤‡è£½é é¢çš„ titl/url ","date":"2018-06-14","objectID":"/posts/copy2clipboardwitheasy/:0:0","tags":["iOS","workflow","recipe"],"title":"workflow recipe -  Copy2ClipboardWithEasy","uri":"/posts/copy2clipboardwitheasy/"},{"categories":null,"content":"iOS - WorkFlow Workflows combine a bunch of steps across apps into a single tap. Collect workflows like these to save time and effort every day ä¸€å€‹å¯ä»¥åœ¨ iOS é€éæ‹–æ‹–æ‹‰æ‹‰çš„æ–¹å¼é€²è¡Œæœ‰ä¸€é»åƒå¯«ç¨‹å¼çš„æ„Ÿè¦ºä¾†çµ„åˆå„ç¨®å…ƒä»¶ä¾†é”åˆ°ä¸€äº›ç‰¹å®šçš„åŠŸèƒ½ ","date":"2018-06-14","objectID":"/posts/copy2clipboardwitheasy/:1:0","tags":["iOS","workflow","recipe"],"title":"workflow recipe -  Copy2ClipboardWithEasy","uri":"/posts/copy2clipboardwitheasy/"},{"categories":null,"content":"Copy2ClipboardWithEasy é¡ä¼¼ Chrome Extension - copy 2 clipboard with ease çš„åŠŸèƒ½ï¼Œå¯ä»¥åœ¨ iOS ä¸­é€²è¡Œ url/title çš„è¤‡è£½æ“ä½œ ","date":"2018-06-14","objectID":"/posts/copy2clipboardwitheasy/:1:1","tags":["iOS","workflow","recipe"],"title":"workflow recipe -  Copy2ClipboardWithEasy","uri":"/posts/copy2clipboardwitheasy/"},{"categories":null,"content":"Install workflow : Copy2ClipboardWithEasy ","date":"2018-06-14","objectID":"/posts/copy2clipboardwitheasy/:2:0","tags":["iOS","workflow","recipe"],"title":"workflow recipe -  Copy2ClipboardWithEasy","uri":"/posts/copy2clipboardwitheasy/"},{"categories":null,"content":"Reference copy 2 clipboard with ease - Chrome Web Store Copy2ClipboardWithEasy Workflow â€” Powerful automation made simple. ","date":"2018-06-14","objectID":"/posts/copy2clipboardwitheasy/:3:0","tags":["iOS","workflow","recipe"],"title":"workflow recipe -  Copy2ClipboardWithEasy","uri":"/posts/copy2clipboardwitheasy/"},{"categories":null,"content":"Simple demonstrate multiple way to create screenshot via phantomjs, chromeless and puppeteer and build screenshot as a service via GAE flex runtime.","date":"2017-09-09","objectID":"/posts/screenshot-as-a-service/","tags":["phantomjs","chromeless","puppeteer","GAE"],"title":"Screenshot as a Service","uri":"/posts/screenshot-as-a-service/"},{"categories":null,"content":"GCPUG Taiwan Meetup #29 Screenshot as a service cage1016/screenshot-as-a-service-demo: GCPUG Taiwan Meetup #29: screenshot as a service demo code ","date":"2017-09-09","objectID":"/posts/screenshot-as-a-service/:0:0","tags":["phantomjs","chromeless","puppeteer","GAE"],"title":"Screenshot as a Service","uri":"/posts/screenshot-as-a-service/"},{"categories":null,"content":"Waldo-gcp ä¸€å€‹åŸºæœ¬ Google Map ä¸Šè¨ˆç®—æœ€ä½³è·¯å¾‘çš„å¯¦å°æœå‹™ ç•¶åˆæœƒæƒ³å¼„ä¸€å€‹ screenshot çš„æœå‹™æ˜¯å› ç‚º slideshare: Waldo-gcp ä¸­æœƒæœ‰æ“·åœ–çš„éœ€æ±‚ï¼Œä¸”éœ€è¦è·Ÿ GAE é€²è¡Œæ•´åˆï¼Œæ‰€ä»¥é¸æ“‡äº†æ»¿å¤šäººä½¿ç”¨çš„ PhantomJS ä¾†å¯¦ä½œæ“·åœ–çš„æœå‹™ä¸¦ä½¿ç”¨ GAE flex runtime çš„å‹å¼ç™¼ä½ˆåˆ° GAE å¹³å°ä¸Šä½œç‚ºå°ˆæ¡ˆçš„ microservice ä½¿ç”¨ ","date":"2017-09-09","objectID":"/posts/screenshot-as-a-service/:0:1","tags":["phantomjs","chromeless","puppeteer","GAE"],"title":"Screenshot as a Service","uri":"/posts/screenshot-as-a-service/"},{"categories":null,"content":"Phantomjs PhantomJS is a headless WebKit scriptable with a JavaScript API. It has fast and native support for various web standards: DOM handling, CSS selector, JSON, Canvas, and SVG. http://phantomjs.org/ // yahoo.com.tw.js var page = require('webpage').create(); page.viewportSize = { width: 1440, height: 900 }; page.clipRect = { top: 0, left: 0, width: 1440, height: 900 }; page.open('http://yahoo.com.tw', function() { page.render('yahoo.com.tw.png'); phantom.exit(); }); // execute $ phantomjs yahoo.com.tw.js ","date":"2017-09-09","objectID":"/posts/screenshot-as-a-service/:0:2","tags":["phantomjs","chromeless","puppeteer","GAE"],"title":"Screenshot as a Service","uri":"/posts/screenshot-as-a-service/"},{"categories":null,"content":"chromless Chrome automation made simple. Runs locally or headless on AWS Lambda. https://github.com/graphcool/chromeless const { Chromeless } = require('chromeless') async function run() { const chromeless = new Chromeless() const screenshot = await chromeless .goto('https://www.google.com') .type('chromeless', 'input[name=\"q\"]') .press(13) .wait('#resultStats') .screenshot() console.log(screenshot) // prints local file path or S3 url await chromeless.end() } run().catch(console.error.bind(console)) ","date":"2017-09-09","objectID":"/posts/screenshot-as-a-service/:0:3","tags":["phantomjs","chromeless","puppeteer","GAE"],"title":"Screenshot as a Service","uri":"/posts/screenshot-as-a-service/"},{"categories":null,"content":"puppeteer const puppeteer = require('puppeteer'); (async () =\u003e { const browser = await puppeteer.launch(); const page = await browser.newPage(); await page.goto('https://www.google.com'); await page.screenshot({path: 'google.com.png'}); browser.close(); })(); é€™å…’èˆ‰ä¸‰å€‹ç°¡å–®çš„ä¾‹å­ä¾†èªªæ˜æ“·åœ–çš„æŠ€è¡“ï¼ŒPhantomjs, Chromeless, puppeteer, ä»¥å‰ Phantomjs å¾ˆç†±é–€ï¼Œä¸éæœ€è¿‘ chromeless ç­‰æŠ€è¡“èˆˆèµ·ï¼Œä¹Ÿæœ‰å‹å¥½çš„ API å¯ä»¥çµ¦é–‹ç™¼äººå“¡ä½¿ç”¨ã€‚GoogleChrome/puppeteer: Headless Chrome Node API æ›´æ˜¯æä¾›é«˜éš API ä¾†æ“ä½œ Headless Chrome ","date":"2017-09-09","objectID":"/posts/screenshot-as-a-service/:0:4","tags":["phantomjs","chromeless","puppeteer","GAE"],"title":"Screenshot as a Service","uri":"/posts/screenshot-as-a-service/"},{"categories":null,"content":"Screenshot as service via GAE custom runtime app.yaml runtime: custom env: flex service: screenshot ... handlers: - url: /.* script: app.js ç”±æ–¼åœ¨å…’æˆ‘å€‘ä½¿ç”¨çš„æ˜¯åŒ…äº† Express åŠ PhantomJS çš„ custome runtime ä¾†å¯¦ä½œ GAE ç‰ˆçš„ screenshot service, yaml çš„é‡é»ä¾¿æ˜¯æŒ‡å®š runtime: custom, env: flex dockerfile FROM launcher.gcr.io/google/debian8 RUN DEBIAN_FRONTEND=noninteractive apt-get update -y \u0026\u0026 apt-get install --no-install-recommends -y -q curl apt-utils build-essential ca-certificates libfreetype6 libfontconfig1 RUN echo \"deb http://http.debian.net/debian jessie-backports main\" \u003e /etc/apt/sources.list.d/backports.list \u0026\u0026 \\ apt-get update -y \u0026\u0026 \\ apt-get install -y --no-install-recommends fonts-noto fonts-noto-cjk locales-all \u0026\u0026 \\ apt-get clean \u0026\u0026 \\ apt-get autoclean \u0026\u0026 \\ apt-get autoremove \u0026\u0026 \\ rm -rf /var/lib/apt/lists/* RUN mkdir /nodejs \u0026\u0026 curl http://nodejs.org/dist/v0.12.1/node-v0.12.1-linux-x64.tar.gz | tar xvzf - -C /nodejs --strip-components=1 ENV PATH $PATH:/nodejs/bin WORKDIR /app ADD package.json /app/ RUN npm install ADD . /app ENTRYPOINT [\"/nodejs/bin/npm\", \"start\"] DockerFile çš„é‡é»å‰‡æ˜¯æº–å‚™å¥½åŸºæœ¬çš„ library åŠ Express/Phantomjs çš„é…ç½®ã€‚æº–å‚™å¥½ DockerFileï¼Œapp.yaml é‚„æœ‰ç¨‹å¼ç¢¼ï¼Œå°±å¯ä»¥é€é gcloud -q app deploy çš„æŒ‡å‘½å°‡æœå‹™æ¨åˆ° GCP ä¸Š https://waldo-gcp-testbed.appspot.com/screenshot/usage.html ","date":"2017-09-09","objectID":"/posts/screenshot-as-a-service/:0:5","tags":["phantomjs","chromeless","puppeteer","GAE"],"title":"Screenshot as a Service","uri":"/posts/screenshot-as-a-service/"},{"categories":null,"content":"ç°¡å–®è¨˜é‘ä¸€ä¸‹æœ€è¿‘åœ¨å°ˆæ¡ˆä¸Šéœ€è¦åˆ©ç”¨ go regexp ä¾†é€²è¡Œå­—ä¸²çš„æ‹†è§£","date":"2017-08-30","objectID":"/posts/go-regex-notebook/","tags":["golang","regexp"],"title":"notebook - golang regexp","uri":"/posts/go-regex-notebook/"},{"categories":null,"content":" ç°¡å–®è¨˜é‘ä¸€ä¸‹æœ€è¿‘åœ¨å°ˆæ¡ˆä¸Šéœ€è¦åˆ©ç”¨ regex ä¾†é€²è¡Œå­—ä¸²çš„æ‹†è§£ cfg:/etc/config/a.conf = 0 Build=20160331 Version = 2.2.13 Date = 2016-06-28 RC_Number = 181 Enable= Status = complete ePassword = V2@W5Q9N91N4fXGEEyL+yXOlw== Server Type = 5 Check External IP = 10 Enable = TRUE éœ€è¦å°‡å°‡ä¸Šè¿°çš„ conf æ‹†åˆ†æˆ key, valueï¼Œæ„å¤–ç™¼ç¾äº†ä¸€å€‹å¾ˆå¸¸å¥½ç”¨çš„ç¶²ç«™ Online regex tester and debugger: PHP, PCRE, Python, Golang and JavaScriptï¼Œå¯ä»¥å¾ˆå®¹æ˜“çš„åœ¨ç·šä¸Šå³æ™‚çš„é€²è¡Œæ¸¬è©¦ï¼Œæ›´æ£’çš„åœ°æ–¹æ˜¯ä»–é‚„æ˜¯å¯ä»¥ç”¢å‡ºç¨‹å¼ç¢¼ package main import ( \"regexp\" \"fmt\" ) func main() { var re = regexp.MustCompile(`([^=]*)=(.*)`) var str = `cfg:/etc/config/a.conf = 0 Build=20160331 Version = 2.2.13 Date = 2016-06-28 RC_Number = 181 Enable= Status = complete ePassword = V2@W5Q9N91N4fXGEEyL+yXOlw== Server Type = 5 Check External IP = 10 Enable = TRUEÃ…` for i, match := range re.FindAllString(str, -1) { fmt.Println(match, \"found at index\", i) } } ","date":"2017-08-30","objectID":"/posts/go-regex-notebook/:0:0","tags":["golang","regexp"],"title":"notebook - golang regexp","uri":"/posts/go-regex-notebook/"},{"categories":null,"content":"Reference StefanSchroeder/Golang-Regex-Tutorial: Golang - Regular Expression Tutorial åŸºç¡€çŸ¥è¯† - Golang ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼ - GoLove - åšå®¢å›­ Online regex tester and debugger: PHP, PCRE, Python, Golang and JavaScript ","date":"2017-08-30","objectID":"/posts/go-regex-notebook/:0:1","tags":["golang","regexp"],"title":"notebook - golang regexp","uri":"/posts/go-regex-notebook/"},{"categories":null,"content":"fetch travel distances and duration by Google Maps Distance Matrix API via Google Cloud Functions","date":"2017-08-18","objectID":"/posts/cloudfunctions-google-maps-services/","tags":["cloudfunctions","googlemaps","GCP"],"title":"CloudFunctions Google maps service","uri":"/posts/cloudfunctions-google-maps-services/"},{"categories":null,"content":"Waldo-gcp Waldo-gcp åœ¨ 2015 æ™‚ Google I/O Extended Taipei æ™‚åˆ†äº«éä¸€å€‹è¨ˆç®—æœ€ä½³è·¯å¾‘çš„å¾®æœå‹™ã€‚åœ¨æä¾›å¹¾çµ„ Google Maps ä¸Šæœ‰æ•ˆçš„åœ°å€ï¼Œé€é Google Maps Distance Matrix API ä¾†è¨ˆç®—å‡ºæ¯ä¸€å€‹é»ä¸€é»ä¹‹é–“çš„æ—…è¡Œè·é›¢åŠæ—…è¡Œæ™‚é–“ã€‚å†é€éåŸºå› æ¼”ç®—å‡ºè¨ˆç®—å‡ºå‘¨éŠä¸€åœˆæ—…è¡Œæœ€çŸ­è·¯å¾‘ # æä¾›5çµ„ Google Maps ä¸Šæœ‰æ•ˆçš„åœ°å€ å°åŒ—å¸‚å…§æ¹–å€ç‘å…‰è·¯227è™Ÿ1æ¨“, é«˜é›„å¸‚é¼“å±±å€ç¾è¡“æ±äºŒè·¯106è™Ÿ, å°å—å¸‚é•·æ¦®è·¯ä¸€æ®µ175è™Ÿ, è‡ºåŒ—å¸‚æ¾å±±å€å—äº¬æ±è·¯äº”æ®µ123å··1å¼„15è™Ÿ, é«˜é›„å¸‚äº”ç¦å››è·¯131è™Ÿ2æ¨“ # é€é Google Maps Distance Matrix API è¨ˆç®—å‡º origin, destination, distance, duration å°åŒ—å¸‚å…§æ¹–å€ç‘å…‰è·¯227è™Ÿ1æ¨“, é«˜é›„å¸‚é¼“å±±å€ç¾è¡“æ±äºŒè·¯106è™Ÿ, 352777, 13532 å°åŒ—å¸‚å…§æ¹–å€ç‘å…‰è·¯227è™Ÿ1æ¨“, å°å—å¸‚é•·æ¦®è·¯ä¸€æ®µ175è™Ÿ, 314041, 12166 å°åŒ—å¸‚å…§æ¹–å€ç‘å…‰è·¯227è™Ÿ1æ¨“, è‡ºåŒ—å¸‚æ¾å±±å€å—äº¬æ±è·¯äº”æ®µ123å··1å¼„15è™Ÿ, 5167, 783 å°åŒ—å¸‚å…§æ¹–å€ç‘å…‰è·¯227è™Ÿ1æ¨“, é«˜é›„å¸‚äº”ç¦å››è·¯131è™Ÿ2æ¨“, 356215, 14018 é«˜é›„å¸‚é¼“å±±å€ç¾è¡“æ±äºŒè·¯106è™Ÿ, å°å—å¸‚é•·æ¦®è·¯ä¸€æ®µ175è™Ÿ, 46668, 3203 é«˜é›„å¸‚é¼“å±±å€ç¾è¡“æ±äºŒè·¯106è™Ÿ, è‡ºåŒ—å¸‚æ¾å±±å€å—äº¬æ±è·¯äº”æ®µ123å··1å¼„15è™Ÿ, 355397, 14131 é«˜é›„å¸‚é¼“å±±å€ç¾è¡“æ±äºŒè·¯106è™Ÿ, é«˜é›„å¸‚äº”ç¦å››è·¯131è™Ÿ2æ¨“, 4166, 748 å°å—å¸‚é•·æ¦®è·¯ä¸€æ®µ175è™Ÿ, è‡ºåŒ—å¸‚æ¾å±±å€å—äº¬æ±è·¯äº”æ®µ123å··1å¼„15è™Ÿ, 314250, 12475 å°å—å¸‚é•·æ¦®è·¯ä¸€æ®µ175è™Ÿ, é«˜é›„å¸‚äº”ç¦å››è·¯131è™Ÿ2æ¨“, 49930, 3339 è‡ºåŒ—å¸‚æ¾å±±å€å—äº¬æ±è·¯äº”æ®µ123å··1å¼„15è™Ÿ, é«˜é›„å¸‚äº”ç¦å››è·¯131è™Ÿ2æ¨“, 359485, 14338 ","date":"2017-08-18","objectID":"/posts/cloudfunctions-google-maps-services/:0:1","tags":["cloudfunctions","googlemaps","GCP"],"title":"CloudFunctions Google maps service","uri":"/posts/cloudfunctions-google-maps-services/"},{"categories":null,"content":"CloudFunctions Google maps service Google Cloud Functions is a lightweight compute solution for developers to create single-purpose, stand-alone functions that respond to Cloud events without the need to manage a server or runtime environment - Google Cloud Functions Documentation Waldo-gcp å¾®æœå‹™ä¸­é€é flex runtime GAE Python ä¸­çš„ library(googlemaps) ä¾†å‘¼å« Google Maps Distance Matrix API. Google Function åœ¨é€™å¾ˆé©åˆå–ä»£åŸä¾† Python ç‰ˆæœ¬çš„ Google Maps Distance Matrix API. Cloud functions å¯ä»¥å»ºç«‹ Background Funtions, HTTP Functions + HTTP Triggers, Cloud Pub/Sub Triggers, Cloud Storage Triggers, Direct Triggers. æ‰€ä»¥æˆ‘å€‘å¯ä»¥å»ºç«‹ä¸€å€‹å¯ä»¥åŸ·è¡Œ Google Maps Distance Matrix API çš„ Cloud Functions, é€éèµ· HTTP Triggers, Direct Triggers å³å¯ä»¥å»ºç«‹è¨ˆç®—æ—…è¡Œè·¯å¾‘çš„è·é›¢åŠæ™‚é–“ ","date":"2017-08-18","objectID":"/posts/cloudfunctions-google-maps-services/:0:2","tags":["cloudfunctions","googlemaps","GCP"],"title":"CloudFunctions Google maps service","uri":"/posts/cloudfunctions-google-maps-services/"},{"categories":null,"content":"Getting Started Github repo: cage1016/cloudfunctions-google-maps-services # clone repo $ git git@github.com:cage1016/cloudfunctions-google-maps-services.git \u0026\u0026 cd cloudfunctions-google-maps-services # install node packages $ npm install ä¿®æ”¹ index.js ä¸­ API Key, \u003cYOUR-GCP-API-KEY\u003e, ä¸¦ç¢ºä¿ä½ çš„ GCP å°ˆæ¡ˆæœ‰å•Ÿç”¨ Google Maps Distance Matrix API const googleMapsClient = require('@google/maps').createClient({ key: '\u003cYOUR-GCP-API-KEY\u003e' }) ... ","date":"2017-08-18","objectID":"/posts/cloudfunctions-google-maps-services/:1:0","tags":["cloudfunctions","googlemaps","GCP"],"title":"CloudFunctions Google maps service","uri":"/posts/cloudfunctions-google-maps-services/"},{"categories":null,"content":"distanceMatrix background ä¿®æ”¹ makefile ä¸­ BUCKET=\u003cYOUR-GCS-BUCKET\u003e Google Cloud Storage Bucket, Bucket ç‚º Cloud Functions ä¸Šå‚³çš„ä½ç½® ä¿®æ”¹å®Œä¾åºåŸ·è¡Œå³å¯ # deploy distanceMatrix $ make deploy_backend # call distanceMatrix $ make call_backend # log distanceMatrix $ make log_backend # show description of distanceMatrix function $ make describe_backend ","date":"2017-08-18","objectID":"/posts/cloudfunctions-google-maps-services/:1:1","tags":["cloudfunctions","googlemaps","GCP"],"title":"CloudFunctions Google maps service","uri":"/posts/cloudfunctions-google-maps-services/"},{"categories":null,"content":"distanceMatrix background ä¿®æ”¹ https://\u003cYOUR_REGION\u003e-\u003cYOUR_PROJECT_ID\u003e.cloudfunctions.net/distanceMatrixHttp endpoint, endpoints å¯ç”± make deploy_http ä¸­å¾—åˆ° ä¿®æ”¹å®Œä¾åºåŸ·è¡Œå³å¯ # deploy distanceMatrixHttp $ make deploy_http # call distanceMatrixHttp $ make call_http # log distanceMatrixHttp $ make log_http # show description of distanceMatrixHttp function $ make describe_http ","date":"2017-08-18","objectID":"/posts/cloudfunctions-google-maps-services/:1:2","tags":["cloudfunctions","googlemaps","GCP"],"title":"CloudFunctions Google maps service","uri":"/posts/cloudfunctions-google-maps-services/"},{"categories":null,"content":"CloudFunctions ","date":"2017-08-18","objectID":"/posts/cloudfunctions-google-maps-services/:1:3","tags":["cloudfunctions","googlemaps","GCP"],"title":"CloudFunctions Google maps service","uri":"/posts/cloudfunctions-google-maps-services/"},{"categories":null,"content":"Reference googlemaps/google-maps-services-js: Node.js client library for Google Maps API Web Services Developerâ€™s Guide | Google Maps Distance Matrix API | Google Developers Google Cloud Functions Documentation | Cloud Functions | Google Cloud Platform ","date":"2017-08-18","objectID":"/posts/cloudfunctions-google-maps-services/:2:0","tags":["cloudfunctions","googlemaps","GCP"],"title":"CloudFunctions Google maps service","uri":"/posts/cloudfunctions-google-maps-services/"},{"categories":null,"content":"wedding endpoint Service è² è²¬æ•´å€‹å°ˆæ¡ˆæœ€é‡è¦çš„è³‡æ–™æ”¶é›†éƒ¨ä»½ï¼Œæ­¤ç¯‡å»ºç«‹ç°¡å–®çš„ç¯„ä¾‹ä¾†èªªæ˜ endpoint API çš„ä½¿ç”¨æ–¹å¼","date":"2017-07-12","objectID":"/posts/weddingcnp-via-gcp-3/","tags":["GAE","GCE","Datastore","EndpointAPI","sendgrid","API"],"title":"weddingcnp via GCP - 3. endpointAPI è¨­è¨ˆå¯¦ä½œ","uri":"/posts/weddingcnp-via-gcp-3/"},{"categories":null,"content":"æ­¤ç¯‡å°±å° Cage \u0026 Ping wedding ä¸­å¯¦ä½œå°ˆæ¡ˆä¸­æœ€ç‚ºé‡è¦çš„ backend API (endpoint API) éƒ¨ä»½é€²è¡Œç°¡å–®çš„èªªæ˜ï¼Œæ¯ä¸€å€‹ Google App Engine Service å¯¦ä½œçš„ç´°ç¯€æœƒåœ¨å¾Œåºçš„ç¯‡å¹…ä¸­ä»‹ç´¹ weddingcnp ç³»ä¾‹å‚³é€é–€ weddingcnp via GCP ç°¡ä»‹ weddingcnp via GCP - 1. å°ˆæ¡ˆæ¶æ§‹åˆ‡åˆ† weddingcnp via GCP - 2. å‰ç«¯é é¢è¨­è¨ˆå¯¦ä½œ weddingcnp via GCP - 3. endpointAPI è¨­è¨ˆå¯¦ä½œ weddingcnp å‰ç«¯ vue.js è¨­è¨ˆå¯¦ä½œ weddingcnp edm å¯„é€ sendgrid endpointAPI è¨­è¨ˆå¯¦ä½œ Cage \u0026 Ping wedding çš„ç¶²ç«™å¤§è‡³ä¸Šå¯ä»¥å€åˆ†ç‚ºéœæ…‹é é¢(frontend Service, Golang) åŠè² è²¬è³‡æ–™æ”¶é›†çš„ API (endpoints Service, Python). Google Endpoints API1 æ˜¯æ¶æ§‹åœ¨ GAE ä¸Šçš„ä¸€å€‹ RPC (remote procedure call) æœå‹™ã€‚ç”±æ–¼ endpoints API æ˜¯åŸºæ–¼ ProtoRPC remote.Service å¯¦ä½œå‡ºä¾†çš„ï¼Œæ‰€ä»¥åœ¨å¯¦ä½œæˆ‘å€‘çš„æ–¹æ³•æ™‚ä¹Ÿæ˜¯ä¾ç…§ protorpc çš„æ–¹å¼ä¾†å®šç¾©ï¼Œå°å¼Ÿåœ¨å¯« Cage \u0026 Ping wedding é€™ä¸€å€‹ç¶²ç«™çš„æ™‚å€™ Endpoints API é‚„æ˜¯ 1.0ï¼Œæ‰€ä»¥é€™ç¯‡æ–‡ç« é‚„æ˜¯ä»¥ Endpoints API 1.0 ä¾†èªªæ˜ ","date":"2017-07-12","objectID":"/posts/weddingcnp-via-gcp-3/:0:0","tags":["GAE","GCE","Datastore","EndpointAPI","sendgrid","API"],"title":"weddingcnp via GCP - 3. endpointAPI è¨­è¨ˆå¯¦ä½œ","uri":"/posts/weddingcnp-via-gcp-3/"},{"categories":null,"content":"endpoint API demo project å°å¼Ÿæˆ‘å»ºç«‹ä¸€å€‹æ¯”è¼ƒç°¡å–®çš„ç¯„ä¾‹ä¾†èªªæ˜ https://github.com/cage1016/endpoint-api-demo # git clone repo $ git clone git@github.com:cage1016/endpoint-api-demo.git # install GAE python requirement packages $ pip install -r requirements.txt -t lib Collecting arrow==0.8.0 (from -r requirements.txt (line 1)) Collecting python-dateutil (from arrow==0.8.0-\u003e-r requirements.txt (line 1)) Downloading python_dateutil-2.6.1-py2.py3-none-any.whl (194kB) 100% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 194kB 1.2MB/s Collecting six\u003e=1.5 (from python-dateutil-\u003earrow==0.8.0-\u003e-r requirements.txt (line 1)) Using cached six-1.10.0-py2.py3-none-any.whl Installing collected packages: six, python-dateutil, arrow Successfully installed arrow python-dateutil-2.2 six-1.10.0 ... # run GAE python locally $ dev_appserver.py app.yaml INFO 2017-07-12 13:30:19,063 devappserver2.py:116] Skipping SDK update check. INFO 2017-07-12 13:30:19,706 api_server.py:312] Starting API server at: http://localhost:51100 INFO 2017-07-12 13:30:19,710 dispatcher.py:226] Starting module \"default\" running at: http://localhost:8080 INFO 2017-07-12 13:30:19,711 admin_server.py:116] Starting admin server at: http://localhost:8000 # visit http://localhost:8080 å®Œå…¨ä¸Šè¿°æ­¥é©Ÿå¾Œé€éç€è¦½å™¨è¨ªå• http://localhost:8080/_ah/api/explorer å°±å¯ä»¥å¾—åˆ°åœ–ä¸€ä¸­é¡ä¼¼ Google API explorer é¢¨æ ¼çš„æœ¬åœ°æ¸¬è©¦é é¢, é€™æ˜¯ä¸€å€‹éå¸¸æ–¹ä¾¿çš„å·¥å…·ï¼Œå¯ä»¥è®“è‡ªå·±åœ¨æœ¬åœ°é€éç€è¦½å™¨ç›´æ¥æ“ä½œè‡ªå·±å®šç¾©çš„ endpointAPI å°ˆæ¡ˆæ¶æ§‹ . â”œâ”€â”€ apis // endpoint api packages â”‚Â â”œâ”€â”€ __init__.py â”‚Â â””â”€â”€ books.py â”œâ”€â”€ lib â”œâ”€â”€ app.py // ä¸»ç¨‹å¼é€²å…¥é» â”œâ”€â”€ app.yaml // GAE é…ç½®æª” â”œâ”€â”€ appengine_config.py // lib è¼‰å…¥é…ç½® â”œâ”€â”€ models.py // GAE Datastore æª” â”œâ”€â”€ requirements.txt // GAE python å¼•ç”¨è³‡æºåº« â”œâ”€â”€ settings.py // å°ˆæ¡ˆè¨­å®šæª” â””â”€â”€ utils.py // helpers function ä¸€å€‹ GAE endpoint API Service å¤§è‡³ä¸Šé€²è¡Œç°¡å–®çš„é…ç½®å¯ä»¥åŸ·è¡Œäº† app.yaml module: default runtime: python27 api_version: 1 threadsafe: yes handlers: - url: /_ah/spi/.* script: app.API secure: always libraries: - name: endpoints version: latest app.yaml é…ç½®ä¸Šçš„é‡é»ç‚ºåœ¨ handlers å€å¡ŠåŠ å…¥ /_ah/spi/.* é€™ä¸€å€‹ route ä¸¦å°‡ route å°è‡³ endpoints API server app.py import endpoints from apis import books API = endpoints.api_server([ books.BooksAPI ]) endpoints api server ç”± endpoints.api_server([]) å»ºç«‹, å…¶ä¸­çš„åƒæ•¸æ˜¯å¯¦ä½œ protorpc.remote.Service é¡åˆ¥çš„ API, ç›®å‰æˆ‘å€‘åªæœ‰å¯¦ä½œä¸€å€‹ books.BooksAPI æ‰€ä»¥åªæœ‰å¡«å…¥ä¸€å€‹ settings.py ... books_api = endpoints.api(name='dummy', version='v1', description='dummy API', allowed_client_ids=[CLIENT_ID, endpoints.API_EXPLORER_CLIENT_ID], scopes=[endpoints.EMAIL_SCOPE]) åœ¨æˆ‘å€‘å®šç¾©çš„ protorpc.remote.Service API ä¸ŠåŠ ä¸€å€‹ Decorate2 ä¾†æè¿°æˆ‘å€‘çš„ API(API åç¨±ã€ç‰ˆè™Ÿã€èªªæ˜ã€å…è¨±å‘¼å«çš„ GCP CLIENT_ID, scopes ç­‰ç­‰) @util.positional(2) def api(name, version, description=None, hostname=None, audiences=None, scopes=None, allowed_client_ids=None, canonical_name=None, auth=None, owner_domain=None, owner_name=None, package_path=None, frontend_limits=None, title=None, documentation=None, auth_level=None): api/books.py @books_api.api_class(resource_name=\"books\") class BooksAPI(remote.Service): \"\"\" Books API \"\"\" @endpoints.method(BOOKS_LIST_RESOURCE, BookForms, path=\"books\", http_method=\"GET\", name=\"list\") def listBooks(self, request): \"\"\"List books\"\"\" ... @endpoints.method(BOOKS_CREATE_RESOURCE, BookForm, path=\"books\", http_method=\"POST\", name=\"post\") def addBook(self, request): \"\"\"Add books\"\"\" ... @endpoints.method(BOOKS_DELETE_RESOURCE, BooleanMessage, path=\"books/{websafeKey}\", http_method=\"DELETE\", name=\"delete\") def deleteBook(self, request): \"\"\"Delete book\"\"\" ... @endpoints.method(BOOKS_UPDATE_RESOURCE, BookForm, path=\"books/{websafeKey}\", http_method=\"PUT\", name=\"put\") def updateBook(self, request): \"\"\"Update book\"\"\" ... åœ¨å®šç¾© resource ä¸‹çš„æ–¹æ³•æ™‚ä¾ç„¶ä½¿ç”¨ Decorate çš„æ–¹å¼ä¾†å°æ–¹æ³•é€²è¡Œè¨­ç½® (method name, path, http method, cache control, scopes, audiences, client ids and auth_level ç­‰) @util.positional(2) def method(request_message=message_types.VoidMessage, response_message=message_types.VoidMessage, name=None, path=None, http_method=â€˜POSTâ€™, cache_control=None, scopes=None, audiences=None, allowed_client_ids=None, auth_level=None): è¨­ç½®å®Œ endpointAPI çš„åŸºæœ¬æ¶æ§‹ï¼Œå‰©ä¸‹çš„éƒ¨ä»½å°±æ˜¯ GAE Python3 çš„åŸºæœ¬æ“ä½œï¼Œå®šç¾© Datastore moduleã€å° Datastore é€²è¡Œ CRUD çš„æ“ä½œã€‚æœ‰èˆˆ","date":"2017-07-12","objectID":"/posts/weddingcnp-via-gcp-3/:0:1","tags":["GAE","GCE","Datastore","EndpointAPI","sendgrid","API"],"title":"weddingcnp via GCP - 3. endpointAPI è¨­è¨ˆå¯¦ä½œ","uri":"/posts/weddingcnp-via-gcp-3/"},{"categories":null,"content":"curl é€éç€è¦½å™¨æ“ä½œéå¾Œï¼Œé€é curl æ“ä½œçš„çµæœä¹Ÿæ˜¯ä¸€æ¨£çš„ $ curl http://localhost:8080/_ah/api/dummy/v1/books { \"items\": [ { \"name\": \"Shel Silverstein\", \"title\": \"The Giving Tree\", \"websafeKey\": \"aghkZXZ-Tm9uZXIZCxIEQm9vayIPVGhlIEdpdmluZyBUcmVlDA\" }, { \"name\": \"Harper Lee\", \"title\": \"To Kill a Mockingbird\", \"websafeKey\": \"aghkZXZ-Tm9uZXIfCxIEQm9vayIVVG8gS2lsbCBhIE1vY2tpbmdiaXJkDA\" }, { \"name\": \"dfad\", \"title\": \"fdafd\", \"websafeKey\": \"aghkZXZ-Tm9uZXIPCxIEQm9vayIFZmRhZmQM\" } ] } Endpoints API 2.0 çš„ç‰ˆæœ¬å·²ç¶“å‡ºä¾†äº†ï¼Œç›¸è¼ƒæ–¼ 1.0 æ”¹è®Šæ»¿å¤§çš„ï¼ŒåŸå…ˆåƒ Google API explorer çš„éƒ¨ä»½ç”± swagger å–ä»£ï¼Œè©³ç´°çš„èªªæ˜è«‹è¦‹å®˜ç¶²Â â†©ï¸ åœ¨å®šç¾© API èªªæ˜æ™‚æœ‰äºŒç¨®æ–¹å¼ã€‚é€™é‚Šæ¡ç”¨çš„æ˜¯ @books_api.api_classï¼Œåœ¨ books_api ä¸‹å…è¨±å®šç¾©å¤šçµ„ RESTful resourceÂ â†©ï¸ go-endpoints å…¶å¯¦ go ç‰ˆçš„å¯«æ³•æ›´ç‚ºç°¡æ½”ä¸€é»Â â†©ï¸ gRPC API ServiceÂ â†©ï¸ Cloud Endpoints Frameworks for App EngineÂ â†©ï¸ ","date":"2017-07-12","objectID":"/posts/weddingcnp-via-gcp-3/:0:2","tags":["GAE","GCE","Datastore","EndpointAPI","sendgrid","API"],"title":"weddingcnp via GCP - 3. endpointAPI è¨­è¨ˆå¯¦ä½œ","uri":"/posts/weddingcnp-via-gcp-3/"},{"categories":null,"content":"weddingcnp frontend Service ä½¿ç”¨äº† GAE standard runtime æ­é… echo ç¶²é æ¡†æ¶å¯¦ä½œ","date":"2017-06-18","objectID":"/posts/weddingcnp-via-gcp-2/","tags":["GAE","GCE","Datastore","EndpointAPI","sendgrid","API"],"title":"weddingcnp via GCP - 2. å‰ç«¯é é¢è¨­è¨ˆå¯¦ä½œ","uri":"/posts/weddingcnp-via-gcp-2/"},{"categories":null,"content":"æ­¤ç¯‡å°±å° Cage \u0026 Ping wedding frontend Service ä½¿ç”¨äº† GAE standard runtime æ­é… echo ç¶²é æ¡†æ¶å¯¦ä½œä»‹ç´¹ weddingcnp ç³»ä¾‹å‚³é€é–€ weddingcnp via GCP ç°¡ä»‹ weddingcnp via GCP - 1. å°ˆæ¡ˆæ¶æ§‹åˆ‡åˆ† weddingcnp via GCP - 2. å‰ç«¯é é¢è¨­è¨ˆå¯¦ä½œ weddingcnp via GCP - 3. endpointAPI è¨­è¨ˆå¯¦ä½œ weddingcnp å‰ç«¯ vue.js è¨­è¨ˆå¯¦ä½œ weddingcnp edm å¯„é€ sendgrid weddingcnp å‰ç«¯é é¢è¨­è¨ˆå¯¦ä½œ Cage \u0026 Ping wedding frontend Service(Module) ä¸»è¦çš„åŠŸèƒ½å¦‚ä¸‹ serve éœæ…‹è³‡æº(audioã€jsã€imagesã€css)ï¼Œserve å‹•æ…‹è³‡æº(å©šç´—ç…§ç‰‡ç”± Google Cloud Storage æä¾›) æœå‹™æ•´å€‹ä¸»é«”çš„ç¶²ç«™æ¶æ§‹ä¸­æ¨¡ç‰ˆ é¦–é ä»‹ç´¹é  å©šå¦™ç›¸ç°¿é  å©šå®´åœ°é»ä»‹ç´¹å¼•å°é (è¨‚å©šã€çµå©š) å ±åé é¢(æˆ‘è¦åƒåŠ )1 éš±è—ç¶²é (æ±‚å©šå½±ç‰‡æ¶å…ˆçœ‹)ï¼Œé€£çµç”±å–œå¸–ä¸­çš„ QR code æä¾› bingo éŠæˆ² frontend Service . â”œâ”€â”€ public // static resource â”‚ â”œâ”€â”€ audio â”‚ â”œâ”€â”€ css â”‚ â”œâ”€â”€ images â”‚ â””â”€â”€ js â”œâ”€â”€ templates // html templates â”‚ â”œâ”€â”€ bingo.tmpl // bingo game â”‚ â”œâ”€â”€ chiayi.tmpl // åœ°é»å¼•å° â”‚ â”œâ”€â”€ gallery.tmpl // å©šç´—ç›¸ç°¿ â”‚ â”œâ”€â”€ greeting.tmpl // éš±è—ç¶²é ï¼Œé€£çµç”±å–œå¸–ä¸­çš„ QR code æä¾› â”‚ â”œâ”€â”€ index.tmpl â”‚ â”œâ”€â”€ layout.tmpl â”‚ â”œâ”€â”€ live.tmpl â”‚ â”œâ”€â”€ luzhu.tmpl // åœ°é»å¼•å° â”‚ â””â”€â”€ rsvp.tmpl // å ±åé é¢ â”œâ”€â”€ app-engine.go â”œâ”€â”€ app-standalone.go // Google App Engine entry point â”œâ”€â”€ app.go â”œâ”€â”€ app.yaml // frontend services yaml â”œâ”€â”€ index.yaml // index for Datastore â””â”€â”€ main.go // echo framework entry point ","date":"2017-06-18","objectID":"/posts/weddingcnp-via-gcp-2/:0:0","tags":["GAE","GCE","Datastore","EndpointAPI","sendgrid","API"],"title":"weddingcnp via GCP - 2. å‰ç«¯é é¢è¨­è¨ˆå¯¦ä½œ","uri":"/posts/weddingcnp-via-gcp-2/"},{"categories":null,"content":"Google App Engine Basic Google App Engine ç¾åœ¨æœ‰æä¾› Standard åŠ Flexible çš„ç‰ˆæœ¬ Standard: Python 2.7 Java 7 PHP 5.5 Go 1.62 Flexible: Python 2.7/3.5 Java 8 Node.js Go 1.8 Ruby PHP 5,6,7 .Net Custom Runtimes äºŒè€…æœ€å¤§çš„å·®ç•°æ˜¯ Standard runtime ç‚º Google Fully managementï¼Œæ‰€ä»¥äº«æœ‰æ¯å¤© 28 instance FREE çš„é…é¡3ï¼ŒFlexible runtime æ˜¯ä»¥ GCE çš„ instance ä¾†è·‘ï¼Œæ‰€ä»¥åŸºæœ¬ä¸Šçš„è¨ˆåƒ¹æ–¹å¼å°±æ˜¯ä»¥ GCE çš„è¨ˆç®—æ–¹å¼ï¼Œä»¥åˆ†è¨ˆè²»(æœ€å°‘æ”¶ 10 åˆ†é˜çš„éŒ¢)ï¼Œä¸”å› ç‚ºæ˜¯ GCE çš„æ–¹å¼ä¾†è·‘ï¼Œå› æ­¤å½ˆæ€§ä¸Šå°±æœƒæ¯” Standard runtime çš„ä¾†çš„å¤§ï¼Œä¸éç¼ºé»å°±æ˜¯ä¸€é–‹æ©Ÿå™¨å°±é–‹å§‹ç®—éŒ¢æƒ¹ã€‚åœ¨ weddingcnp å°ˆæ¡ˆä¸€é–‹å§‹å°±å¸Œæœ›èƒ½å¤ å°‘èŠ±ä¸€é»éŒ¢ï¼Œè©•ä¼°ä¸Š Standard runtime å°±å·²ç¶“æ»¿è¶³éœ€æ±‚ Cage \u0026 Ping wedding frontend Service(Module) é¸æ“‡ä½¿ç”¨äº† Standard runtime ä¸­ Go èªè¨€çš„å¯¦ä½œæ–¹å¼ã€‚ç”±æ–¼å‰ç«¯éœ€æ±‚ä¸¦ä¸è¤‡é›œä¸” Go å¯¦ä½œçš„æ–¹å¼è¦æ¯” Python ä¾†çš„ç°¡æ½”ï¼Œéƒ¨ç½²è‡³ Google App Engine ä¸Šçš„å°ˆæ¡ˆå¤§å°ã€è¨˜æ†¶é«”çš„è¡¨ç¾éƒ½ä¸Š Go çš„è¡¨ç¾è¦ä¾†çš„æ¯” Python ä¾†çš„è¦å¥½ï¼Œå› æ­¤é¸æ“‡äº† Go ä¾†å¯¦ä½œã€‚ å„ä½æœ‹å‹å°±ç«¯çœ‹è‡ªå·±çš„éœ€æ±‚ä¾†è©•ä¼°è¦ä½¿ç”¨é‚£ä¸€ç¨® runtime ","date":"2017-06-18","objectID":"/posts/weddingcnp-via-gcp-2/:1:0","tags":["GAE","GCE","Datastore","EndpointAPI","sendgrid","API"],"title":"weddingcnp via GCP - 2. å‰ç«¯é é¢è¨­è¨ˆå¯¦ä½œ","uri":"/posts/weddingcnp-via-gcp-2/"},{"categories":null,"content":"Google App Engine: hello example app.yaml runtime: go api_version: go1 handlers: - url: /.* script: _go_app hello.go package hello import ( \"fmt\" \"net/http\" ) func init() { http.HandleFunc(\"/\", handler) } func handler(w http.ResponseWriter, r *http.Request) { fmt.Fprint(w, \"Hello, world!\") } # start GAE server $ dev_appserver.py app.yaml INFO 2017-06-18 04:02:36,963 devappserver2.py:692] Skipping SDK update check. INFO 2017-06-18 04:02:37,519 api_server.py:272] Starting API server at: http://localhost:54584 INFO 2017-06-18 04:02:37,522 dispatcher.py:205] Starting module \"default\" running at: http://localhost:8080 INFO 2017-06-18 04:02:37,524 admin_server.py:116] Starting admin server at: http://localhost:8000 # fetch $ curl http://localhost:8080 Hello, world! ","date":"2017-06-18","objectID":"/posts/weddingcnp-via-gcp-2/:2:0","tags":["GAE","GCE","Datastore","EndpointAPI","sendgrid","API"],"title":"weddingcnp via GCP - 2. å‰ç«¯é é¢è¨­è¨ˆå¯¦ä½œ","uri":"/posts/weddingcnp-via-gcp-2/"},{"categories":null,"content":"Weddingcnp frontend Go ç”±èªè¨€ä¸­åŸç”Ÿå°±æœ‰æä¾› net/http çš„ package å¯ä»¥ä½¿ç”¨ï¼Œæ‰€ä»¥å¯ä»¥å¾ˆè¼•æ˜“çš„å»ºç«‹ä¸€å€‹ Google App Engine Go Standard çš„æ‡‰ç”¨ç¨‹å¼ï¼Œä¸é Google App Engine é‚„æ˜¯å¯ä»¥æ­é…ä½¿ç”¨å…¶ä»–çš„ç¶²é æ¡†æ¶: gin-gonic/ginã€echo ç­‰ï¼Œweddingcnp ä½¿ç”¨äº† echo é€™ä¸€å¥—è¼•é‡çš„ç¶²é æ¡†æ¶ Google App Engine Standard æ˜¯ç”± Google fully managementï¼Œå› æ­¤åœ¨ä½¿ç”¨ echo æ¡†æ¶4éœ€è¦ç‰¹åˆ¥çš„çš„èª¿æ•´ä¸€ä¸‹ app-engin.go // +build appengine package main import ( \"github.com/labstack/echo\" \"github.com/labstack/echo/engine/standard\" \"net/http\" ) func createMux() *echo.Echo { e := echo.New() // note: we don't need to provide the middleware or static handlers, that's taken care of by the platform // app engine has it's own \"main\" wrapper - we just need to hook echo into the default handler s := standard.New(\"\") s.SetHandler(e) http.Handle(\"/\", s) return e } app-standalone.go // +build !appengine,!appenginevm package main import ( \"github.com/labstack/echo\" \"github.com/labstack/echo/engine/standard\" \"github.com/labstack/echo/middleware\" ) func createMux() *echo.Echo { e := echo.New() e.Use(middleware.Recover()) e.Use(middleware.Logger()) e.Use(middleware.Gzip()) e.Use(middleware.Static(\"public\")) return e } func main() { e.Run(standard.New(\":8080\")) } app.go package main // reference our echo instance and create it early var e = createMux() main.go package main ... /** * RSVP page */ func rsvpGET(c echo.Context) error { var p = \u0026Page{} p.Name = \"slider-title-page\" p.MenuIconWhite = true r.HTML(c.Response().(*standard.Response).ResponseWriter, http.StatusOK, \"rsvp\", p) return nil } ... func init() { e.GET(\"/\", indexGET) e.GET(\"/gallery\", galleryGET) e.GET(\"/chiayi\", chiayiGET) e.GET(\"/luzhu\", luzhuGET) e.GET(\"/rsvp\", rsvpGET) e.GET(\"/greeting\", greetingGET) e.GET(\"/live\", liveGET) e.GET(\"/bingo\", bingoGet) e.GET(\"/img\", imgServe) e.SetHTTPErrorHandler(ErrorHandler) } é€é app-engine.goã€app-standalone.goã€app.goã€main.go çš„èª¿æ•´ï¼Œå°±å¯ä»¥åœ¨ Google App Engine Standard runtime ä¸Šä½¿ç”¨ echo æ¡†æ¶(ä¸éåƒ…é™ Go 1.6)ã€‚åœ¨é é¢ Render çš„éƒ¨ä»½å‰‡æ˜¯ä½¿ç”¨ github.com/unrolled/render æ¨¡ç‰ˆç³»çµ±ä¾†å»ºç½®ã€‚ç›¸ç°¿çš„ç…§ç‰‡æ˜¯æ”¾åœ¨ Google Cloud Storage é€é Image API ä¾†å–å­˜5ï¼Œå¤§è‡³ä¸Šéƒ½æ˜¯å¾ˆå–®ç´”çš„é é¢ æ­¤ç¯‡å¤§è‡³ä¸Šèªªæ˜ Cage \u0026 Ping wedding frontend Service(Module) å¯¦ä½œçš„æ–¹å¼ã€‚æ¯”è¼ƒå¯æƒœçš„æ˜¯ç›®å‰ Go ä¸»è¦çš„ç‰ˆæœ¬å·²ç¶“åˆ° 1.8.3, 1.9 Beta ä¹Ÿå…¬ä½ˆäº†ï¼Œè€Œ Google App Engine Standard runtime åªæœ‰æ”¯æ´ Go 1.6 (1.8 æ‡‰è©²å¿«è¦æ”¯æ´), ç•¶ Google App Engine Standard runtime æ”¯æ´ Go 1.8 æ™‚æ‰æœƒæœ‰æ¯”è¼ƒå¤šçš„æ¡†æ¶ä¾†æ­é…ï¼Œç›®å‰å°±ä½¿ç”¨å®¹æ˜“æ€§ä¾†èªªé‚„æ˜¯ Flexible runtime è¼ƒå¥½ å ±åé é¢å¯¦ä½œç´°ç¯€æœƒå†å¾Œåºçš„ç¯‡å¹…èªªæ˜Â â†©ï¸ Google App Engine Standard æ”¯æ´ 1.8 çš„ç‰ˆæœ¬æ‡‰è©²å¿«äº†(1.9 Beta éƒ½å‡ºä¾†äº† XD)Â â†©ï¸ Google App Engine Standard äº«æœ‰ä¸€äº›å…è²»çš„é…é¡ï¼Œç´°é …è«‹çœ‹ QuotasÂ â†©ï¸ Google App Engine Recipe | Echo - High performance, minimalist Go web framework, ç”±æ–¼ GAE ç›®å‰åªæœ‰æ”¯æŒ Go 1.6ï¼Œä¸” Go 1.7 ä»¥å¾Œå°‡ context æ”¹ç‚ºå…§å»º packageï¼Œä¸€äº›ä¾è³´çš„ package ä¹Ÿè·Ÿè‘—å‡ç´šäº†ï¼Œæ‰€ä»¥ç›®å‰å»ºè­°ä½¿ç”¨ Flexible æœƒæ¯”è¼ƒç°¡å–®Â â†©ï¸ GAE go Image API for GCS Â· Kaichu.ioÂ â†©ï¸ ","date":"2017-06-18","objectID":"/posts/weddingcnp-via-gcp-2/:3:0","tags":["GAE","GCE","Datastore","EndpointAPI","sendgrid","API"],"title":"weddingcnp via GCP - 2. å‰ç«¯é é¢è¨­è¨ˆå¯¦ä½œ","uri":"/posts/weddingcnp-via-gcp-2/"},{"categories":null,"content":"weddingcnp ä½¿ç”¨ dispatch.yaml ä¾†é€²è¡Œå°ˆæ¡ˆæ¶æ§‹ä¸Šçš„åˆ‡åˆ†ï¼Œåˆ©ç”¨ makefile ä¾†åŠ é€Ÿéƒ¨ç½²çš„æµç¨‹ã€é€Ÿåº¦","date":"2017-06-12","objectID":"/posts/weddingcnp-via-gcp-1/","tags":["GAE","GCE","Datastore","EndpointAPI","sendgrid","API"],"title":"weddingcnp via GCP - 1. å°ˆæ¡ˆæ¶æ§‹åˆ‡åˆ†","uri":"/posts/weddingcnp-via-gcp-1/"},{"categories":null,"content":"æ­¤ç¯‡å°±å° Cage \u0026 Ping wedding ä¸­å¯¦ä½œçš„å°ˆæ¡ˆæ¶æ§‹é€²è¡Œç°¡å–®çš„èªªæ˜ï¼Œæ¯ä¸€å€‹ Google App Engine Service å¯¦ä½œçš„ç´°ç¯€æœƒåœ¨å¾Œåºçš„ç¯‡å¹…ä¸­ä»‹ç´¹ weddingcnp ç³»ä¾‹å‚³é€é–€ weddingcnp via GCP ç°¡ä»‹ weddingcnp via GCP - 1. å°ˆæ¡ˆæ¶æ§‹åˆ‡åˆ† weddingcnp via GCP - 2. å‰ç«¯é é¢è¨­è¨ˆå¯¦ä½œ weddingcnp via GCP - 3. endpointAPI è¨­è¨ˆå¯¦ä½œ weddingcnp å‰ç«¯ vue.js è¨­è¨ˆå¯¦ä½œ weddingcnp edm å¯„é€ sendgrid weddingcnp å°ˆæ¡ˆæ¶æ§‹ Cage \u0026 Ping wedding å®Œå…¨æ¶æ§‹åœ¨ Google App Engine ä¸Šï¼Œå†åŠŸèƒ½ä»»å‹™ä¸Šéœ€è¦é”åˆ°å¹¾å€‹è¦æ±‚ æœå‹™éœæ…‹é é¢, ä¸€å †çš„ html/css/javascript åŠäº›è¨±çš„å‹•æ…‹è³‡æ–™ ä½œç‚º API çš„ä¼ºæœå™¨ï¼Œæ”¶é›†å‰ç«¯è¡¨å–®é€éä¾†çš„è³‡æ–™ä¸¦å„²å­˜è‡³ Datastore ä¸­ webmasters domain owner project structure . â”œâ”€â”€ endpoints // endpoints instance â”‚Â â”œâ”€â”€ apis â”‚Â â”œâ”€â”€ handler â”‚Â â”œâ”€â”€ lib â”‚Â â”œâ”€â”€ app.py â”‚Â â”œâ”€â”€ app.pyc â”‚Â â”œâ”€â”€ app.yaml â”‚Â â””â”€â”€ ... â”œâ”€â”€ frontend // frontend instance â”‚Â â”œâ”€â”€ public // å…¬é–‹è³‡æº â”‚Â â”‚Â â”œâ”€â”€ audio // éŸ³æ¨‚æª” â”‚Â â”‚Â â”œâ”€â”€ css // éœæ…‹ç¶²é ç”¨ css â”‚Â â”‚Â â”œâ”€â”€ images // éœæ…‹ç¶²é ç”¨ image â”‚Â â”‚Â â””â”€â”€ js // éœæ…‹ç¶²é ç”¨ javascript â”‚Â â”œâ”€â”€ templates // golang æ¨¡ç‰ˆ â”‚Â â”‚Â â”œâ”€â”€ bingo.tmpl â”‚Â â”‚Â â”œâ”€â”€ ..... â”‚Â â”‚Â â””â”€â”€ rsvp.tmpl â”‚Â â”œâ”€â”€ app-engine.go â”‚Â â”œâ”€â”€ app-standalone.go â”‚Â â”œâ”€â”€ app.go â”‚Â â”œâ”€â”€ app.yaml â”‚Â â”œâ”€â”€ index.yaml â”‚Â â””â”€â”€ main.go â”œâ”€â”€ ownership // webmaster instance â”‚Â â”œâ”€â”€ app.yaml â”‚Â â””â”€â”€ googleae8f4bcce8bec00c.html â”œâ”€â”€ dispatch.yaml // dispatch.yaml â””â”€â”€ makefile // cli helper makefile æ•´å€‹å°ˆæ¡ˆçš„æª”æ¡ˆæ¶æ§‹å¦‚ä¸Šï¼Œå¯ä»¥åˆ†ç‚º endpointsã€frontendã€ownership ä¸‰å€‹ Service(Module), è€Œ Google App Engine å¯ä»¥éå¸¸æœ‰å½ˆæ€§çš„é€é Service1 çš„æ–¹å¼é‡å°ä¸åŒçš„ä»»å‹™çµ¦äºˆä¸åŒè³‡æº2ï¼Œè€Œ Cage \u0026 Ping wedding åŸºæœ¬ä¸Šä½¿ç”¨é è¨ˆçš„éƒ¨ä»½å°±è¶³å¤ äº†ï¼Œä¸éœ€ç‰¹åˆ¥æŒ‡æ´¾ dispatch.yaml dispatch: - url: \"*/_ah/spi/*\" module: default - url: \"*/tasks/*\" module: default - url: \"*/favicon.ico\" module: frontend - url: \"*/googleae8f4bcce8bec00c.html\" module: ownership - url: \"*/*\" module: frontend ä¸Šè¿°çš„ dispatch.yaml å¯ä»¥å¹«æˆ‘å€‘é‡å°æµé‡è‡³æˆ‘å€‘è¨­å®šçš„ Service(Module)ï¼Œä¸éåœ¨éƒ¨ç½²çš„éƒ¨ä»½å‰‡æ˜¯éœ€è¦ä¸€å€‹ä¸€å€‹ Service(Module)ä¾†é€²è¡Œéƒ¨ç½²ï¼Œéƒ¨ç½²å®Œä¹‹å¾Œæœƒåœ¨ Google App Engine Services ä¸­çœ‹åˆ°æ‰€æœ‰çš„ Services å†å‰‡æˆ‘å€‘å¯ä»¥é€é version3 çš„æ–¹å¼ä¾†ç®¡ç†éƒ¨ç½²çš„ Service ç•¶ Google App Engine Service åˆ‡åˆ†çš„è¶Šç´°ï¼Œé›–ç„¶å¯ä»¥ä»»å‹™çš„è³‡æºçµ¦äºˆæ›´ç´°çš„èª¿æ•´ï¼Œä¸éå»ä¹Ÿé€ æˆéƒ¨ç½²ä¸Šçš„è¤‡é›œåº¦ï¼Œå› æ­¤å¯ä»¥é€é mikefile ä¾†åŠ é€Ÿéƒ¨ç½²çš„æµç¨‹èˆ‡é€Ÿåº¦ makefile ACCOUNT = cage.chung@gmail.com PROJECT = weddingcnp VERSION = b7484dd NODE_BIN = $(shell npm bin) set_config: gcloud config set account $(ACCOUNT) gcloud config set project $(PROJECT) install: # endpoints dependency pakcage pip install -r endpoints/requirements.txt -t endpoints/lib run: # node devServer.js \u0026 #goapp serve dispatch.yaml frontend/app.yaml endpoints/app.yaml ownership/app.yaml dev_appserver.py dispatch.yaml frontend/app.yaml endpoints/app.yaml ownership/app.yaml --appidentity_email_address=save-avatar@weddingcnp.iam.gserviceaccount.com --appidentity_private_key_path=/Users/cage/.gvm/pkgsets/go1.7/global/src/github.com/cage1016/weddingcnp/endpoints/weddingcnp-3a652c96507d.pem --skip_sdk_update_check=yes --host 0.0.0.0 --enable_sendmail=yes update_frontend: goapp deploy -application $(PROJECT) -version $(VERSION) frontend/app.yaml update_endpoints: goapp deploy -application $(PROJECT) -version $(VERSION) endpoints/app.yaml update_ownership: appcfg.py update --application=$(PROJECT) --version=1 ownership/app.yaml update_dispatch: appcfg.py --application=$(PROJECT) --version=$(VERSION) update_dispatch . update_index: appcfg.py --application=$(PROJECT) --version=$(VERSION) update_indexes endpoints update_queue: appcfg.py --application=$(PROJECT) --version=$(VERSION) update_queues endpoints update: update_frontend update_endpoints update_ownership update_dispatch update_index update_queue Service == Module, ä»¥å‰çš„åå­å«ä½œ Module, å¾Œä¾†æ”¹åç‚º Serviceï¼Œé€é dispatch.yaml ä¾†æŒ‡å®šï¼Œå¯ä»¥é‡å° Service çµ¦äºˆä¸åŒçš„ runtimeã€æ©Ÿå™¨è³‡æºæˆ–æ˜¯ç”¨å¦ä¸€ç¨®ç¨‹å¼èªè¨€æ··æ­Â â†©ï¸ waldogcp ä¸€å€‹ä¹Ÿæ˜¯åŸºæ–¼ GCP ä¸Šå»ºæ§‹å‡ºä¾†çš„æœ€ä½³è·¯å¾‘æœå‹™ï¼Œäº¦ä½¿ç”¨ dispatch.yaml ä¾†æŒ‡æ´¾ï¼Œå°æ–¼æœå‹™ä¸­é‹ç®—æœ€é‡çš„éƒ¨ä»½(åŸºå› æ¼”ç®—æ³•)çµ¦äºˆè¼ƒå¤§çš„æ©Ÿå™¨Â â†©ï¸ å°‡ç‰ˆè™Ÿå‘½åç‚º git çš„ commit, å¯ä»¥è®“è‡ªå·±æ¯”è¼ƒå®¹æ˜“é€²è¡Œ Service çš„ç‰ˆæœ¬ç®¡æ§Â â†©ï¸ ","date":"2017-06-12","objectID":"/posts/weddingcnp-via-gcp-1/:0:0","tags":["GAE","GCE","Datastore","EndpointAPI","sendgrid","API"],"title":"weddingcnp via GCP - 1. å°ˆæ¡ˆæ¶æ§‹åˆ‡åˆ†","uri":"/posts/weddingcnp-via-gcp-1/"},{"categories":null,"content":"weddingcp æ˜¯ä¸€å€‹ç‚ºè‡ªå·²çµå©šæ™‚ä½¿ç”¨ Google Cloud Platform ç‚ºåŸºç¤å®¢è£½çš„ç¶²ç«™ï¼Œç”¨ä¾†æ”¶é›†å ±åè³‡è¨ŠåŠå©šç´—ç·šä¸Šå±•ç¤ºç›¸é—œäº‹å®œç”¨","date":"2017-06-08","objectID":"/posts/weddingcnp-via-gcp/","tags":["GAE","GCE","Datastore","EndpointAPI","sendgrid","API"],"title":"weddingcnp via GCP","uri":"/posts/weddingcnp-via-gcp/"},{"categories":null,"content":"Cage \u0026 Ping wedding æ˜¯ä¸€å€‹æˆ‘å€‘ç‚ºçµå©šå–œå®´è™•ç†æœ‹å‹å‡ºå¸­å ±åç›¸é—œäº‹å®œç‰¹åˆ¥é–‹ç™¼çš„ç¶²ç«™ï¼Œæ‰€æœ‰çš„æœå‹™å…¨éƒ¨å»ºæ§‹åœ¨ Google Cloud Platform ä¸Š åŠŸèƒ½å¤§è‡³å¦‚ä¸‹: å–œå®´ç›¸é—œè³‡è¨Š è¨‚å©šå ´/çµå©šå ´æ™‚é–“ã€åœ°é»ã€äº¤é€šè³‡è¨Š å‡ºå¸­äººæ•¸çµ±è¨ˆ(å¼·åˆ¶ä½¿ç”¨ Google/Facebook ç™»å…¥)ã€‚è¨‚å©šå ´/çµå©šå ´ï¼Œäººæ•¸ã€è‘·ç´ ã€å…’ç«¥æ¤…ç­‰ï¼Œéœ€ä¸éœ€è¦ä½å®¿ å©šç´—æ¶å…ˆçœ‹ï¼Œå…ˆå…¬é–‹ä¸€éƒ¨ä»½ã€‚å–œå®´ç•¶å¤©å†å…¬ä½ˆæ‰€æœ‰ç…§ç‰‡ å–œå®´é€²è¡Œä¸­çš„ Bingo éŠæˆ² EDM (ç™¼ä½ˆ email çµ¦åƒåŠ çš„æœ‹å‹) GA (é—œå¿ƒä¸€ä¸‹æœ‰å¤šå°‘äººä¾†çœ‹) å› ç‚ºæˆ‘å€‘è¦åŠƒäº†ä¸€äº›ç‰¹åˆ¥çš„æ¢—(å…¶å¯¦æ˜¯è¦å¹«æ¯ä¸€å€‹å‡ºå¸­çš„äººä½œä¸€å¼µå°ˆå±¬çš„æ¡Œå¡)ï¼Œæ‰€éœ€è¦æ¯ä¸€å€‹äººçš„å¤§é ­ç…§(avatar)ï¼Œç«‹é¦¬å°±å‹•åˆ°ä½¿ç”¨ Google/Facebook é€²è¡Œç™»å…¥ï¼Œæˆæ¬Šå¾Œç¨‹å¼èƒ½å¤ è‡ªå‹•çš„æŠ“åˆ°æ¯ä¸€å€‹äººçš„ç…§ç‰‡ï¼Œé›–ç„¶ä¸æ˜¯æ¯ä¸€å€‹äººçš„ç…§ç‰‡è§£æåº¦éƒ½å¤ é€²è¡Œå¾Œåˆ¶çš„åŠ å·¥ï¼Œä¸éå·²ç¶“å¯ä»¥ç¯€çœä¸‹éå¸¸å¤šçš„æ™‚é–“ æœ‰çµéå©šçš„æœ‹å‹éƒ½éå¸¸çš„æ¸…æ¥šï¼Œçµ±è¨ˆå‡ºå¸­äººæ•¸æ˜¯ä¸€ä»¶å¾ˆéº»ç…©çš„äº‹æƒ…ï¼Œå‡ºå¸­çš„å¤§äººæ•¸ã€å°å­©æ•¸ã€å°å­©æœ‰æ²’æœ‰ä½”ä½ã€éœ€ä¸éœ€è¦å…’ç«¥åº§æ¤…ã€æœ‰æ²’æœ‰ä½å®¿çš„éœ€æ±‚ã€‚ç¨®ç¨®çš„è³‡æ–™çµ±è¨ˆå¾ˆéº»ç…©ï¼Œæ‰€ä»¥å°±è¨ˆè¨­å‡ºä¸€å€‹è¡¨å–®ï¼Œæƒ³å‡ºå¸­çš„æœ‹å‹ç›´æ¥ç™»å…¥ Google/Facebook å¸³è™Ÿå¾Œï¼Œå¡«å®Œç›¸é—œå•é¡Œçš„è¡¨å–®é€å‡ºå¾Œå°±å¥½äº†ï¼Œæ”¶å–®å‰å¯ä»¥ä¿¢æ”¹è³‡æ–™(é€™å¡Šè¸©åˆ°å¤§çš„é›·ï¼Œé€é Google Analytic å¯ä»¥å¾ˆå¤šæ˜¯ç›´æ¥ä½¿ç”¨æ‰‹æ©Ÿç™»å…¥ç¶²ç«™ï¼Œä¸éé‡åˆ°è¡¨å–®ç„¡æ³•é€å‡ºçš„å•é¡Œï¼Œå¾Œä¾†é‡å°ç›¸å®¹æ€§ä½œèª¿æ•´å¾Œæ‰è®“å¤§å®¶é †åˆ©çš„å ±å®Œå) ","date":"2017-06-08","objectID":"/posts/weddingcnp-via-gcp/:0:0","tags":["GAE","GCE","Datastore","EndpointAPI","sendgrid","API"],"title":"weddingcnp via GCP","uri":"/posts/weddingcnp-via-gcp/"},{"categories":null,"content":"weddingcnp architecture ä¸Šé¢æ˜¯ weddingcnp çš„æ¶æ§‹åœ–ï¼Œæ•´å€‹ç¶²ç«™å®Œå…¨æ˜¯æ¶æ§‹åœ¨ Google App Engine ä¸Šï¼Œé€é dispatch.yaml çš„è¨­å®šå°‡æµé‡åˆ‡ç‚ºæœå‹™å‰ç«¯éœæ…‹ç¶²é (golang + vue.js + auth0)åŠå¾Œç«¯ endpoint API çš„éƒ¨ä»½ã€‚å‰å¾Œç«¯ç‚ºä¸åŒçš„ instance, å¯ä»¥å®¹æ˜“åœ¨ Google App Engine çš„ç®¡ç†ä»‹é¢ä¸­è¨ˆå°å‰å¾Œç«¯åˆ¥åˆ†é€²è¡Œç‰ˆæ§ Enpoints API ä½œç‚ºæ¥æ”¶å‰ç«¯é€éä¾†çš„è³‡æ–™ï¼Œä¸¦æ¥å ±åç›¸é—œè³‡æ–™å„²å­˜åˆ° Google DataStore, ä¸¦è‡ªå‹•å°‡ä½¿ç”¨è€…çš„ Avatar å„²å­˜åˆ° Google Cloud Storage ä¸¦å°‡æ‰€æœ‰çš„åå–®é€é Google client API è½‰å­˜ä¸€ä»½è‡³ Google Drive æ–¹ä¾¿å¾Œåºè™•ç†ã€‚åªè¦æœ‰äººå ±åæœƒè‡ªå‹•é€é sendgrid å¯„é€šçŸ¥åˆ°è‡ªå·±çš„ä¿¡ç®±ï¼Œä¸éœ€ä¸€ç›´å»ç›¯è‘— Google Spreadsheet ä¸Šé¢çš„åå–®æœ‰æ²’æœ‰å¢åŠ  æ•´å€‹æ§‹æ¶çš„å¯¦ä½œç´°ç¯€æˆ‘æœƒåˆ†ç‚ºäº”å€‹éƒ¨ä»½ä¾†èªªæ˜, å…ˆæŠŠæ¨™é¡Œå¯«å‡ºä¾†ï¼Œå…§å®¹æœƒé™¸çºŒçš„è£œä¸Š 1. weddingcnp å°ˆæ¡ˆæ¶æ§‹åˆ‡åˆ† ä½¿ç”¨ Google App Engine golang standard runtime ä¾†ä½œç‚ºç¶²ç«™çš„æœå‹™å™¨ï¼Œé¸æ“‡ä½¿ç”¨åƒè³‡æºè¼ƒå°‘çš„ golangï¼Œæ©Ÿå™¨å¹³å‡é–‹æ©Ÿå¾Œçš„è¨˜æ†¶é«”å¤§ç´„ 200-300 MB, æ•ˆèƒ½æ¯” Python çš„å¥½å¤ªå¤šäº† ä½¿ç”¨ dispatch.yaml ä¾†é€²è¡Œæœå‹™çš„åˆ‡åˆ†ï¼Œå°‡ endpoint API çš„éƒ¨ä»½å°è‡³å¦å¤–çš„ instance ä½œè™•ç† 2. weddingcnp å‰ç«¯é é¢è¨­è¨ˆå¯¦ä½œ å‰ç«¯ä½¿ç”¨ echo æ¡†æ¶æ­é… template ä¾†ç”¢å‡ºé é¢ 3. weddingcnp endpointAPI è¨­è¨ˆå¯¦ä½œ åˆ©ç”¨ dispatch.yaml ä¾†æŒ‡å®š endpoint API å¯¦ä½œçš„ Serviceï¼Œé€™é‚ŠåŸºæœ¬ endpoint API ç†Ÿæ‚‰åº¦ä½¿ç”¨ Python ç‰ˆæœ¬ï¼Œservice çš„å¦ä¸€å€‹å¥½è™•æ˜¯å¯ä»¥å†åŒä¸€å€‹å°ˆæ¡ˆä¸‹ä½¿ç”¨æ··åˆçš„èªè¨€ä¾†ç™¼é–‹ï¼Œé€™å…’çš„ä¾‹å­æ˜¯å‰ç«¯ä½¿ç”¨ golang, endpoint API çš„éƒ¨ä»½ä½¿ç”¨ Pythonï¼Œæ­é… Flexible çš„ç’°å¢ƒä¹Ÿå¯ä»¥çš„ï¼Œå½ˆæ€§éå¸¸çš„é«˜ 4. weddingcnp å‰ç«¯ vue.js è¨­è¨ˆå¯¦ä½œ æœ¬ä¾†æ˜¯æ‰“ç®—ä½¿ç”¨ react.js ä¾†å¯¦ä½œå‰ç«¯ï¼Œä¸éå¤ªèŠ±æ™‚é–“äº†ï¼Œæ‰€ä»¥é¸æ“‡äº† vue.js ä¾†å¿«é€Ÿå¯¦ä½œå‡ºä»‹æ¥ endpoint API å‰ç«¯çš„è¡¨å–® 5. weddingcnp edm å¯„é€ sendgrid åœ¨æ”¶é›†åˆ°åå–®æ™‚ï¼Œå¯ä»¥ç™¼é€šçŸ¥çµ¦æœ‹å‹ã€‚é€™å…’çš„ä¾‹å­æ˜¯æˆ‘å€‘çš„å©šç´—ç…§ç‰‡ä¸Šç·šæ™‚ï¼Œå°±ç™¼äº† EDM é€šçŸ¥å‘Šè¨´æœ‹å‹å¿«é»ä¸Šä¾†çœ‹ã€‚ä½¿ç”¨çš„æ˜¯ sendgrid ä¾†ç™¼ä¿¡ï¼Œé€é sendgrid çš„æ¨¡ç‰ˆã€client API è®“ç™¼ html çš„ EDM è¼•é¬†å¤šäº† weddingcnp ç³»ä¾‹å‚³é€é–€ weddingcnp via GCP ç°¡ä»‹ weddingcnp via GCP - 1. å°ˆæ¡ˆæ¶æ§‹åˆ‡åˆ† weddingcnp via GCP - 2. å‰ç«¯é é¢è¨­è¨ˆå¯¦ä½œ weddingcnp via GCP - 3. endpointAPI è¨­è¨ˆå¯¦ä½œ weddingcnp å‰ç«¯ vue.js è¨­è¨ˆå¯¦ä½œ weddingcnp edm å¯„é€ sendgrid ","date":"2017-06-08","objectID":"/posts/weddingcnp-via-gcp/:1:0","tags":["GAE","GCE","Datastore","EndpointAPI","sendgrid","API"],"title":"weddingcnp via GCP","uri":"/posts/weddingcnp-via-gcp/"},{"categories":null,"content":"åœ¨ Golang ä¸­åˆ©ç”¨ regEx æ‰¾åˆ° Facebook Live rtmp server url and stream key","date":"2017-02-21","objectID":"/posts/golang-regex/","tags":["rtmp","facebook","golang","regEx","Live API"],"title":"Golang regEx parse Facebook Live rtmp","uri":"/posts/golang-regex/"},{"categories":null,"content":"æœ€è¿‘å› ç‚ºå…¬å¸å°ˆæ¡ˆçš„é—œä¿‚ï¼Œé–‹å§‹æ¥è§¸ Facebook Live APIï¼Œéœ€è¦å‹•æ…‹çš„é€é API å»å»ºç«‹ä¸€çµ„ Live ç›´æ’­ ä¸¦å°‡ rtmp çš„æ•´å€‹å­—ä¸²æ‹†è§£æˆ ServerUrl åŠ StreamKey äºŒå€‹éƒ¨ä»½å†ç”± ffmpeg æ‹¿åˆ°é€™å€‹è³‡è¨Šå» streamingã€‚å› ç‚º Youtube Data API v3 å¯ä»¥åˆ¥åˆ†æ‹¿ StreamName åŠ IngestionAddress, æ‰€ä»¥åªéœ€è¦å° Facebook çš„éƒ¨ä»½ç‰¹åˆ¥è™•ç† å…ˆä¾†çœ‹ä¸€ä¸‹ Facebook Live API å»ºç«‹ç›´æ’­æ‹¿å›ä¾†çš„å®Œæ•´çš„ rmtp url rtmp://rtmp-api.facebook.com:80/rtmp/1854721994809041?ds=1\u0026s_l=1\u0026a=ATjdLqx4xd23Q2mF å®Œæ•´çš„ rtmp url ç”± StreamUrl + StreamKey çµ„æˆ StreamUrl: rtmp://rtmp-api.facebook.com:80/rtmp/ StreamKey: 1854721994809041?ds=1\u0026s_l=1\u0026a=ATjdLqx4xd23Q2mF å› æ­¤å¯ä»¥é€é Golang regEx çš„æ–¹å¼ä¾†æ‹†è§£ package main import ( \"fmt\" \"regexp\" ) func getParams(regEx, url string) (paramsMap map[string]string) { var compRegEx = regexp.MustCompile(regEx) match := compRegEx.FindStringSubmatch(url) paramsMap = make(map[string]string) for i, name := range compRegEx.SubexpNames() { if i \u003e 0 \u0026\u0026 i \u003c= len(match) { paramsMap[name] = match[i] } } return } func main() { params := getParams(`(?P\u003cServerKey\u003e^rtmp://.+/)(?P\u003cStreamKey\u003e.+)`, `rtmp://rtmp-api.facebook.com:80/rtmp/1854721994809041?ds=1\u0026s_l=1\u0026a=ATjdLqx4xd23Q2mF`) fmt.Println(params[\"ServerKey\"]) // rtmp://rtmp-api.facebook.com:80/rtmp/ fmt.Println(params[\"StreamKey\"]) // 1854721994809041?ds=1\u0026s_l=1\u0026a=ATjdLqx4xd23Q2mF } The Go Playground - Demo reference Regex Tester Golang - A Go regular expression online tester Facebook Live API - Video ","date":"2017-02-21","objectID":"/posts/golang-regex/:0:0","tags":["rtmp","facebook","golang","regEx","Live API"],"title":"Golang regEx parse Facebook Live rtmp","uri":"/posts/golang-regex/"},{"categories":null,"content":"Simple example to demo how to serve GCS image via GAE Image API","date":"2016-10-31","objectID":"/posts/gae-go-image-api/","tags":["GAE","Golang","echo","pongor"],"title":"GAE go Image API for GCS","uri":"/posts/gae-go-image-api/"},{"categories":null,"content":" LIVE DEMO åœ¨é–‹ç™¼ GAE æ‡‰ç”¨ç¨‹å¼æ™‚ï¼Œé›£å…æœƒé‡åˆ°æ‡‰ç”¨ç¨‹å¼éœ€è¦è™•ç†åœ–ç‰‡çš„å•é¡Œã€‚GAE çš„æ‡‰ç”¨ç¨‹ç”¨å¯ä»¥ç›´æ¥å­˜å–éœæ…‹çš„è³‡æºæª”æ¡ˆï¼Œé€™å¡Šç›´æ¥åœ¨ app.yaml æª”æ¡ˆä¸­è¨­å®šå°±å¯ä»¥äº†ï¼Œä¸éä¹Ÿå› ç‚º GAE æ‡‰ç”¨ç¨‹å¼çš„ç‰¹æ€§ï¼Œéœ€è¦å°‡æ‰€æœ‰çš„è³‡æºä¸Šå‚³ä¸€ä»½åˆ° GAE æ­£å¼ç’°å¢ƒä¸­ï¼Œæ‰€ä»¥æœƒç™¼ç¾ä¸Šå‚³å°ˆæ¡ˆçš„å®¹é‡å¤§å°æœƒçˆ†å¢(å¦‚æœä½ å°‡æ‰€æœ‰éœ€è¦çš„åœ–æª”éšç›´æ¥æ”¾åœ¨ç¨‹å¼å…§)ã€‚ å°ˆæ¡ˆæª”æ¡ˆå¤ªå¤§æœƒå½±éŸ¿ GAE åœ¨è‡ªå‹•æ“´å±•çš„æ•ˆèƒ½ï¼Œæ‰€ä»¥ç›¡å¯èƒ½çš„å°‡ä¸å¿…è¦çš„æ±è¥¿ç§»å¤šå°ˆæ¡ˆå¤–(åœ–æª”ç­‰) app.yaml ... - url: /favicon.jpg mime_type: image/x-icon static_files: public/images/favicon.jpg upload: public/images/favicon.jpg - url: /js/* mime_type: text/javascript static_dir: public/js secure: always - url: /css/* mime_type: text/css static_dir: public/css secure: always http_headers: Access-Control-Allow-Origin: \"*\" - url: /images/* static_dir: public/images secure: always æ¯ä¸€å€‹ GCP çš„å°ˆæ¡ˆå¯ä»¥æœ‰ 5G å…è²»çš„ Google Cloud Storage ç©ºé–“ï¼Œæ‰€ä»¥å°‡ GAE ä¸Šå¤§æª”æ¡ˆçš„éœæ…‹è³‡æºæ”¾åˆ° GCS æ˜¯ä¸€å€‹å¾ˆå¥½çš„æ±ºå®šï¼Œåœ¨ GAE ç¨‹å¼ä¸­å¯ä»¥ä½¿ç”¨ google-api-go-client ä¾†å­˜å– GCS ä¸Šç›¸é—œçš„è³‡æºã€‚å¦‚æœæ˜¯åœ–ç‰‡æª”çš„è©±ï¼Œæ›´å¯ä»¥ç›´æ¥ç”¨ Image API çš„æ–¹å¼ä¾†ç›´æ¥è®€å–åœ–ç‰‡è³‡æº Images Go API è®“æˆ‘å€‘ä½¿ç”¨ Blobstore çš„æ–¹å¼ä¾†è®€å–/è£åˆ‡åœ–æª”ï¼Œç•¶æˆ‘å€‘é€é Blobstore æ‹¿åˆ°éœæ…‹åœ–æª”æ™‚å¯ä»¥ç›´æ¥é€é url çš„æ–¹å¼å°ç›®æ¨™åœ–ç‰‡é€²è¡Œèª¿æ•´åœ–æª”çš„å¤§å°æˆ–é€²è¡Œè£åˆ‡ # å°‡ç›®æ¨™åœ–ç‰‡é‡æ–°ç¸®æ”¾è‡³ 32 åƒç´ (ç­‰æ¯”ä¾‹ - é•·é‚Š) http://lhx.ggpht.com/randomStringImageId=s32 # å°‡ç…§ç‰‡è£åˆ‡è‡³ 32 åƒç´  http://lhx.ggpht.com/randomStringImageId=s32-c ","date":"2016-10-31","objectID":"/posts/gae-go-image-api/:0:0","tags":["GAE","Golang","echo","pongor"],"title":"GAE go Image API for GCS","uri":"/posts/gae-go-image-api/"},{"categories":null,"content":"imgServe å› äº›æˆ‘å€‘å°±å¯ä»¥è¨­è¨ˆä¸€å€‹å‹•æ…‹çš„è·¯ç”±ä¾†å°æ‡‰è‡³ GCS ä¸Šç‰¹å®šè·¯å¾‘çš„åœ–ç‰‡ /img?f=dress/banner.png --\u003e GCS:Bucket/dress/banner.png /img?f=dress/color/banner.png --\u003e GCS:Bucket/dress/color/banner.png /img?f=dress/color/banner.png\u0026s=200 --\u003e GCS:Bucket/dress/color/banner.png ç­‰æ¯”ç¸®æ”¾è‡³ 200 åƒç´  /img?f=dress/color/banner.png\u0026s=200-c --\u003e GCS:Bucket/dress/color/banner.png ç­‰æ¯”ç¸®æ”¾è‡³ 200 åƒç´ ä¸”é€²è¡Œ 1:1 çš„è£åˆ‡ å¦‚æ­¤ä¸€ä¾†å‰ç«¯é¢é å¦‚æœéœ€è¦å¼•ç”¨ç…§ç‰‡ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ \u003cimg src=\"/img?f=dress/banner.png\" alt=\"\"\u003eï¼Œå¦‚æœç›®æ¨™åœ–ç‰‡ä¸å­˜åœ¨å‰‡ç›´æ¥è¼¸å…¥ä¸€é–‹å§‹å°±æº–å‚™å¥½çš„ image 404 åœ–ç‰‡é€²è¡Œä»£æ›¿ main.go package main import ( \"fmt\" \"golang.org/x/net/context\" \"net/http\" \"github.com/labstack/echo\" \"github.com/labstack/echo/engine/standard\" \"google.golang.org/appengine\" \"google.golang.org/appengine/blobstore\" \"google.golang.org/appengine/image\" ) const ( Bucket = \"\u003cyour-gae-default-bucket\u003e\" NotFoundImageURL = \"img-api-example/img404.jpg\" ) /** * index page */ func indexGET(c echo.Context) error { c.Render(200, \"index.tpl\", map[string]interface{}{ \"title\": \"go gae image API example\", \"images\": []string{ \"img?f=img-api-example/1.png\", \"img?f=img-api-example/1.png\u0026s=200\", \"img?f=img-api-example/1.png\u0026s=200-c\", \"img?f=img-api-example/2.jpg\", }, }) return nil } /** * get not foound image default image, img404.jpg */ func getNotFoundImage(ctx context.Context) (urlString string, err error) { blobPath := fmt.Sprintf(\"/gs/%s/%s\", Bucket, NotFoundImageURL) blobKey, err := blobstore.BlobKeyForFile(ctx, blobPath) if err != nil { return } opts := image.ServingURLOptions{Secure: false, Crop: true} url, err := image.ServingURL(ctx, blobKey, \u0026opts) if err != nil { return } urlString = url.String() return } /** * image serve handler */ func imgServe(c echo.Context) error { ctx := appengine.NewContext(c.Request().(*standard.Request).Request) filePath := c.QueryParam(\"f\") size := c.QueryParam(\"s\") blobPath := fmt.Sprintf(\"/gs/%s/%s\", Bucket, filePath) blobKey, err := blobstore.BlobKeyForFile(ctx, blobPath) if err != nil { c.String(http.StatusExpectationFailed, err.Error()) } opts := image.ServingURLOptions{Secure: false, Crop: true} if url, err := image.ServingURL(ctx, blobKey, \u0026opts); err != nil { if n, err := getNotFoundImage(ctx); err != nil { return err } else { c.Redirect(http.StatusTemporaryRedirect, n) } } else { if size != \"\" { c.Redirect(http.StatusTemporaryRedirect, fmt.Sprintf(\"%s=s%s\", url.String(), size)) } else { c.Redirect(http.StatusTemporaryRedirect, url.String()) } } return nil } func init() { e.GET(\"/\", indexGET) e.GET(\"/img\", imgServe) } ","date":"2016-10-31","objectID":"/posts/gae-go-image-api/:1:0","tags":["GAE","Golang","echo","pongor"],"title":"GAE go Image API for GCS","uri":"/posts/gae-go-image-api/"},{"categories":null,"content":"GAE Go Image serve GCS image ","date":"2016-10-31","objectID":"/posts/gae-go-image-api/:1:1","tags":["GAE","Golang","echo","pongor"],"title":"GAE go Image API for GCS","uri":"/posts/gae-go-image-api/"},{"categories":null,"content":"demo code cage1016/gae-go-image-example: GAE go image API example ","date":"2016-10-31","objectID":"/posts/gae-go-image-api/:1:2","tags":["GAE","Golang","echo","pongor"],"title":"GAE go Image API for GCS","uri":"/posts/gae-go-image-api/"},{"categories":null,"content":"è§£æ±º gvm install go1.4 å®‰è£éŒ¯èª¤è¨Šæ¯","date":"2016-09-21","objectID":"/posts/gvm-install-go1-4/","tags":["Golang","gvm"],"title":"è§£æ±º gvm install go1.4 å®‰è£éŒ¯èª¤ [ç­†è¨˜]","uri":"/posts/gvm-install-go1-4/"},{"categories":null,"content":"æœ¬ä¾†æ˜¯ä½¿ç”¨ brew ä¾†ç®¡ç† golang çš„ç‰ˆæœ¬ï¼Œbrew åŠ brew cask æŸäº›ç¨‹åº¦æ˜¯å¾ˆæ–¹ä¾¿ï¼Œä¸éä¹Ÿè¶Šä¾†è¶Šè¦ºå¾—å½ˆæ€§å·®äº†é»ã€‚ç¹¼ node ä½¿ç”¨ tj å¤§ç¥çš„ tj/n: Node version management ä¹‹å¤–ï¼Œgolang ä¹Ÿæ‰“ç®—ä½¿ç”¨ moovweb/gvm: Go Version Manager ä¾†ç®¡ç†ç‰ˆæœ¬ï¼Œä¸éåœ¨ç…§è‘—å®˜æ–¹æ­¥é©Ÿæ™‚å ±éŒ¯äº†ï¼Œé †æ‰‹è¨˜éŒ„äº†ä¸€ä¸‹è§£æ±ºçš„æ–¹å¼ brew info go $ brew info go go: stable 1.6 (bottled), HEAD Go programming environment https://golang.org /usr/local/Cellar/go/1.4.2 (4,567 files, 148.2M) Built from source /usr/local/Cellar/go/1.5 (5,328 files, 259.2M) Poured from bottle /usr/local/Cellar/go/1.5.2 (5,336 files, 259.6M) Poured from bottle /usr/local/Cellar/go/1.5.3 (5,337 files, 269.6M) Poured from bottle /usr/local/Cellar/go/1.6 (5,653 files, 472.9M) * Poured from bottle From: https://github.com/Homebrew/homebrew/blob/master/Library/Formula/go.rb ==\u003e Options --without-cgo Build without cgo --without-godoc godoc will not be installed for you --without-vet vet will not be installed for you --HEAD Install HEAD version ==\u003e Caveats As of go 1.2, a valid GOPATH is required to use the `go get` command: https://golang.org/doc/code.html#GOPATH You may wish to add the GOROOT-based install location to your PATH: export PATH=$PATH:/usr/local/opt/go/libexec/bin fixed gvm install go1.4 å ±éŒ¯ $ gvm install go1.4 Installing go1.4... * Compiling... ERROR: Failed to compile. Check the logs at /Users/cage/.gvm/logs/go-go1.4-compile.log ERROR: Failed to use installed version æ‹¿éŒ¯èª¤è¨Šæ¯é¤µç‹—ä¹‹å¾Œæ‰¾åˆ° update readme.md for go1.5 installation by imyelo Â· Pull Request #176 Â· moovweb/gvm install go1.4 é †åˆ©å®Œæˆ $ gvm install go1.4 -B Installing go1.4 from binary source æŒ‡å®š golang ç‰ˆæœ¬ $ gvm use go1.4 Now using version go1.4 é †åˆ©å®‰è£å…¶ä»–ç‰ˆæœ¬ $ gvm install go1.7 Installing go1.7... * Compiling... go1.7 successfully installed! ","date":"2016-09-21","objectID":"/posts/gvm-install-go1-4/:0:0","tags":["Golang","gvm"],"title":"è§£æ±º gvm install go1.4 å®‰è£éŒ¯èª¤ [ç­†è¨˜]","uri":"/posts/gvm-install-go1-4/"},{"categories":null,"content":"sync-settings æ˜¯ä¸€å€‹å¯ä»¥ç„¡ç—›å¹«ä½ å‚™ä»½ Atom æ‰€æœ‰çš„è¨­å®š(åŒ…å« package) çš„æ“´å……å·¥å…·","date":"2016-09-20","objectID":"/posts/atom-sync-settings/","tags":["Atom"],"title":"Atom sync-settings","uri":"/posts/atom-sync-settings/"},{"categories":null,"content":"Atom æ˜¯ä¸€å€‹ GitHub é–‹ç™¼çš„å…è²»ã€é–‹æ”¾åŸå§‹ç¢¼ç·¨è¼¯å™¨ï¼Œç›®å‰æœ‰éå¸¸å¤šçš„æ“´å……å·¥å…·å¯ä»¥å®‰è£(4,913 packages)ï¼Œä¹Ÿæœ‰éå¸¸å¤šçš„ä¸»é¡Œä½ˆæ™¯å¯ä»¥å®‰è£(1,645 themes)ï¼Œå½ˆæ€§éå¸¸çš„é«˜ï¼Œä½ å¯ä»¥æ‰“é€ æˆè‡ªå·±ç†Ÿæ‚‰çš„é–‹ç™¼ç’°å¢ƒã€‚ ç•¶ä½ å¥½ä¸å®¹æ˜“æ‰“é€ å¥½è‡ªå·±ç†Ÿæ‚‰çš„é–‹ç™¼ç’°å¢ƒæ™‚ï¼Œå¦‚æœè¦æ›é›»è…¦æ™‚ï¼Œé‡æ–°é‚„åŸç†Ÿæ‚‰çš„é–‹ç™¼ç’°å¢ƒæ˜¯éœ€è¦èŠ±ä¸€é»åŠŸå¤«ã€‚ä»¥ä¸‹æ˜¯æ‰‹å‹•çš„æ–¹å¼ å‚™ä»½æ©Ÿä¸Šçš„æ¸…å–®åˆ°ä¸€å€‹æª”æ¡ˆ $ apm list --installed --bare | grep '^[^@]\\+' -o \u003e my_atom_packages.txt åœ¨å¦å¤–ä¸€å°æ©Ÿå™¨ä¸Šä½¿ç”¨ apm é€²è¡Œæ‰¹æ¬¡å®‰è£çš„å‹•ä½œ $ apm install --packages-file my_atom_packages.txt ä¸Šè¿°çš„å‹•ä½œé›–ç„¶å¯ä»¥å¹«ä½ å¿«é€Ÿçš„è§£æ±ºå®‰è£æ“´å……å·¥å…·çš„å•é¡Œï¼Œä¸éè¨­å®šæª”å¾—è‡ªå·²å†é€²è¡Œè¨­å®šï¼Œé‚„æ˜¯æœ‰ä¸€é»éº»ç…© ","date":"2016-09-20","objectID":"/posts/atom-sync-settings/:0:0","tags":["Atom"],"title":"Atom sync-settings","uri":"/posts/atom-sync-settings/"},{"categories":null,"content":"atom-community/sync-settings Synchronize all your settings and packages across atom instances ä¸€å€‹è¶…æ¥µæ–¹ä¾¿çš„æ“´å……å·¥å…·ä¾†è§£æ±ºä½  Atom ä¸Šæ“´å……å·¥å…·çš„åŒæ­¥åŠå…¶è¨­å®šï¼Œsync-settings æ˜¯é€é Github Gist ä¾†å¹«ä½ å‚™ä»½æ“´å……å·¥å…·çš„æ¸…å–®å³è¨­å®šï¼Œæ‰€ä»¥åœ¨ sync-settings çš„è¨­å®šä¸­ä½ å¿…éœ€å¡«å…¥ Personal Access Token (ä¸€çµ„é©åˆç‰¹æ®Šéœ€æ±‚å°ˆçµ¦ç‰¹å®šç¨‹å¼ä»‹æ¥å­˜å– github è³‡æºç”¨:é€™å°±æ˜¯ sync-settings) Gist Id (ä½ çš„ Gist id) ","date":"2016-09-20","objectID":"/posts/atom-sync-settings/:1:0","tags":["Atom"],"title":"Atom sync-settings","uri":"/posts/atom-sync-settings/"},{"categories":null,"content":"å»ºç«‹ Personal Access Token æ‰“é–‹ Github: Personal Access Tokens \u003e é»é¸ gist \u003e Generate token \u003e è¤‡è£½ä¸¦å¡«å…¥ Atom:sync-settings ä¸­ ","date":"2016-09-20","objectID":"/posts/atom-sync-settings/:1:1","tags":["Atom"],"title":"Atom sync-settings","uri":"/posts/atom-sync-settings/"},{"categories":null,"content":"å»ºç«‹ Gist æ‰“é–‹ Create a new Gist å¡«ä¸Šèªªæ˜ \u003e Create secret gist \u003e è¤‡è£½ Gist Id ä¸¦å¡«å…¥ Atom:sync-settings ä¸­ ","date":"2016-09-20","objectID":"/posts/atom-sync-settings/:1:2","tags":["Atom"],"title":"Atom sync-settings","uri":"/posts/atom-sync-settings/"},{"categories":null,"content":"Sync Backup åœ¨å¡«å…¥ Personal Access Token åŠ Gist Id å¾Œï¼Œå°±å¯ä»¥é€²è¡ŒåŒæ­¥çš„å‹•ä½œ Shit + command + P (Mac), Ctrl + Shit + P (Windows) ","date":"2016-09-20","objectID":"/posts/atom-sync-settings/:1:3","tags":["Atom"],"title":"Atom sync-settings","uri":"/posts/atom-sync-settings/"},{"categories":null,"content":"Sync restore åœ¨å…¶ä»–é›»è…¦ä¸Šè£å¥½ Atom \u003e å®‰è£ sync-settings \u003e é€²è¡Œ Sync: restore çš„å‹•ä½œ Shit + command + P (Mac), Ctrl + Shit + P (Windows) æœ€å¾Œåˆ†äº«ä¸€ä¸‹æˆ‘çš„ Atom æ“´å……å·¥å…·æ¸…å–® Sublime-Style-Column-Selection atom-alignment atom-beautify atom-ternjs auto-update-packages autocomplete-go autocomplete-plus builder-go change-case cobalt2-syntax color-picker docblockr emmet environment file-icons fold-functions go-config go-debug go-get go-plus go-rename godoc gofmt gometalinter-linter gorename highlight-selected imdone-atom jshint language-c language-docker language-gitignore language-protobuf language-shellscript linter linter-eslint linter-js-standard linter-jscs linter-jshint mocha-test-runner navigator-godef open-recent package-sync pigments project-manager react regex-railroad-diagram rst-preview-pandoc set-syntax seti-syntax seti-ui sync-settings terminal-plus tester-go todo-show tool-bar tool-bar-main trailing-spaces tree-view ","date":"2016-09-20","objectID":"/posts/atom-sync-settings/:1:4","tags":["Atom"],"title":"Atom sync-settings","uri":"/posts/atom-sync-settings/"},{"categories":null,"content":"TensorFlow æ˜¯ç”± Google æ‰€å…¬å¸ƒçš„é–‹æºæ©Ÿå™¨å­¸ç¿’å¹³å°ï¼Œæ ¹æ“š Github çš„æ•¸æ“šçµ±è¨ˆï¼ŒTensorFlow æˆç‚º2016å¹´æœ€å—é—œæ³¨çš„åå¤§é–‹æºå°ˆæ¡ˆä¹‹ä¸€ã€‚æ­¤æ¬¡åˆ†äº«å°‡ä»‹ç´¹ï¼Œå¦‚ä½•åœ¨ NAS ä¸Šæ•´åˆTensorFlow åŠç›¸é—œ Open source projectï¼Œä»¥å±•ç¤ºå¹¾ç¨®ç›¸é—œçš„è³‡æ–™åˆ†ææ‡‰ç”¨","date":"2016-08-22","objectID":"/posts/retrain-inception-model-for-nas/","tags":["NAS","tensorflow","retrain-model","coscup"],"title":"COSCUP 2016 - NASä¹Ÿæœƒæ€åœŸè±†","uri":"/posts/retrain-inception-model-for-nas/"},{"categories":null,"content":" tensorflow logo ä»Šå¹´åœ¨ COSCUP 2016 ä¸Šåˆ†äº«äº†ã€ŒNAS ä¹Ÿå¯ä»¥æ€åœŸè±†ã€ä¸»é¡Œã€‚ TensorFlow æ˜¯ç”± Google æ‰€å…¬å¸ƒçš„é–‹æºæ©Ÿå™¨å­¸ç¿’å¹³å°ï¼Œæ ¹æ“š Github çš„æ•¸æ“šçµ±è¨ˆï¼ŒTensorFlow æˆç‚º2016å¹´æœ€å—é—œæ³¨çš„åå¤§é–‹æºå°ˆæ¡ˆä¹‹ä¸€ã€‚æ­¤æ¬¡åˆ†äº«å°‡ä»‹ç´¹ï¼Œå¦‚ä½•åœ¨ NAS ä¸Šæ•´åˆTensorFlow åŠç›¸é—œ Open source projectï¼Œä»¥å±•ç¤ºå¹¾ç¨®ç›¸é—œçš„è³‡æ–™åˆ†ææ‡‰ç”¨ã€‚ ","date":"2016-08-22","objectID":"/posts/retrain-inception-model-for-nas/:0:0","tags":["NAS","tensorflow","retrain-model","coscup"],"title":"COSCUP 2016 - NASä¹Ÿæœƒæ€åœŸè±†","uri":"/posts/retrain-inception-model-for-nas/"},{"categories":null,"content":"outline Machine learning Deep learning Neural Network Convolutional neural network Building a classifier for NAS Study information ","date":"2016-08-22","objectID":"/posts/retrain-inception-model-for-nas/:1:0","tags":["NAS","tensorflow","retrain-model","coscup"],"title":"COSCUP 2016 - NASä¹Ÿæœƒæ€åœŸè±†","uri":"/posts/retrain-inception-model-for-nas/"},{"categories":null,"content":"slide ","date":"2016-08-22","objectID":"/posts/retrain-inception-model-for-nas/:2:0","tags":["NAS","tensorflow","retrain-model","coscup"],"title":"COSCUP 2016 - NASä¹Ÿæœƒæ€åœŸè±†","uri":"/posts/retrain-inception-model-for-nas/"},{"categories":null,"content":"github demo repo cage1016/coscup2016-nas-session: Nas ä¹Ÿå¯ä»¥æ€åœŸè±† ","date":"2016-08-22","objectID":"/posts/retrain-inception-model-for-nas/:3:0","tags":["NAS","tensorflow","retrain-model","coscup"],"title":"COSCUP 2016 - NASä¹Ÿæœƒæ€åœŸè±†","uri":"/posts/retrain-inception-model-for-nas/"},{"categories":null,"content":"tips åœ¨æº–å‚™ç°¡å ±çš„éç¨‹ä¸­ä¹Ÿå­¸ç¿’åˆ°äº† Machine learning, Deep learning, Convolutional Neural Network(CNN) çš„ç›¸é—œæ¦‚å¿µ, å…¶å¯¦èŠ±äº†å¾ˆå¤šæ™‚å€™å†åˆ†è¾¨é€™å…¶ä¸­çš„å·®ç•°æœ‰ä»€éº¼ä¸åŒ, è‡ªå·±ä¹Ÿæ˜¯å‰›å‰›é–‹å§‹å­¸ç¿’é€™é–€å­¸ç§‘, ä¸»é¡Œåˆ†äº«ä¸Šç®—æ˜¯å…¥é–€çµ¦å¤§å®¶æ¯”è¼ƒå¤§ä¸€é»çš„æ¦‚å¿µ(ä¹Ÿæ˜¯è‡ªå·±çš„å­¸ç¿’å¿ƒå¾—) ","date":"2016-08-22","objectID":"/posts/retrain-inception-model-for-nas/:4:0","tags":["NAS","tensorflow","retrain-model","coscup"],"title":"COSCUP 2016 - NASä¹Ÿæœƒæ€åœŸè±†","uri":"/posts/retrain-inception-model-for-nas/"},{"categories":null,"content":"Study information Deep Learning | Udacity Research Blog: Train your own image classifier with Inception in TensorFlow jtoy/awesome-tensorflow: TensorFlow - A curated list of dedicated resources http://tensorflow.org Deep Learning - Convolutional Neural Networks Neural networks and deep learning Multiple Component Learning DIGITS/GettingStarted.md at master Â· NVIDIA/DIGITS How to Retrain Inceptionâ€™s Final Layer for New Categories TensorFlow For Poets DIY Deep Learning for Vision: a Hands-On Tutorial with Caffe - Google Slides Caffe | Deep Learning Framework Understanding Convolutional Neural Networks for NLP â€“ WildML ","date":"2016-08-22","objectID":"/posts/retrain-inception-model-for-nas/:5:0","tags":["NAS","tensorflow","retrain-model","coscup"],"title":"COSCUP 2016 - NASä¹Ÿæœƒæ€åœŸè±†","uri":"/posts/retrain-inception-model-for-nas/"},{"categories":null,"content":"docker run small container with SPA serving by golang","date":"2016-08-04","objectID":"/posts/golang-serve-static-site/","tags":["golang","webpack"],"title":"golang serving a single page application","uri":"/posts/golang-serve-static-site/"},{"categories":null,"content":"golang serve SPA æœ€è¿‘æœ‰å‰ç«¯é–‹ç™¼çš„éœ€æ±‚ï¼Œé¸ç”¨äº† react-redux-starter-kit ä¾†é€²è¡ŒäºŒæ¬¡é–‹ç™¼ï¼Œçœå»ä¸€äº›æƒ³è¦ä½¿ç”¨ React, redux, redux-router çš„åŸºæœ¬é…ç½®ï¼Œé€™æ¨£é€Ÿåº¦æœƒå¿«ä¸€é» å› ç‚º react-redux-starter-kit ä¹Ÿä½¿ç”¨ webpack é€²è¡Œç¨‹å¼ç¢¼çš„æ‰“åŒ…, æ‰€ä»¥æœ€å¾Œçš„ç”¢å‡ºé è¨­åœ¨ dist è³‡æ–™å¤¾ä¸­ï¼Œæ‰€ä»¥éƒ¨ç½²æ™‚åªéœ€è¦ä¸€å€‹ç°¡å–®çš„ host server å³å¯ # dist example $ l total 752 -rw-r--r-- 1 cage staff 3317 Aug 4 00:22 1.counter.fa53ea42bc9ff9de19bd.js -rw-r--r-- 1 cage staff 144953 Aug 4 00:22 app.5d0f2ab61ef7dd5daac5.js -rw-r--r-- 1 cage staff 2619 Aug 4 00:22 app.97a1751c9624097874a4b54cb93fa067.css -rw-r--r-- 1 cage staff 173 Aug 4 00:33 app.go -rw-r--r-- 1 cage staff 24838 Aug 4 00:22 favicon.ico -rw-r--r-- 1 cage staff 103 Aug 4 00:22 humans.txt -rw-r--r-- 1 cage staff 604 Aug 4 00:22 index.html -rw-r--r-- 1 cage staff 24 Aug 4 00:22 robots.txt -rw-r--r-- 1 cage staff 183224 Aug 4 00:22 vendor.9012d9d99074521f418e.js è€ƒæ…®æ•ˆèƒ½çš„å•é¡Œ, æœ€å¾Œæ‰“ç®—ä½¿ç”¨ golang ä¾†ç•¶ä½œ host server, golang å…§å»ºçš„ net/http å¯ä»¥è¼•é¬†çš„ä½¿ç”¨ http.FileServer(http.Dir(\"./\")) ä¾† host æ•´å€‹éœæ…‹ç›®éŒ„ package main import ( \"log\" \"net/http\" ) func main() { log.Println(\"Listening port 3000...\") log.Fatal(http.ListenAndServe(\":3000\", http.FileServer(http.Dir(\"./\")))) } ä½†æ˜¯ä¸Šè¿°çš„ä½œæ³•åŸºæœ¬ä¸Šæ˜¯å¯ä»¥å‹•çš„, ä¸éå¦‚æœå‰ç«¯è‡ªå·±æœ‰ä½¿ç”¨åˆ° redux-router æ™‚, golang ä¸¦ä¸æœƒå°‡è«‹æ±‚å°è‡³å‰ç«¯çš„ router è€Œæ˜¯ç›´æ¥å¾—åˆ° golang 404 è€Œä¸æœƒé€²åˆ°å‰ç«¯ redux-router è¨‚å®šçš„ router (å¦‚æœæœ‰ä½¿ç”¨ redux-router å° Notfound é€²è¡Œè™•ç†) http://localhost:3000/dfa æ‰€ä»¥æˆ‘å€‘ä½¿ç”¨äº† golang echo çš„ web framework, ç›£è½æ‰€æœ‰çš„è«‹æ±‚ä¸¦ç›´æ¥å°è‡³ index.html çš„å‰ç«¯éœæ…‹æª”æ¡ˆ package main import ( \"flag\" \"fmt\" \"net/http\" \"os\" \"strings\" \"github.com/labstack/echo\" \"github.com/labstack/echo/engine/standard\" mw \"github.com/labstack/echo/middleware\" ) const ( wwwRoot = \"./\" ) var ( httpPort = flag.Int(\"http\", 3000, \"http port number\") ) func Init() *echo.Echo { e := echo.New() e.Debug() e.Use(mw.Logger()) e.Use(mw.Recover()) e.Any(\"/*\", echo.HandlerFunc(func(c echo.Context) (err error) { r := c.Request().(*standard.Request).Request w := c.Response().(*standard.Response).ResponseWriter requestPath := r.URL.Path fileSystemPath := wwwRoot + r.URL.Path endURIPath := strings.Split(requestPath, \"/\")[len(strings.Split(requestPath, \"/\"))-1] splitPath := strings.Split(endURIPath, \".\") splitLength := len(splitPath) if splitLength \u003e 1 \u0026\u0026 splitPath[splitLength-1] != \"go\" { f, error := os.Stat(fileSystemPath) if error == nil \u0026\u0026 !f.IsDir() { http.ServeFile(w, r, fileSystemPath) return } } http.ServeFile(w, r, wwwRoot+\"index.html\") return })) return e } func main() { flag.Parse() server := Init() server.Run(standard.New(fmt.Sprintf(`:%d`, *httpPort))) } http://localhost:3000/dfa ","date":"2016-08-04","objectID":"/posts/golang-serve-static-site/:1:0","tags":["golang","webpack"],"title":"golang serving a single page application","uri":"/posts/golang-serve-static-site/"},{"categories":null,"content":"run SPA as with docker image è™•ç†å®Œ golang å° single page application çš„æ”¯æ´, é€²ä¸€æ­¥ç°¡åŒ–éƒ¨ç½²çš„æµç¨‹, å¯ä»¥å°‡æ•´å€‹ single page application é€£åŒ app.go åˆ©ç”¨ golang build çš„æ–¹å¼ç·¨è­¯æˆåŸ·è¡Œæª”, å†å°‡ golang åŸ·è¡Œæª”é€é Dockerfile ç·¨è­¯æˆ docker image, é€™æ¨£ä¸€ä¾†å°±å¯ä»¥å¾ˆå®¹æ˜“çš„éƒ¨ç½²åœ¨ä»»ä½•å¯ä»¥åŸ·è¡Œ container çš„ç’°å¢ƒ ä¸Šè¿°ä¸€ç³»åˆ—çš„æµç¨‹æˆ‘å€‘å¯ä»¥ä½¿ç”¨ npm run scripts çš„æ–¹å¼æŠŠå®ƒå®Œå…¨ä¸²èµ·ä¾†ä¾†é”åˆ°ä¸€éµå»ºç«‹ docker image FROM alpine:3.3 MAINTAINER cage.chung \u003ccage.chung@gmail.com\u003e WORKDIR /go ADD . /go/ EXPOSE 3000 CMD [\"./counter\"] Dockerfile æª”æ¡ˆä¸­æˆ‘å€‘éœ€è¦æŒ‡å®š docker image å•Ÿå‹•æ™‚ç›´æ¥åŸ·è¡Œæˆ‘å€‘é€é GOOS=linux GOARCH=amd64 go build -o counter ç·¨è­¯å‡ºä¾†çš„åŸ·è¡Œæª” counter* åŸ·è¡Œè‡ªè¨‚ç¾© npm scripts $ npm run docker æˆåŠŸåŸ·è¡Œå¾Œæœƒè‡ªå‹•å»ºç«‹ docker image # list docker image $ docker images REPOSITORY TAG IMAGE ID CREATED SIZE username/counter v0.1.0 1771ddbe0a98 4 seconds ago 14.67 MB åŸ·è¡Œ docker image # run docker image $ docker run -d --name counter -p 3000:3000 username/counter:v0.1.0 f8394fec624a4e3b989f7ce48857f64178e39aa8a5195f39e2d0d5a6572ee55c # docker ps $ dps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES f8394fec624a username/counter:v0.1.0 \"./counter\" 2 seconds ago Up 1 seconds 0.0.0.0:3000-\u003e3000/tcp counter ","date":"2016-08-04","objectID":"/posts/golang-serve-static-site/:2:0","tags":["golang","webpack"],"title":"golang serving a single page application","uri":"/posts/golang-serve-static-site/"},{"categories":null,"content":"repo Demo example cage1016/golang-serve-spa # clone repo $ git clone git@github.com:cage1016/golang-serve-spa.git # npm install package $ npm install # ä¸€éµå»ºç«‹ docker image $ npm docker # docker run $ docker run -d --name counter -p 3000:3000 username/counter:v0.1.0 ","date":"2016-08-04","objectID":"/posts/golang-serve-static-site/:3:0","tags":["golang","webpack"],"title":"golang serving a single page application","uri":"/posts/golang-serve-static-site/"},{"categories":null,"content":"å¦‚ä½•åœ¨ django-oscar ä½¿ç”¨è‡ªå·±çš„ locale æª”æ¡ˆ","date":"2016-04-14","objectID":"/posts/django-oscar-i18n/","tags":["Python","Oscar","virtualenv","locale","i18n"],"title":"ç­†è¨˜ - django oscar i18n","uri":"/posts/django-oscar-i18n/"},{"categories":null,"content":"django-oscar æ˜¯ä¸€å€‹æ»¿å®Œæ•´çš„é–‹æºçš„ EC å°ˆæ¡ˆã€‚Oscar å…§å»º i18n æ˜¯ä½¿ç”¨ transifexï¼Œä¾ç…§ django-oscar çš„èªªæ˜ï¼Œç•¶ django-oscar é€²è¡Œ master çš„ç™¼ä½ˆæ™‚æ‰æœƒå»æ›´æ–°ç›¸é—œçš„ç¿»è­¯æª”æ¡ˆï¼Œå¦‚æœ i18n çš„æ›´æ–°é€Ÿåº¦æ²’æœ‰è¾¦æ³•ç¬¦åˆè‡ªå·±çš„éœ€æ±‚æœ‰äºŒç¨®æ–¹å¼ï¼Œ1)åŠ å…¥ transifex å°ˆæ¡ˆå¹«å¿™ç¿»è­¯ï¼Œåªæ˜¯ django-oscar çš„æ›´æ–°é€Ÿåº¦æ¯”è¼ƒæ…¢ 2)ä½¿ç”¨æœ¬åœ°çš„æª”æ¡ˆ ç›®å‰ django-oscar æ”¯æ´çš„ i18n â”œâ”€â”€ am_ET â”œâ”€â”€ ar â”œâ”€â”€ ar_SA â”œâ”€â”€ bg_BG â”œâ”€â”€ bn â”œâ”€â”€ bn_BD â”œâ”€â”€ ca â”œâ”€â”€ cmn â”œâ”€â”€ cs â”œâ”€â”€ cs_CZ â”œâ”€â”€ da â”œâ”€â”€ de â”œâ”€â”€ el_GR â”œâ”€â”€ en â”œâ”€â”€ en_US â”œâ”€â”€ es â”œâ”€â”€ es_AR â”œâ”€â”€ es_CL â”œâ”€â”€ et â”œâ”€â”€ eu â”œâ”€â”€ fa â”œâ”€â”€ fa_IR â”œâ”€â”€ fi â”œâ”€â”€ fr â”œâ”€â”€ he â”œâ”€â”€ hi â”œâ”€â”€ hi_IN â”œâ”€â”€ id â”œâ”€â”€ it â”œâ”€â”€ ja â”œâ”€â”€ ka_GE â”œâ”€â”€ ko â”œâ”€â”€ lt â”œâ”€â”€ nb_NO â”œâ”€â”€ nl â”œâ”€â”€ pl â”œâ”€â”€ pt_BR â”œâ”€â”€ pt_PT â”œâ”€â”€ ro_RO â”œâ”€â”€ ru â”œâ”€â”€ ru_RU â”œâ”€â”€ sk â”œâ”€â”€ sk_SK â”œâ”€â”€ sv â”œâ”€â”€ sv_SE â”œâ”€â”€ th_TH â”œâ”€â”€ tr â”œâ”€â”€ tr_TR â”œâ”€â”€ uk â”œâ”€â”€ uk_UA â”œâ”€â”€ vi â”œâ”€â”€ zh â”œâ”€â”€ zh-Hant â”œâ”€â”€ zh_CN â”œâ”€â”€ zh_HK â”œâ”€â”€ zh_TW â””â”€â”€ zh_TW.Big5 django-oscar ä½¿ç”¨ i18n çš„è¨­å®šï¼Œå¦‚æœéœ€è¦ä½¿ç”¨æœ¬åœ°çš„ Locale æª”æ¡ˆï¼Œéœ€è¦å¦å¤–æŒ‡å®š LOCALE_PATHS settings.py ########## GENERAL CONFIGURATION # See: https://docs.djangoproject.com/en/dev/ref/settings/#time-zone TIME_ZONE = 'Asia/Taipei' # See: https://docs.djangoproject.com/en/dev/ref/settings/#language-code LANGUAGE_CODE = 'en-us' # Includes all languages that have \u003e50% coverage in Transifex # Taken from Django's default setting for LANGUAGES gettext_noop = lambda s: s LANGUAGES = ( ('en-us', gettext_noop('English (United States)')), ('zh-cn', gettext_noop('Simplified Chinese')), ('zh-tw', gettext_noop('Chinese (Taiwan)')), ) # Locale Path LOCALE_PATHS = ( normpath(join(DJANGO_ROOT, 'locale')), ) # See: https://docs.djangoproject.com/en/dev/ref/settings/#site-id SITE_ID = 1 # See: https://docs.djangoproject.com/en/dev/ref/settings/#use-i18n USE_I18N = True # See: https://docs.djangoproject.com/en/dev/ref/settings/#use-l10n USE_L10N = True # See: https://docs.djangoproject.com/en/dev/ref/settings/#use-tz USE_TZ = True ########## END GENERAL CONFIGURATION åœ¨å»ºç«‹è‡ªå·±çš„ django-oscar EC å•†åŸæ™‚æ˜¯ä½¿ç”¨ pip install django-oscar ä¾†å®‰è£ï¼Œæ‰€ä»¥è¦é‡è£½æ‰€æœ‰ django-oscar çš„ç¿»è­¯ message æ™‚å°±å¿…éœ€å»ºç«‹ $PATH_TO_OSCAR çš„ symlink, æŒ‡å®š symlink ä¹‹å¾ŒåŸ·è¡Œ python ./manage.py makemessages æ‰æœƒåˆ° django-oscar env çš„ç›®éŒ„æŠŠç›¸é—œçš„ message å­—ä¸²å»ºç«‹æˆ *.go æª” ","date":"2016-04-14","objectID":"/posts/django-oscar-i18n/:0:0","tags":["Python","Oscar","virtualenv","locale","i18n"],"title":"ç­†è¨˜ - django oscar i18n","uri":"/posts/django-oscar-i18n/"},{"categories":null,"content":"Simple go through ä½¿ç”¨ generator-django-oscar-app å¿«é€Ÿå»ºç«‹å°ˆæ¡ˆã€‚ä¾ç…§é€£çµçš„æ“ä½œæ–¹å¼å®Œæˆå¾Œ(æ‡‰è©²å·²ç¶“å»ºç«‹å°ˆæ¡ˆç›®éŒ„ï¼Œvirtualenv) åˆ‡æ›è‡³å·¥ä½œç›®éŒ„ (env) cd {project_path}/sandbox å»ºç«‹ i18n åŠ locale ç›®éŒ„ (env) mkdir i18n locale link virtualenv django-oscar source (env) ln -s ~/.virtualenvs/{your-ven-name}/lib/python2.7/site-packages/oscar i18n/oscar ä½¿ç”¨ makemessage å»ºç«‹ zh_TW locale æª” # django-oscar locale: sandbox/i18n/oscar/locale # project locale: sandbox/locale (env) python manage.py makemessages --symlinks --locale=zh_TW ç·¨è­¯ messages (env) python manage.py compilemessages ","date":"2016-04-14","objectID":"/posts/django-oscar-i18n/:1:0","tags":["Python","Oscar","virtualenv","locale","i18n"],"title":"ç­†è¨˜ - django oscar i18n","uri":"/posts/django-oscar-i18n/"},{"categories":null,"content":"å¦‚ä½•åˆ©ç”¨ virtualenv, virtualenvwrapper, requirements.txt, linkenv, link_pip å¿«é€Ÿå»ºç½® Google App Engine - Python é–‹ç™¼ç’°å¢ƒ","date":"2016-03-28","objectID":"/posts/gae-link-pip-helper/","tags":["Shell","Python","GAE","pip","virtualenv"],"title":"gae link pip helper","uri":"/posts/gae-link-pip-helper/"},{"categories":null,"content":"Python çš„ç¤¾ç¾¤éå¸¸æ´»èºæœ‰éå¸¸å¤šå¥½ç”¨çš„å¥—ä»¶å¯ä»¥ä½¿ç”¨ï¼Œä¹Ÿæœ‰ pip çš„å¥—ä»¶ç®¡ç†ç¨‹å¼ä¾†è®“é–‹ç™¼è€…ç®¡ç†å¥—ä»¶å‡ç´šã€ç‰ˆæ§ç­‰å•é¡Œ ","date":"2016-03-28","objectID":"/posts/gae-link-pip-helper/:0:0","tags":["Shell","Python","GAE","pip","virtualenv"],"title":"gae link pip helper","uri":"/posts/gae-link-pip-helper/"},{"categories":null,"content":"virtualenv ä¸€èˆ¬åœ¨ç™¼è€… Python ç›¸é—œçš„å°ˆæ¡ˆæœƒå¼•å…¥ virtualenv çš„æ¦‚å¿µä¾†å€éš”å¤šå°ˆæ¡ˆç™¼é–‹å¥—ä»¶çš„ç›¸ä¾å•é¡Œã€‚å¦‚æœæ²’æœ‰å°å…¥ virtualenv æ™‚ pip install æœƒç›´æ¥æŠŠå¥—ä»¶å®‰è£åœ¨å…¨åŸŸç’°å¢ƒï¼Œå°ˆæ¡ˆä¹Ÿè¨±ä¹Ÿå¼•ç”¨æŸäº›å¥—ä»¶ç‰¹å®šçš„ç‰ˆæ¬¡ï¼Œæ­¤ç¨®æ–¹å¼æœƒé€ æˆé–‹ç™¼ä¸Šçš„æ“¾å›°ã€‚åŸºæœ¬ä¸Šéƒ½æœƒå»ºè­°ä½¿ç”¨ virtualenv ","date":"2016-03-28","objectID":"/posts/gae-link-pip-helper/:1:0","tags":["Shell","Python","GAE","pip","virtualenv"],"title":"gae link pip helper","uri":"/posts/gae-link-pip-helper/"},{"categories":null,"content":"virtualenvwrapper virtualenvwrapper æ˜¯ virtualenv çš„åŠ å¼·ç‰ˆã€‚å®ƒæœƒæŠŠå¥—ä»¶å®‰è£çš„ç›®éŒ„çµ±ä¸€æ”¶åˆ° ${HOME}/.virtualenvs ä¸‹é›†ä¸­ç®¡ç†ï¼Œä¹Ÿæä¾›æ›´æ–¹ä¾¿å»ºç«‹ã€ç§»é™¤ã€åˆ‡æ› virtualenv çš„æŒ‡ä»¤ ","date":"2016-03-28","objectID":"/posts/gae-link-pip-helper/:2:0","tags":["Shell","Python","GAE","pip","virtualenv"],"title":"gae link pip helper","uri":"/posts/gae-link-pip-helper/"},{"categories":null,"content":"GAE åœ¨é–‹ç™¼ Google App Engine - Python çš„æ™‚å€™ï¼Œåœ¨åšç”¨ç¬¬ä¸‰æ–¹å¥—ä»¶çš„æ™‚å€™æœƒæœ‰ä¸€äº›é™åˆ¶ (Libraries in Python 2.7 - Python â€” Google Cloud Platform)ï¼ŒGoogle App Engine çš„åŸ·è¡Œç’°å¢ƒä¸­æœ‰æ”¯æ´äº†ä¸€äº›ç¬¬ä¸‰æ–¹å¥—ä»¶ï¼Œå¼•ç”¨çš„æ–¹å¼æ˜¯ç›´æ¥åœ¨å°ˆæ¡ˆçš„ app.yaml ä¸­æŒ‡å®šå³å¯ libraries: - name: PIL version: \"1.1.7\" - name: webob version: \"1.1.1\" - name: jinja2 version: latest è€Œ Google App Engine çš„åŸ·è¡Œç’°å¢ƒä¸­æ²’æœ‰æ”¯æ´çš„ç¬¬ä¸‰æ–¹å¥—ä»¶å‰‡éœ€è¦å°‡å¼•ç”¨åˆ°çš„ç¬¬ä¸‰æ–¹å¥—ä»¶ç¨‹å¼æºå§‹ç¢¼ä»¥æª”æ¡ˆæ–¹å¼ä¸€åŒä¸Šå‚³åˆ° Google App Engine å¹³å°æ‰å¯ä»¥æ­£å¸¸åŸ·è¡Œã€‚ä¸€èˆ¬é€²è¡Œ pip å¥—ä»¶å®‰è£æ™‚æœƒè£åœ¨ç•¶å‰çš„ virtualenv æˆ– å…¨åŸŸçš„ç’°å¢ƒè®Šæ•¸ä¸­ï¼Œä½†æ˜¯æ­é… GAE æŒ‡å‰‡éœ€è¦ä½¿ç”¨ pip install -r requirements.txt -t lib å¥—ä»¶è£åœ¨ç•¶ç„¶ç›®éŒ„ lib ä¸¦åœ¨ appengine_config.py ä¸­å°‡ lib ç›®éŒ„åŠ åˆ° sys path ä¸­ import os, sys sys.path.insert(0, os.path.join(os.path.dirname(__file__), 'lib')) ","date":"2016-03-28","objectID":"/posts/gae-link-pip-helper/:3:0","tags":["Shell","Python","GAE","pip","virtualenv"],"title":"gae link pip helper","uri":"/posts/gae-link-pip-helper/"},{"categories":null,"content":"How to use Google App Engine with virtualenv | Vita Smid ~ Zephyrus | Mathematics, philosophy, code, travel and everything in between. æ–‡ç« ä½œè€…é–‹ç™¼äº†ä¸€å€‹ linkenv çš„å¥—ä»¶å¯ä»¥åˆ©ç”¨æŒ‡ä»¤å¿«é€Ÿç”¨ symbol link å»ºç«‹ virtualenv åˆ°æœ¬åœ°çš„è³‡æ–™å¤¾ã€‚ ","date":"2016-03-28","objectID":"/posts/gae-link-pip-helper/:4:0","tags":["Shell","Python","GAE","pip","virtualenv"],"title":"gae link pip helper","uri":"/posts/gae-link-pip-helper/"},{"categories":null,"content":"link pip helper Shell $ virtualenv env $ source bin/env/activate (env)$ pip install djangoappengine six ... (env)$ pip install -r requirements.txt ... å› ç‚º How to use Google App Engine with virtualenv | Vita Smid ~ Zephyrus | Mathematics, philosophy, code, travel and everything in between. æ–‡ç« æåŠçš„æ–¹å¼åªæœ‰ä½¿ç”¨åˆ° virtualenv ä¸¦æ²’æœ‰ä½¿ç”¨ virtualenvwrapperï¼Œæ‰€ä»¥æ¯æ¬¡æ–°å°ˆæ¡ˆæ­¥é©Ÿé‡ç½®å°±æœƒèŠ±æ¯”è¼ƒå¤šçš„æ™‚é–“ã€‚ link pip.sh #!/usr/bin/env bash # [How to use Google App Engine with virtualenv | Vita Smid ~ Zephyrus | # Mathematics, philosophy, code, travel and everything in between.](http://ze.phyr.us/appengine-virtualenv/) # virtualenv pip package link helper # rm -rf gaenv # linkenv $VIRTUAL_ENV/lib/python2.7/site-packages gaenv # Default linker foler DEFAULT_LINK_FOLDER=gaenv if [[ $# -eq 0 ]] then LIB=$DEFAULT_LINK_FOLDER else LIB=$1 fi # relink rm -rf $DEFAULT_LINK_FOLDER rm -rf $LIB linkenv $VIRTUAL_ENV/lib/python2.7/site-packages $LIB ç‚ºäº†æ¸›å°‘ Google App Engine å°ˆæ¡ˆå»ºç«‹çš„æ™‚é–“ï¼Œå°‡ä¸Šè¿°çš„ shell åŠ å…¥ .bash_profile æ­é… virtualenv virtualenvwrapper requirements.txt å°±å¯ä»¥ç°¡æ˜“çš„å»ºç½®é–‹ç™¼ç’°. ","date":"2016-03-28","objectID":"/posts/gae-link-pip-helper/:5:0","tags":["Shell","Python","GAE","pip","virtualenv"],"title":"gae link pip helper","uri":"/posts/gae-link-pip-helper/"},{"categories":null,"content":"Quick tutorial Github repo: cage1016/link-pip-helper # git clone repo $ git clone git@github.com:cage1016/link-pip-helper.git Cloning into 'link-pip-helper'... remote: Counting objects: 7, done. remote: Compressing objects: 100% (5/5), done. remote: Total 7 (delta 0), reused 7 (delta 0), pack-reused 0 Receiving objects: 100% (7/7), done. Checking connectivity... done. # switch to link-pip-helper $ cd link-pip-helper/ # åˆ©ç”¨ virtualenvwrapper å»ºç«‹ virtualenv $ mkvirtualenv link-pip-helper-tutorial New python executable in /Users/{HOME}/.virtualenvs/link-pip-helper-tutorial/bin/python2.7 Also creating executable in /Users/{HOME}/.virtualenvs/link-pip-helper-tutorial/bin/python Please make sure you remove any previous custom paths from your /Users/{HOME}/.pydistutils.cfg file. Installing setuptools, pip, wheel...done. virtualenvwrapper.user_scripts creating /Users/{HOME}/.virtualenvs/link-pip-helper-tutorial/bin/predeactivate virtualenvwrapper.user_scripts creating /Users/{HOME}/.virtualenvs/link-pip-helper-tutorial/bin/postdeactivate virtualenvwrapper.user_scripts creating /Users/{HOME}/.virtualenvs/link-pip-helper-tutorial/bin/preactivate virtualenvwrapper.user_scripts creating /Users/{HOME}/.virtualenvs/link-pip-helper-tutorial/bin/postactivate virtualenvwrapper.user_scripts creating /Users/{HOME}/.virtualenvs/link-pip-helper-tutorial/bin/get_env_details # pip å®‰è£ç›¸ä¾å¥—ä»¶ $ pip install -r requirements.txt Collecting google-api-python-client==1.4.0 (from -r requirements.txt (line 1)) .... # åŸ·è¡Œ shell (ä½ å¯ä»¥å°‡ link pip.sh å…§å®¹ export æˆä»»ä½• function å) $ link_pip lib # æœ¬åœ°åŸ·è¡Œ Google App Engine $ dev_appserver.py . ","date":"2016-03-28","objectID":"/posts/gae-link-pip-helper/:6:0","tags":["Shell","Python","GAE","pip","virtualenv"],"title":"gae link pip helper","uri":"/posts/gae-link-pip-helper/"},{"categories":null,"content":"åœ¨ä½¿ç”¨ GAE command line tools ä¸Šå‚³å°ˆæ¡ˆè‡³ appengine.google.com ä¸Šæ™‚ï¼Œæœƒé‡åˆ° HTTP Error 403: Forbidden Unexpected HTTP status 403. Aborting çš„è¨Šæ¯ï¼Œå¦‚ä½•è§£æ±ºå•é¡Œã€‚","date":"2016-03-10","objectID":"/posts/gae-appcfg-update-403/","tags":["Python","GAE","appcfg"],"title":"gae appcfg update 403","uri":"/posts/gae-appcfg-update-403/"},{"categories":null,"content":"ç•¶ GAE application æœ¬åœ°é–‹ç™¼åˆ°ä¸€å€‹éšæ®µæ™‚ï¼Œå°±æœƒé–‹å§‹æƒ³è¦ä¸Šå‚³è‡³ appengine.google.com é€²è¡Œç·šä¸Šçš„æ¸¬è©¦ï¼Œé€™æ™‚å€™ä¾¿æœƒä½¿ command line å·¥ å…·ä¾†ä¸Šå‚³å°ˆæ¡ˆ $ appcfg.py update default/app.yaml ownership/app.yaml 10:46 AM Host: appengine.google.com 10:46 AM Application: \u003cyour-application-id\u003e; version: 1 10:46 AM Starting update of app: \u003cyour-application-id\u003e, version: 1 10:46 AM Getting current resource limits. 2016-03-10 10:46:17,616 ERROR appcfg.py:2396 An error occurred processing file '': HTTP Error 403: Forbidden Unexpected HTTP status 403. Aborting. Error 403: --- begin server output --- You do not have permission to modify this app (app_id=u's~\u003cyour-application-id\u003e'). --- end server output --- é‡æ–°é€²è¡Œ gcloud oauth login \u0026 gcloud project set \u003cyour-application-id\u003e æª¢æŸ¥ gcloud config $ gcloud config list Your active configuration is: [default] [app] suppress_change_warning = true [compute] region = asia-east1 zone = asia-east1-b [core] account = \u003cyour-account\u003e disable_usage_reporting = False project = \u003cyour-default-project-id\u003e é‚„æ˜¯é‡åˆ°åŒæ¨£çš„å•é¡Œï¼ŒHTTP Error 403: Forbidden Unexpected HTTP status 403. Abortingã€‚ è¦è§£æ±ºé€™å€‹å•é¡Œçš„æ–¹æ³•æœ‰äºŒç¨® --no_cookies Do not save authentication cookies to local disk. ç›´æ¥åˆªé™¤ .appcfg_cookies \u0026 .appcfg_oauth2_tokens ä¸¦é‡æ–°é€²è¡Œ gcloud oauth login $ la | grep .appcfg_ -rw------- 1 cage staff 960 Jul 8 2015 .appcfg_cookies -rw-r--r-- 1 cage staff 43 Nov 15 13:01 .appcfg_nag -rw------- 1 cage staff 774 Mar 10 10:33 .appcfg_oauth2_tokens ","date":"2016-03-10","objectID":"/posts/gae-appcfg-update-403/:0:0","tags":["Python","GAE","appcfg"],"title":"gae appcfg update 403","uri":"/posts/gae-appcfg-update-403/"},{"categories":null,"content":"ç°¡å–®èªªæ˜å¦‚ä½•å¿«é€Ÿå»ºç«‹ä¸€å€‹ Django å°ˆæ¡ˆåŠæ­é… Virtualenv, PyCharm","date":"2015-11-01","objectID":"/posts/django-getting-started/","tags":["Python","Django","twoscoops","PyCharm"],"title":"django getting started","uri":"/posts/django-getting-started/"},{"categories":null,"content":"Django Quick Getting Started pip virtualenv virtualenvwrapper Django twoscoops/django-twoscoops-project PyCharm ç°¡å–®èªªæ˜å¦‚ä½•å¿«é€Ÿå»ºç«‹ä¸€å€‹ Django å°ˆæ¡ˆåŠæ­é… Virtualenv, PyCharm ","date":"2015-11-01","objectID":"/posts/django-getting-started/:0:0","tags":["Python","Django","twoscoops","PyCharm"],"title":"django getting started","uri":"/posts/django-getting-started/"},{"categories":null,"content":"Virtualenv Python ç¤¾ç¾¤æ“æœ‰éå¸¸å¤šçš„å¥½ç”¨çš„å¥—ä»¶ï¼Œæ‰€ä»¥ pip çš„å¥—ä»¶ç®¡ç†ç¨‹å¼å°±è®Šçš„éå¸¸çš„å¥½ç”¨ã€‚ä½†æ˜¯é€™æ™‚å€™å°±æœ‰å‡ºç¾å¦ä¸€å€‹å•é¡Œã€‚ä¸åŒå°ˆæ¡ˆæ‰€éœ€è¦å‡½æ•¸åº«å¯èƒ½ä¸ç›¡ç›¸åŒï¼Œæ‰€ä»¥ Virtualenv å¯ä»¥éš”é›¢å‡½æ•¸åº«éœ€æ±‚ä¸åŒçš„å°ˆæ¡ˆï¼Œè®“å®ƒå€‘ä¸æœƒäº’ç›¸å½±éŸ¿ã€‚ åœ¨æ²’æœ‰æ¬Šé™çš„æƒ…æ³ä¸‹å®‰è£æ–°å¥—ä»¶ ä¸åŒå°ˆæ¡ˆå¯ä»¥ä½¿ç”¨ä¸åŒç‰ˆæœ¬çš„ç›¸åŒå¥—ä»¶ å¥—ä»¶ç‰ˆæœ¬å‡ç´šæ™‚ä¸æœƒå½±éŸ¿å…¶ä»–å°ˆæ¡ˆ # install virtualenv (æœƒå®‰è£åœ¨å…¨åŸŸç’°å¢ƒä¸‹) $ pip install virtualenv # å»ºç«‹ä¸€å€‹ virtualenv, å»ºç«‹å®Œæˆå¾Œæœƒåœ¨ quick_getting_startedæ–°å¢ä¸€å€‹ env_QGS çš„ç›®éŒ„ $ cd ~/ \u0026\u0026 mkdir quick_getting_started $ virtualenv env_QGS # åŸ·è¡Œ Virtualenv, åŸ·è¡Œå®Œæœƒå† termianl `$` è™Ÿå‰é¢å‡ºç¾ virtualenv çš„åç¨± $ source env_QGS/bin/activateds (env_QGS) $ # é€€å‡º virtualenv (env_QGS) $ deactivate Tips: Virtualenv æ–¹ä¾¿è®“æˆ‘éš”é›¢äº†ä¸åŒå°ˆæ¡ˆä¸‹çš„å‡½å¼åº«ï¼Œä½†æ˜¯æˆ‘å€‘å»ºç«‹å‡ºä¾†çš„ env_QGS (virtualenv ç›®éŒ„) æœƒæ•£è½åœ¨å„åœ°ï¼Œåœ¨ç®¡ç†ä¸Šé¢é‚„æ˜¯æœ‰ä¸€é»é»éº»ç…©ã€‚é€™æ™‚å€™å°±æœ‰å¦ä¸€å€‹ virtualenvwrapper å¹«æˆ‘å€‘è§£æ±ºé€™ä¸€å€‹å•é¡Œ virtualenvwrapper æ˜¯ä¸€å€‹ virtualenv çš„å¼·åŠ ç‰ˆï¼Œæ–¹ä¾¿æˆ‘å€‘ç®¡ç†æœ‰çš„ virtualenv å°‡æ‰€æœ‰çš„è™›æ“¬ç’°å¢ƒæ•´åˆåœ¨ä¸€å€‹ç›®éŒ„ä¸‹ã€‚ ç®¡ç†ï¼ˆæ–°å¢ã€ç§»é™¤ã€è¤‡è£½ï¼‰æ‰€æœ‰çš„è™›æ“¬ç’°å¢ƒã€‚ å¯ä»¥ä½¿ç”¨ä¸€å€‹å‘½ä»¤åˆ‡æ›è™›æ“¬ç’°å¢ƒã€‚ Tab è£œå…¨è™›æ“¬ç’°å¢ƒçš„åå­—ã€‚ æ¯å€‹æ“ä½œéƒ½æä¾›å…è¨±ä½¿ç”¨è€…è‡ªè¨‚çš„ hooksã€‚ å¯æ’°å¯«å®¹æ˜“åˆ†äº«çš„ extension plugin ç³»çµ±ã€‚ æ‰€ä»¥å‰›å‰›çš„æ“ä½œæ­¥é©Ÿå°±å¯ä»¥å¾—åˆ°ç°¡åŒ– # åˆ—å‡ºæ‰€æœ‰çš„ virtualenv. æ‰€æœ‰çš„ virtualenv é›†ä¸­ç®¡ç†(~/.virtualenvs/) $ workon djago-oscar-api-test django-oscar-paypal django-oscar_demo django-sample-app github_flask_oauth2 mysite oauth2app oscar .... # å»ºç«‹ virtualenv env_QGS, å»ºç«‹å®Œæˆå¾Œæœƒè‡ªå‹•å¹«ä½ å•Ÿå‹•(è¶…æ£’der) $ mkvirtualenv env_QGS New python executable in env_QGS/bin/python Installing setuptools, pip, wheel...done. virtualenvwrapper.user_scripts creating /Users/cage/.virtualenvs/env_QGS/bin/predeactivate virtualenvwrapper.user_scripts creating /Users/cage/.virtualenvs/env_QGS/bin/postdeactivate virtualenvwrapper.user_scripts creating /Users/cage/.virtualenvs/env_QGS/bin/preactivate virtualenvwrapper.user_scripts creating /Users/cage/.virtualenvs/env_QGS/bin/postactivate virtualenvwrapper.user_scripts creating /Users/cage/.virtualenvs/env_QGS/bin/get_env_details (env_QGS) $ ","date":"2015-11-01","objectID":"/posts/django-getting-started/:1:0","tags":["Python","Django","twoscoops","PyCharm"],"title":"django getting started","uri":"/posts/django-getting-started/"},{"categories":null,"content":"Django Djangoæ˜¯ä¸€å€‹é–‹æ”¾åŸå§‹ç¢¼çš„Webæ‡‰ç”¨æ¡†æ¶ï¼Œç”±Pythonå¯«æˆã€‚æ¡ç”¨äº†MVCçš„è»Ÿé«”è¨­è¨ˆæ¨¡å¼ï¼Œå³æ¨¡å‹Mï¼Œè¦–åœ–Vå’Œæ§åˆ¶å™¨Cã€‚å®ƒæœ€åˆæ˜¯è¢«é–‹ç™¼ä¾†ç”¨æ–¼ç®¡ç†å‹å€«æ–¯å‡ºç‰ˆé›†åœ˜æ——ä¸‹çš„ä¸€äº›ä»¥æ–°èå…§å®¹ç‚ºä¸»çš„ç¶²ç«™çš„ã€‚ä¸¦æ–¼2005å¹´7æœˆåœ¨BSDæˆæ¬Šæ¢æ¬¾ä¸‹é‡‹å‡ºã€‚é€™å¥—æ¡†æ¶æ˜¯ä»¥æ¯”åˆ©æ™‚çš„å‰æ™®è³½çˆµå£«å‰ä»–æ‰‹Django Reinhardtä¾†å‘½åçš„ã€‚Django - ç¶­åŸºç™¾ç§‘ï¼Œè‡ªç”±çš„ç™¾ç§‘å…¨æ›¸ # ä½¿ç”¨ mkvirtualenv env_QGS, åˆ—å‡ºé è¨­å®‰è£ Python å‡½å¼åº« (env_QGS) $ pip list pip (7.1.2) setuptools (18.2) wheel (0.24.0) # å®‰è£ Django, ç›®å‰æœ€æ–°çš„ç‰ˆæœ¬ç‚º 1.8.5 (env_QGS) $ pip django Collecting django Using cached Django-1.8.5-py2.py3-none-any.whl Installing collected packages: django Successfully installed django-1.8.5 # å®‰è£å®Œ Django å¾Œ, æœƒè‡ªå¸¶ `django-admin.py` æ–¹ä¾¿æˆ‘å€‘é€²è¡Œ Django å°ˆæ¡ˆçš„å»ºç«‹åŠå…¶ä»–å°æ‡‰åŠŸèƒ½ (env_QGS) $ django-admin.py help Type 'django-admin.py help \u003csubcommand\u003e' for help on a specific subcommand. Available subcommands: [django] check compilemessages createcachetable dbshell diffsettings dumpdata flush inspectdb loaddata makemessages makemigrations migrate runfcgi runserver shell showmigrations sql sqlall sqlclear sqlcustom sqldropindexes sqlflush sqlindexes sqlmigrate sqlsequencereset squashmigrations startapp startproject syncdb test testserver validate # å»ºç«‹ç¬¬ä¸€å€‹ Django å°ˆæ¡ˆ (env_QGS) $ django-admin.py startproject my_site # åˆ—å‡ºä½¿ç”¨ startproject my_site å¾Œçš„æª”æ¡ˆæ¶æ§‹ (env_QGS) $ tree . â””â”€â”€ my_site # django project root â”œâ”€â”€ manage.py â””â”€â”€ my_site # django app root â”œâ”€â”€ __init__.py â”œâ”€â”€ settings.py â”œâ”€â”€ urls.py â””â”€â”€ wsgi.py # åŸºæœ¬ä¸Šä½¿ç”¨ django-admon å»ºç«‹å®Œå¾Œå°±å¯ä»¥æ¥ç›´åŸ·è¡Œ (env_QGS) $ python mysite/manage.py runserver Tips: ä½¿ç”¨ django-admin.py å¯ä»¥å¿«é€Ÿçš„å»ºç«‹å°ˆæ¡ˆï¼Œä½†æ˜¯åœ¨å°ˆæ¡ˆé€²è¡Œé‚„æ˜¯æœƒé‡åˆ°ç™¼é–‹/æ¸¬è©¦/éƒ¨ç½²ç­‰åŸ·è¡Œéšæ®µï¼Œå†é€™äº›éšæ®µæœƒé‡åˆ°å‡½å¼åº«ä¸åŒ(requirments.txt), è¨­å®šæª”é…ç½®ä¹Ÿæœƒä¸åŒ(settings)ã€‚ç©ºå°ˆæ¡ˆå»ºç«‹å†æ‰‹å‹•èª¿æ•´çš„æ–¹å¼å°±æœƒæ¯”è¼ƒç´¯ï¼Œæ‰€ä»¥åœ¨å°ˆæ¡ˆå»ºç«‹æ™‚å°±å¼•ç”¨ twocoops template ä¾†åŠ å¿«å°ˆæ¡ˆæª”æ¡ˆæ¶æ§‹çš„é…ç½® ","date":"2015-11-01","objectID":"/posts/django-getting-started/:2:0","tags":["Python","Django","twoscoops","PyCharm"],"title":"django getting started","uri":"/posts/django-getting-started/"},{"categories":null,"content":"twoscoops Two Scoops Press: Making Python and Django as fun as ice cream twocoops æ˜¯ä¸€æœ¬æ›¸ï¼Œé€™æœ¬æ›¸æ•™ä½ å¦‚ä½•æœ€ä½³å¯¦è¸ Django 1.8ï¼Œå¦‚ä¸Šä¸€ç¯€æçš„å•é¡Œ(multiple requirements.txtã€settings)ç­‰é…ç½®æ–¹å¼ # æˆ‘å€‘æ¥è‘—ä¸Šç¯€çš„é€²åº¦ (~/tmp/quick_gettting_started) (env_QGS) $ ls my_site # å‰›å‰›å»ºç«‹çš„ my_site å°ˆæ¡ˆ # ä½¿ç”¨ twosoops template (env_QGS) $ django-admin.py startproject --template=https://github.com/twoscoops/django-twoscoops-project/archive/master.zip --extension=py,rst,html mysite2 # æ¯”è¼ƒä¸€ä¸‹ twoscoops å¹«æˆ‘ä½œäº†ä»€éº¼ $ tree . â”œâ”€â”€ my_site # my_site django project root â”‚Â â”œâ”€â”€ db.sqlite3 â”‚Â â”œâ”€â”€ manage.py â”‚Â â””â”€â”€ my_site # my_site django app â”‚Â â”œâ”€â”€ __init__.py â”‚Â â”œâ”€â”€ settings.py â”‚Â â”œâ”€â”€ urls.py â”‚Â â”œâ”€â”€ wsgi.py â””â”€â”€ mysite2 # mysite 2 repo level (å¦‚æœæœ‰ä½¿ç”¨ git) â”œâ”€â”€ CONTRIBUTORS.txt â”œâ”€â”€ LICENSE.txt â”œâ”€â”€ README.rst â”œâ”€â”€ docs # django docs (sphinx) â”‚Â â”œâ”€â”€ Makefile â”‚Â â”œâ”€â”€ __init__.py â”‚Â â”œâ”€â”€ conf.py â”‚Â â”œâ”€â”€ deploy.rst â”‚Â â”œâ”€â”€ index.rst â”‚Â â”œâ”€â”€ install.rst â”‚Â â””â”€â”€ make.bat â”œâ”€â”€ mysite2 # mysite2 django project root (åŒ my_site django project root level) â”‚Â â”œâ”€â”€ manage.py â”‚Â â”œâ”€â”€ mysite2 # mysite2 django app root (åŒ my_site django app root level) â”‚Â â”‚Â â”œâ”€â”€ __init__.py â”‚Â â”‚Â â”œâ”€â”€ settings # multiple settings root â”‚Â â”‚Â â”‚Â â”œâ”€â”€ __init__.py â”‚Â â”‚Â â”‚Â â”œâ”€â”€ base.py â”‚Â â”‚Â â”‚Â â”œâ”€â”€ local.py â”‚Â â”‚Â â”‚Â â”œâ”€â”€ production.py â”‚Â â”‚Â â”‚Â â””â”€â”€ test.py â”‚Â â”‚Â â”œâ”€â”€ urls.py â”‚Â â”‚Â â””â”€â”€ wsgi.py â”‚Â â”œâ”€â”€ static â”‚Â â”‚Â â”œâ”€â”€ css â”‚Â â”‚Â â”œâ”€â”€ fonts â”‚Â â”‚Â â””â”€â”€ js â”‚Â â””â”€â”€ templates â”‚Â â”œâ”€â”€ 404.html â”‚Â â”œâ”€â”€ 500.html â”‚Â â””â”€â”€ base.html â”œâ”€â”€ requirements # multiple requirements root â”‚Â â”œâ”€â”€ base.txt â”‚Â â”œâ”€â”€ local.txt â”‚Â â”œâ”€â”€ production.txt â”‚Â â””â”€â”€ test.txt â””â”€â”€ requirements.txt Tips: åœ¨åŸ·è¡Œ mysite2 ä¹‹å‰éœ€å°å»ºç«‹å‡ºä¾†çš„æª”æ¡ˆé€²è¡Œä¸€äº›ä¿®æ”¹(å› ç‚ºé€™å€‹ template æ˜¯é‡å° Django 1.6ï¼Œæˆ‘å€‘æƒ³è¦ä½¿ç”¨ Django 1.8.5 æ‰€ä»¥å¿…ä¿®é€²è¡Œä¿®æ­£) requirements mysite2/requirements/base.txt : Django==1.6.5 â€“\u003e Django==1.8.5 mysite2/requirements/local.txt : django-debug-toolbar==1.2.1 â€“\u003e django-debug-toolbar==1.4 mysite2/mysite2/mysite2/settings base.py mark line 29 # TEMPLATE_DEBUG = DEBUG mark line 246 # 'south', (south support \u003c Django 1.7) local.py mark line 15 # TEMPLATE_DEBUG = DEBUG # install package (env_QGS) $ cd mysite2 (env_QGS) $ pip install -r requirements/local.txt # database migrate (env_QGS) $ python mysite2/manage.py migrate Operations to perform: Synchronize unmigrated apps: staticfiles, debug_toolbar, messages Apply all migrations: admin, contenttypes, sites, auth, sessions Synchronizing apps without migrations: Creating tables... Running deferred SQL... Installing custom SQL... Running migrations: Rendering model states... DONE ... # åŸ·è¡Œ (env_QGS) $ python mysite2/manage.py runserver --settings=mysite2.settings.local ","date":"2015-11-01","objectID":"/posts/django-getting-started/:3:0","tags":["Python","Django","twoscoops","PyCharm"],"title":"django getting started","uri":"/posts/django-getting-started/"},{"categories":null,"content":"Pycharm Pycharm æ˜¯ä¸€å€‹å¾ˆå¥½ç”¨çš„ Python ç·¨è¼¯å™¨ï¼Œæˆ‘æœ€å–œæ­¡çš„éƒ¨ä»½æ˜¯å¯ä»¥æ‹¿ä¾† debugã€‚ä¸éåœ¨é–‹ç™¼ç’°å¢ƒä¸Šéœ€è¦è¨­å®šä¸€ä¸‹æ‰èƒ½é…åˆ virtualenv + twoscoops Project structure è¨­å®š mysite2(django project level) ç‚ºsource Project interpreter åŠ å…¥å·²ç¶“å»ºç«‹å¥½çš„ virtualenv è¨­å®š Django (Django project, settings, manage.py path) **è¨­å®š Run/Debug Configration ** Run with fly Enjoying debug mode ","date":"2015-11-01","objectID":"/posts/django-getting-started/:4:0","tags":["Python","Django","twoscoops","PyCharm"],"title":"django getting started","uri":"/posts/django-getting-started/"},{"categories":null,"content":"Reference Python çš„è™›æ“¬ç’°å¢ƒåŠå¤šç‰ˆæœ¬é–‹ç™¼åˆ©å™¨â”€Virtualenv èˆ‡ Pythonbrew - OpenFoundry ","date":"2015-11-01","objectID":"/posts/django-getting-started/:5:0","tags":["Python","Django","twoscoops","PyCharm"],"title":"django getting started","uri":"/posts/django-getting-started/"},{"categories":null,"content":"docker ç¤¾ç¾¤é–‹ç™¼çš„é€Ÿåº¦éå¸¸çš„å¿«é€Ÿï¼Œè€Œ docker 1.8 åˆæœ‰æ¯”è¼ƒå¤§çš„æ”¹è®Šã€‚boot2docker çš„åŠŸèƒ½è¢« docker-machine å–ä»£ï¼Œæ­¤ç¯‡æ–‡ç« ç®—æ˜¯è‡ªå·±ä½œä¸€å€‹è¨˜éŒ„","date":"2015-10-04","objectID":"/posts/docker-notebook-1/","tags":["docker","docker-machine","boot2docker","nginx"],"title":"[ç­†è¨˜] docker 1.8.2 rc","uri":"/posts/docker-notebook-1/"},{"categories":null,"content":"åœ¨ Mac os x é–‹ç™¼ dockerï¼Œå› ç‚º Mac ç„¡æ³•åŸç”Ÿæ”¯æ´ Dockerï¼Œæ‰€ä»¥åœ¨ docker 1.7 ä»¥å‰çš„ç‰ˆä¸Šå°±å¿…éœ€é€é boot2dockerï¼Œboot2docker æœƒåœ¨æœ¬æ©Ÿçš„ VirtualBox ä¸Šå®‰è£ä¸€å€‹è™›æ“¬æ©Ÿã€‚Docker client æ©Ÿä¹æ˜¯æ¥è¿‘åŸç”Ÿçš„ç‹€æ…‹è·‘åœ¨ Mac ä¸Šï¼Œåªä¸é Docker çš„ server æ˜¯è·‘åœ¨ boot2docker çš„è™›æ“¬æ©Ÿä¸­. picture: https://viget.com/extend/how-to-use-docker-on-os-x-the-missing-guide XD WARNING: The 'boot2docker' command line interface is officially deprecated. Please switch to Docker Machine (https://docs.docker.com/machine/) ASAP. Docker Toolbox (https://docker.com/toolbox) is the recommended install method. picture: https://docs.docker.com/installation/mac/#installation docker ç¤¾ç¾¤é–‹ç™¼çš„é€Ÿåº¦éå¸¸çš„å¿«é€Ÿï¼Œè€Œ docker 1.8 ä¹‹å¾Œå°±æœ‰äº†æ¯”è¼ƒå¤§çš„è®ŠåŒ–ã€‚å®‰è£çš„å·¥å…·ä¹Ÿç™¼ç”Ÿäº†è®ŠåŒ–ï¼Œ å¤šäº† Docker Toolboxï¼Œå®˜æ–¹çš„å®‰è£æ­¥é©Ÿ for Mac é»æˆ‘ å®‰è£å®Œäº† Docker Toolbox ä¹‹å¾Œï¼Œå¯ä»¥ç›´æ¥åœ¨ Launchpad ä¸Šå°‹æ‰¾ Docker Quickstart Terminalï¼ŒåŸ·è¡Œä¹‹å¾Œçµ‚ç«¯æ©Ÿæœƒé€²è¡Œ VirtualBox åˆå§‹åŒ–ï¼Œ ä¸¦å»ºç«‹ default çš„è™›æ“¬æ©Ÿ(åœ¨ 1.7 ç‰ˆæ™‚å‰‡æ˜¯åˆ©ç”¨ boot2docker ä¾†å»ºç«‹è™›æ“¬æ©Ÿï¼Œä¸¦æœƒåœ¨ VirtualBox ä¸­å»ºç«‹ä¸€å€‹åç‚º boot2docker-vm çš„è™›æ“¬æ©Ÿ)ã€‚ $ bash --login '/Applications/Docker/Docker Quickstart Terminal.app/Contents/Resources/Scripts/start.sh' Machine default already exists in VirtualBox. Starting machine default... Started machines may have new IP addresses. You may need to re-run the `docker-machine env` command. Setting environment variables for machine default... ## . ## ## ## == ## ## ## ## ## === /\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\\___/ === ~~~ {~~ ~~~~ ~~~ ~~~~ ~~~ ~ / ===- ~~~ \\______ o __/ \\ \\ __/ \\____\\_______/ docker is configured to use the default machine with IP 192.168.99.100 For help getting started, check out the docs at https://docs.docker.com æ¥è‘—åˆ©ç”¨ docker-machine ä¾†æŸ¥è©¢ç›®å‰é‚£äº› Docker host $ docker-machine ls NAME ACTIVE DRIVER STATE URL SWARM default * virtualbox Running tcp://192.168.99.100:2376 dev virtualbox Stopped ","date":"2015-10-04","objectID":"/posts/docker-notebook-1/:0:0","tags":["docker","docker-machine","boot2docker","nginx"],"title":"[ç­†è¨˜] docker 1.8.2 rc","uri":"/posts/docker-notebook-1/"},{"categories":null,"content":"Simple Demo æ¥ä¸‹ä¾†åˆ©ç”¨ç°¡å–®çš„æ­¥é©Ÿä¾†è©¦ç¯„åœ¨ Docker ä¸Šè·‘ä¸€å€‹ Nginx ä¸¦é€éè¨­å®šå°å¤–é–‹æ”¾ port è®“å¤–éƒ¨å¯ä»¥ç›´æ¥å­˜å–åˆ° Nginx çš„é é¢ # ç¢ºèª docker-machine env ç‹€æ…‹ (æˆ‘å€‘ä»¥é è¨­çš„ Docker host - default) $ docker-machine env default # å¿…è¦æ™‚é‡ç½®ä¸€ä¸‹ shell ç’°å¢ƒ # eval \"$(docker-machine env default)\" # å»ºç«‹è³‡æ–™å¤¾ $ mkdir web \u0026\u0026 cd web # åŸ·è¡Œä¸€å€‹ container # -d daemon: è¨­å®š container è·‘åœ¨èƒŒæ™¯åŸ·è¡Œ # -p expose port: è¨­å®š container çš„ port èˆ‡ docker host çš„ port mapping, Nginx é è¨­ port ç‚º 80 # --name æŒ‡å®šä¸€å€‹åå­çµ¦ container $ docker run -d -p 80:80 --name web nginx $ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES e6644e903590 nginx \"nginx -g 'daemon off\" 3 seconds ago Up 4 seconds 0.0.0.0:80-\u003e80/tcp, 443/tcp web # è¨ªå• Nginx $ curl http://$(docker-machine ip default):80 \u003c!DOCTYPE html\u003e \u003chtml\u003e \u003chead\u003e \u003ctitle\u003eWelcome to nginx!\u003c/title\u003e \u003cstyle\u003e body { width: 35em; margin: 0 auto; font-family: Tahoma, Verdana, Arial, sans-serif; } \u003c/style\u003e \u003c/head\u003e \u003cbody\u003e \u003ch1\u003eWelcome to nginx!\u003c/h1\u003e \u003cp\u003eIf you see this page, the nginx web server is successfully installed and working. Further configuration is required.\u003c/p\u003e \u003cp\u003eFor online documentation and support please refer to \u003ca href=\"http://nginx.org/\"\u003enginx.org\u003c/a\u003e.\u003cbr/\u003e Commercial support is available at \u003ca href=\"http://nginx.com/\"\u003enginx.com\u003c/a\u003e.\u003c/p\u003e \u003cp\u003e\u003cem\u003eThank you for using nginx.\u003c/em\u003e\u003c/p\u003e \u003c/body\u003e \u003c/html\u003e ","date":"2015-10-04","objectID":"/posts/docker-notebook-1/:1:0","tags":["docker","docker-machine","boot2docker","nginx"],"title":"[ç­†è¨˜] docker 1.8.2 rc","uri":"/posts/docker-notebook-1/"},{"categories":null,"content":"Tips $ docker info Get http:///var/run/docker.sock/v1.20/info: dial unix /var/run/docker.sock: no such file or directory. * Are you trying to connect to a TLS-enabled daemon without TLS? * Is your docker daemon up and running? å¦‚æœé‡åˆ°é€™å€‹å•é¡Œï¼Œåªæœ‰é‡ç½®ä¸€ä¸‹ docker-machine å³å¯ï¼ŒDocker é‚„å¾ˆè²¼å¿ƒçš„å‘Šè¨´ä½ å¦‚ä½•é‡ç½® shell eval \"$(docker-machine env default)\" $ docker-machine env default export DOCKER_TLS_VERIFY=\"1\" export DOCKER_HOST=\"tcp://192.168.99.100:2376\" export DOCKER_CERT_PATH=\"/Users/cage/.docker/machine/machines/default\" export DOCKER_MACHINE_NAME=\"default\" # Run this command to configure your shell: # eval \"$(docker-machine env default)\" ç›¸é—œåƒè€ƒè³‡æ–™ Mac OSä¸‹çš„boot2docker | æœ€å®Œæ•´çš„Dockerè–ç¶“ - DockeråŸç†åœ–è§£åŠå…¨ç’°å¢ƒå®‰è£ åœ¨ Mac OS X ç³»ç»Ÿé‡Œä½¿ç”¨ Docker - å“é›ªå…¶å¯’ - åšå®¢é¢‘é“ - CSDN.NET Installation on Mac OS X ","date":"2015-10-04","objectID":"/posts/docker-notebook-1/:2:0","tags":["docker","docker-machine","boot2docker","nginx"],"title":"[ç­†è¨˜] docker 1.8.2 rc","uri":"/posts/docker-notebook-1/"},{"categories":null,"content":"é–‹ç™¼ App Engineï¼Œé–‹ç™¼è€…é›–ç„¶åªè¦å°ˆæ³¨æ–¼ Data åŠ Application å³å¯ï¼Œä½†æ˜¯ä¹Ÿå› ç‚ºç‚ºäº«æœ‰è«¸å¤šçš„æœå‹™è€Œæœ‰æ‰€é™åˆ¶(ç›®å‰åªæœ‰æ”¯æ´ 4 ç¨®ç¨‹å¼èªè¨€ Golang, Python, Java, PHPã€åœ¨ sandbox ä¸­ç„¡æ³•å¯«å…¥æª”æ¡ˆç­‰é™åˆ¶)ï¼Œè€Œ Managed VMs ä¸­å¼•é€²äº† docker çš„å…ƒç´ è®“ App Engine æœ‰äº†æ›´å¤šçš„å½ˆæ€§ã€‚å¦‚: å¯ä»¥é€²è¡Œæª”æ¡ˆè®€å¯«ã€è‡ªå®š Runtimeã€‚","date":"2015-09-30","objectID":"/posts/managed-vms-lab/","tags":["Golang","GAE","Python","Managed-VMs"],"title":"Managed VMs lab","uri":"/posts/managed-vms-lab/"},{"categories":null,"content":"Presentation: slide: GAE Managed VM Introduction - Google Slides source code: cage1016/managed-vms-lab ","date":"2015-09-30","objectID":"/posts/managed-vms-lab/:0:0","tags":["Golang","GAE","Python","Managed-VMs"],"title":"Managed VMs lab","uri":"/posts/managed-vms-lab/"},{"categories":null,"content":"GAE Overview Google App Engine æ˜¯ Google Cloud Platform ä¸­ä¸€å€‹ PasS (Platform as a service) çš„æœå‹™. åœ¨ Pass çš„ GAE ä¸­ï¼Œé–‹ç™¼è€…åªéœ€è¦å°ˆæ³¨æ–¼ Application åŠ Dataï¼Œ å…¶æ–¼çš„ Runtimeã€Middlewareã€OSã€Virtualizationã€Serversã€Storageã€Networking å‰‡å®Œå…¨è¢« Google æ§åˆ¶ç®¡ç†ã€‚ GAE Architecture picture: https://cloud.google.com/solutions/architecture/webapp App Engine ç›®å‰æä¾›çš„åŸ·è¡Œç’°å¢ƒæœ‰ Pythonã€Golangã€JavaåŠPHP 4 ç¨®ç¨‹å¼èªè¨€ã€‚æ”¯æ´å¤šç‰ˆæœ¬æ‡‰ç”¨ç¨‹å¼å¯¦ä¾‹(multiple version)ï¼Œ ä¸”å¯ä»¥ç›´æ¥åœ¨ Console ä»‹é¢ä¸­é€²è¡Œç‰ˆæœ¬çš„åˆ‡æ›ï¼Œä¹Ÿæ”¯æ´æµé‡åˆ†æµä¾†æ–¹ä¾¿é€²è¡Œ A/B æ¸¬è©¦ã€‚ App Engine ä¹Ÿæ•´åˆäº† Memcache åŠ Tasks Queue çš„æœå‹™ã€‚Memcache æ˜¯ä¸€ç¨®è¨˜æ†¶é«”å¿«å–ä¸¦å¯ä»¥å…±äº«åœ¨ App Engine çš„å¯¦ä¾‹ä¸­ï¼Œ å®ƒå¯ä»¥æœ‰æ•ˆçš„æé«˜è³‡æ–™å­˜å–çš„é€Ÿåº¦(å¦‚å¸³è™Ÿè³‡æ–™å¾ Datastore è®€å–å¾Œæ”¾è‡³ Memcache ä¸€ä»½)ã€‚ Tasks Queues å‰‡æä¾›äº†ä¸€ç¨®è™•ç†é•·æ™‚é–“è«‹æ±‚çš„æ–¹å¼(600s)ã€‚è€Œ App Engine ä¹Ÿå…§å»ºäº† load balancerã€‚ ","date":"2015-09-30","objectID":"/posts/managed-vms-lab/:1:0","tags":["Golang","GAE","Python","Managed-VMs"],"title":"Managed VMs lab","uri":"/posts/managed-vms-lab/"},{"categories":null,"content":"Docker Overview Docker æ˜¯ä¸€ç¨®è¼•é‡çš„ container æŠ€è¡“ï¼Œä¸åŒæ–¼ VM (Virtual Machine) çš„åœ°æ–¹æ˜¯ Container æ˜¯åœ¨ä½œæ¥­ç³»çµ±å±¤é¢ä¸Šå¯¦ä½œè™›æ“¬åŒ–ï¼Œç›´æ¥ä½¿ç”¨æœ¬åœ°ä¸»æ©Ÿçš„ä½œæ¥­ç³»çµ±ï¼Œ è€Œå‚³çµ±æ–¹å¼å‰‡æ˜¯åœ¨ç¡¬é«”å±¤é¢å¯¦ä½œã€‚ Virtualization vs. Docker picture: https://philipzheng.gitbooks.io/docker_practice/content/introduction/what.html Why Docker? ä½œç‚ºä¸€ç¨®æ–°èˆˆçš„è™›æ“¬åŒ–æ–¹å¼ï¼ŒDocker è·Ÿå‚³çµ±çš„è™›æ“¬åŒ–æ–¹å¼ç›¸æ¯”å…·æœ‰çœ¾å¤šçš„å„ªå‹¢ã€‚ é¦–å…ˆï¼ŒDocker å®¹å™¨çš„å•Ÿå‹•å¯ä»¥åœ¨ç§’ç´šå¯¦ä½œï¼Œé€™ç›¸æ¯”å‚³çµ±çš„è™›æ“¬æ©Ÿæ–¹å¼è¦å¿«å¾—å¤šã€‚ å…¶æ¬¡ï¼ŒDocker å°ç³»çµ±è³‡æºçš„ä½¿ç”¨ç‡å¾ˆé«˜ï¼Œä¸€å°ä¸»æ©Ÿä¸Šå¯ä»¥åŒæ™‚åŸ·è¡Œæ•¸åƒå€‹ Docker å®¹å™¨ã€‚ å®¹å™¨é™¤äº†åŸ·è¡Œå…¶ä¸­æ‡‰ç”¨å¤–ï¼ŒåŸºæœ¬ä¸æ¶ˆè€—é¡å¤–çš„ç³»çµ±è³‡æºï¼Œä½¿å¾—æ‡‰ç”¨çš„æ•ˆèƒ½å¾ˆé«˜ï¼ŒåŒæ™‚ç³»çµ±è³‡æºæ¶ˆè€—æ›´å°‘ã€‚å‚³çµ±è™›æ“¬æ©Ÿæ–¹å¼åŸ·è¡Œ 10 å€‹ä¸åŒçš„æ‡‰ç”¨å°±è¦å•Ÿå‹• 10 å€‹è™›æ“¬æ©Ÿï¼Œè€Œ Docker åªéœ€è¦å•Ÿå‹• 10 å€‹éš”é›¢çš„æ‡‰ç”¨å³å¯ã€‚ å…·é«”èªªä¾†ï¼ŒDocker åœ¨ä»¥ä¸‹å¹¾å€‹æ–¹é¢å…·æœ‰è¼ƒå¤§çš„å„ªå‹¢ã€‚ æ›´å¿«é€Ÿçš„äº¤ä»˜å’Œéƒ¨ç½² å°é–‹ç™¼å’Œç¶­é‹ï¼ˆDevOpsï¼‰äººå“¡ä¾†èªªï¼Œæœ€å¸Œæœ›çš„å°±æ˜¯ä¸€æ¬¡å»ºç«‹æˆ–è¨­å®šï¼Œå¯ä»¥åœ¨ä»»æ„åœ°æ–¹æ­£å¸¸åŸ·è¡Œã€‚ é–‹ç™¼è€…å¯ä»¥ä½¿ç”¨ä¸€å€‹æ¨™æº–çš„æ˜ åƒæª”ä¾†å»ºç«‹ä¸€å¥—é–‹ç™¼å®¹å™¨ï¼Œé–‹ç™¼å®Œæˆä¹‹å¾Œï¼Œç¶­é‹äººå“¡å¯ä»¥ç›´æ¥ä½¿ç”¨é€™å€‹å®¹å™¨ä¾†éƒ¨ç½²ç¨‹å¼ç¢¼ã€‚ Docker å¯ä»¥å¿«é€Ÿå»ºç«‹å®¹å™¨ï¼Œå¿«é€Ÿè¿­ä»£æ‡‰ç”¨ç¨‹å¼ï¼Œä¸¦è®“æ•´å€‹éç¨‹å…¨ç¨‹å¯è¦‹ï¼Œä½¿åœ˜éšŠä¸­çš„å…¶ä»–æˆå“¡æ›´å®¹æ˜“ç†è§£æ‡‰ç”¨ç¨‹å¼æ˜¯å¦‚ä½•å»ºç«‹å’Œå·¥ä½œçš„ã€‚ Docker å®¹å™¨å¾ˆè¼•å¾ˆå¿«ï¼å®¹å™¨çš„å•Ÿå‹•æ™‚é–“æ˜¯ç§’ç´šçš„ï¼Œå¤§é‡åœ°ç¯€ç´„é–‹ç™¼ã€æ¸¬è©¦ã€éƒ¨ç½²çš„æ™‚é–“ã€‚ æ›´æœ‰æ•ˆç‡çš„è™›æ“¬åŒ– Docker å®¹å™¨çš„åŸ·è¡Œä¸éœ€è¦é¡å¤–çš„è™›æ“¬åŒ–æ”¯æ´ï¼Œå®ƒæ˜¯æ ¸å¿ƒå±¤ç´šçš„è™›æ“¬åŒ–ï¼Œå› æ­¤å¯ä»¥å¯¦ä½œæ›´é«˜çš„æ•ˆèƒ½å’Œæ•ˆç‡ã€‚ æ›´è¼•é¬†çš„é·ç§»å’Œæ“´å±• Docker å®¹å™¨å¹¾ä¹å¯ä»¥åœ¨ä»»æ„çš„å¹³å°ä¸ŠåŸ·è¡Œï¼ŒåŒ…æ‹¬å¯¦é«”æ©Ÿå™¨ã€è™›æ“¬æ©Ÿã€å…¬æœ‰é›²ã€ç§æœ‰é›²ã€å€‹äººé›»è…¦ã€ä¼ºæœå™¨ç­‰ã€‚ é€™ç¨®å…¼å®¹æ€§å¯ä»¥è®“ä½¿ç”¨è€…æŠŠä¸€å€‹æ‡‰ç”¨ç¨‹å¼å¾ä¸€å€‹å¹³å°ç›´æ¥é·ç§»åˆ°å¦å¤–ä¸€å€‹ã€‚ æ›´ç°¡å–®çš„ç®¡ç† ä½¿ç”¨ Dockerï¼Œåªéœ€è¦å°å°çš„ä¿®æ”¹ï¼Œå°±å¯ä»¥æ›¿ä»£ä»¥å¾€å¤§é‡çš„æ›´æ–°å·¥ä½œã€‚æ‰€æœ‰çš„ä¿®æ”¹éƒ½ä»¥å¢é‡çš„æ–¹å¼è¢«åˆ†ç™¼å’Œæ›´æ–°ï¼Œå¾è€Œå¯¦ä½œè‡ªå‹•åŒ–ä¸¦ä¸”æœ‰æ•ˆç‡çš„ç®¡ç†ã€‚ æ“·éŒ„æ–¼ ç‚ºä»€éº¼è¦ç”¨ Docker | ã€ŠDocker â€”â€” å¾å…¥é–€åˆ°å¯¦è¸ ã€‹æ­£é«”ä¸­æ–‡ç‰ˆ ","date":"2015-09-30","objectID":"/posts/managed-vms-lab/:1:1","tags":["Golang","GAE","Python","Managed-VMs"],"title":"Managed VMs lab","uri":"/posts/managed-vms-lab/"},{"categories":null,"content":"Managed VMs App Engine + Docker = Managed VMs App Engine æ˜¯ Google ä¸€å€‹ PasS çš„æœå‹™ï¼Œå®Œå…¨å— Google ç®¡ç†åŠæ§åˆ¶ï¼Œé–‹ç™¼è€…åªéœ€è¦å°ˆæ³¨æ–¼ Data åŠ Application çš„ç™¼é–‹ã€‚ Docker å‰‡æ˜¯ä¸€å€‹æ–°èˆˆçš„ container æŠ€è¡“ï¼Œè®“ç™¼é–‹è€…å¯ä»¥æ›´å¿«é€Ÿçš„äº¤ä»˜å’Œéƒ¨ç½²ã€æ›´æœ‰æ•ˆç‡çš„è™›æ“¬åŒ–ã€æ›´è¼•é¬†çš„é·ç§»å’Œæ“´å±•ã€æ›´ç°¡å–®çš„ç®¡ç†ã€‚ Why Managed VMs? é–‹ç™¼ App Engineï¼Œé–‹ç™¼è€…é›–ç„¶åªè¦å°ˆæ³¨æ–¼ Data åŠ Application å³å¯ï¼Œä½†æ˜¯ä¹Ÿå› ç‚ºç‚ºäº«æœ‰è«¸å¤šçš„æœå‹™è€Œæœ‰æ‰€é™åˆ¶(ç›®å‰åªæœ‰æ”¯æ´ 4 ç¨®ç¨‹å¼èªè¨€ Golang, Python, Java, PHPã€åœ¨ sandbox ä¸­ç„¡æ³•å¯«å…¥æª”æ¡ˆç­‰é™åˆ¶) ï¼Œè€Œ Managed VMs ä¸­å¼•é€²äº† docker çš„å…ƒç´ è®“ App Engine æœ‰äº†æ›´å¤šçš„å½ˆæ€§ã€‚å¦‚: å¯ä»¥é€²è¡Œæª”æ¡ˆè®€å¯«ã€è‡ªå®š Runtimeã€‚ åœ¨ä½¿ç”¨ Managed VMs æ™‚èˆ‡ä¸€èˆ¬çš„ App Engine æ‡‰ç”¨ç¨‹å¼ç„¡ç•°ï¼Œå·®ç•°çš„éƒ¨ä»½æ˜¯åœ¨ app.yaml ä¸­å¤šè¨­ç½®äº† vm:true çš„é…ç½® golang, app.yaml # make sure to replace \"projectid\" below with the project ID configured in the Google Developer Console runtime: go api_version: go1 # The vm setting is what determines if we are using a sandbox or MVM vm: true module: module1 automatic_scaling: min_num_instances: 1 max_num_instances: 5 cool_down_period_sec: 60 cpu_utilization: target_utilization: 0.2 resources: cpu: .5 memory_gb: 1.3 handlers: - url: /.* script: _go_app ä¸Šè¿° app.yaml é™¤äº†å•Ÿç”¨äº† Managed VMs ä¹Ÿé…ç½®äº†è‡ªå‹•æ“´å±•é…ç½®åŠçµ¦äºˆç‰¹å®šçš„è³‡æº(cpu, memory) ","date":"2015-09-30","objectID":"/posts/managed-vms-lab/:2:0","tags":["Golang","GAE","Python","Managed-VMs"],"title":"Managed VMs lab","uri":"/posts/managed-vms-lab/"},{"categories":null,"content":"Demo source code: cage1016/managed-vms-lab Demo Architecture dispatch.yaml dispatch: - url: \"*/favicon.ico\" module: default # appengine sandbox - url: \"your-project-id.appspot.com/\" module: default # managed vms - url: \"*/module1/*\" module: module1 - url: \"*/*\" module: default æœ¬æ¬¡ demo lab çš„æ¶æ§‹ç‚ºä¸€å€‹ sandbox runtime(default module) + managed VMs(module1) with automatic scaling. Route request å¯ä»¥é€é dispatch.yaml çš„è¨­å®šé€²è¡Œé‡å°[1] golang, file structure (same as python) â”œâ”€â”€ create_ab_test_instances.sh # ab test instances create shell â”œâ”€â”€ default # default module â”‚Â â”œâ”€â”€ app.yaml # default moduel app.yaml â”‚Â â”œâ”€â”€ dispatch.yaml # dispatch.yaml â”‚Â â””â”€â”€ sandbox.go # default module web app code â”œâ”€â”€ local_run.sh # local run shell â”œâ”€â”€ module1 # module 1 module â”‚Â â”œâ”€â”€ Dockerfile # auto-gen by gcloud command â”‚Â â”œâ”€â”€ app.yaml # module1 module app.yaml â”‚Â â””â”€â”€ module1.go # module1 module web app code â”œâ”€â”€ update_all.sh # app upload shell (default, module1) ","date":"2015-09-30","objectID":"/posts/managed-vms-lab/:3:0","tags":["Golang","GAE","Python","Managed-VMs"],"title":"Managed VMs lab","uri":"/posts/managed-vms-lab/"},{"categories":null,"content":"Run locally æœ¬æ¬¡ Demo ä½¿ç”¨ Google Cloud SDK 0.9.79 # install Google cloud SDK $ curl https://sdk.cloud.google.com | bash # update components $ gcloud components update # clone repo $ git clone https://github.com/cage1016/managed-vms-lab é‡æ–°å‘½å *.yaml.exist â€“\u003e *.yaml */default/dispatch.yaml.exist â€“\u003e */default/dispatch.yaml */default/update_all.sh.exist â€“\u003e */defalt/update_all.sh *default/create_ab_test_instances.sh.exist â€“\u003e */default/create_ab_test_instances.sh # run locally $ cd golang (or cd python) # execute run bash $ sh local_run.sh ","date":"2015-09-30","objectID":"/posts/managed-vms-lab/:4:0","tags":["Golang","GAE","Python","Managed-VMs"],"title":"Managed VMs lab","uri":"/posts/managed-vms-lab/"},{"categories":null,"content":"Deploy to GAE åœ¨ç™¼ä½ˆ demo æ‡‰ç”¨ç¨‹å¼è‡³ App Engine æ™‚ï¼Œéœ€è¦å…ˆé…ç½®ä¸€äº›åƒæ•¸. Golang/Python çš„é…ç½®æ–¹å¼éƒ½ä¸€æ¨£ã€‚ åœ¨ç™¼ä½ˆæ‡‰ç”¨ç¨‹å¼è‡³ App Engine ä¹‹å‰ï¼Œç¢ºèªä½ æœ‰å…ˆåœ¨ Google Developers Console å»ºç«‹å°ˆæ¡ˆ è¨­ç½®å°ˆæ¡ˆ PROJECT_ID */default/dispatch.yaml */default/update_all.sh */create_ab_test_instances.sh $ sh update_all.sh å°±æœƒä¾åºç™¼ä½ˆ App Engine sandbox åŠ Managed VMs è‡³ App Engine è¨ªå• default module: https://your-project-id.appspot.com/ module1: https://your-project-id.appspot.com/module1/ module1 route: https://your-project-id.appspot.com/module1/sayhi ","date":"2015-09-30","objectID":"/posts/managed-vms-lab/:5:0","tags":["Golang","GAE","Python","Managed-VMs"],"title":"Managed VMs lab","uri":"/posts/managed-vms-lab/"},{"categories":null,"content":"Apache ab test åœ¨ module1 çš„ Managed VMs ä¸­æœ‰è¨­å®š automatic scaling, ä¸”åœ¨ cpu \u003e 0.2 ä¸‹æœƒè‡ªå‹•é€²è¡Œ scaling # cd folder $ cd golang (or cd python) # create test instances $ sh create_ab_test_instances.sh # ssh è‡³ gce instances $ gcloud compute ssh your-project-id --zone=project-zone-name # gce instances setup $ sudo yum -y upgrade # install Apache ab tset $ yum provides /usr/bin/ab $ sudo yum install httpd-tools # test $ ab -n 10000 http://your-project-id.appspot.com/module1/ åœ¨ Apache ab test å£“æ¸¬ module1 çš„æ¨¡çµ„ï¼Œå°±å¯ä»¥é€é $gcloud compute instances list --project=your-project-id æœƒè‡ªå‹• scale out ","date":"2015-09-30","objectID":"/posts/managed-vms-lab/:6:0","tags":["Golang","GAE","Python","Managed-VMs"],"title":"Managed VMs lab","uri":"/posts/managed-vms-lab/"},{"categories":null,"content":"Reference App Engine Module: App Engine Modules in Python App Engine Modules in Go ","date":"2015-09-30","objectID":"/posts/managed-vms-lab/:7:0","tags":["Golang","GAE","Python","Managed-VMs"],"title":"Managed VMs lab","uri":"/posts/managed-vms-lab/"},{"categories":null,"content":"Chrome extension - A simple and quick way to copy title and url with ease in chrome browser.","date":"2015-08-17","objectID":"/posts/copy-2-clipboard-with-ease/","tags":["chrome","extension"],"title":"copy 2 clipboard with ease","uri":"/posts/copy-2-clipboard-with-ease/"},{"categories":null,"content":"features ","date":"2015-08-17","objectID":"/posts/copy-2-clipboard-with-ease/:0:0","tags":["chrome","extension"],"title":"copy 2 clipboard with ease","uri":"/posts/copy-2-clipboard-with-ease/"},{"categories":null,"content":"There have four options: Copy title url pattern: copy title only copy title and url copy title and shorten url copy url only copy shorten url only ","date":"2015-08-17","objectID":"/posts/copy-2-clipboard-with-ease/:1:0","tags":["chrome","extension"],"title":"copy 2 clipboard with ease","uri":"/posts/copy-2-clipboard-with-ease/"},{"categories":null,"content":"Copy title, url pattern: the default copy patter is url (title), you can change whatever you want but keep url and title keyword. ","date":"2015-08-17","objectID":"/posts/copy-2-clipboard-with-ease/:2:0","tags":["chrome","extension"],"title":"copy 2 clipboard with ease","uri":"/posts/copy-2-clipboard-with-ease/"},{"categories":null,"content":"Change log 1.0.1 - pattern input problem and other bug fixed. 1.0.0 - add options settings sync via Google account between different chrome browser. Change UI themes from Bootstrap to semantic-ui. minors bug fixed. 0.0.110 - add copy link with name feature. 0.0.109 chrome shortcut support. Default extension is â€œShift+Alt+Câ€. You can setup shortcut you want to enable fast copy one option of 5. 0.0.104 contextMenus support. the default copy patter is url (title), you can change whatever you want but keep url and title keyword. Snapshot copy 2 clipboard with ease browser action copy 2 clipboard with ease copy pattern option github cage1016/copy-2-clipboard-with-ease Chrome web store copy 2 clipboard with ease ","date":"2015-08-17","objectID":"/posts/copy-2-clipboard-with-ease/:3:0","tags":["chrome","extension"],"title":"copy 2 clipboard with ease","uri":"/posts/copy-2-clipboard-with-ease/"},{"categories":null,"content":"A simple sample for webpack + es6","date":"2015-08-14","objectID":"/posts/webpack-es6-demo/","tags":["webpack","es6"],"title":"webpack es6 demo","uri":"/posts/webpack-es6-demo/"},{"categories":null,"content":"æœ€è¿‘åœ¨InfoQ ä¸­çœ‹åˆ°ä¸€ç¯‡æ–‡ç«  æˆç‚ºä¸€åå„ªç§€çš„Webå‰ç«¯é–‹ç™¼è€…ï¼Œè£¡é¢æåˆ°å­¸ç¿’ ECMAScript 2015 é€™ä¸€å€‹éƒ¨ä»½ï¼Œåˆå› ç‚ºåœ¨ github çœ‹åˆ°è¶Šä¾†è¶Šå¤š Javascript å°ˆæ¡ˆå§‹ç”¨ ES6 Javascripté€™å€‹èªè¨€ï¼Œæ˜¯æœ‰ã€Œæ¨™æº–è¦æ ¼ã€çš„ï¼Œå«åšECMA-262ï¼Œé€™å€‹æ¨™æº–è¦æ ¼ï¼Œæ˜¯ç”±ECMA International (European Computer Manufacturers Association International)é€™å€‹æ¨™æº–çµ„ç¹”æ‰€åˆ¶å®šï¼Œæ‰€ä»¥ä¹Ÿç¨±å‘¼å®ƒç‚ºECMAScriptã€‚é€™å€‹è¦æ ¼æ¶µè“‹äº†æ‰€æœ‰Javascriptçš„æ ¸å¿ƒï¼Œæ˜¯å„ç¨®JavascriptåŸ·è¡Œç’°å¢ƒä¸€å®šæœƒæœ‰çš„æ±è¥¿ã€‚åœ¨æ­¤ä¹‹ä¸Šï¼Œç€è¦½å™¨å…§å°±æœƒé¡å¤–åŠ å…¥DOMç­‰æ“´å……ï¼Œè€Œåƒnode.jsé€™æ¨£çš„ä¼ºæœå™¨ç«¯ç’°å¢ƒï¼Œä¹Ÿæœ‰ä»–è‡ªå·±çš„æ“´å……ï¼Œä¸éæ ¸å¿ƒçš„éƒ¨ä»½æ˜¯å¤§å®¶éƒ½ä¸€æ¨£çš„ã€‚ï¼ˆé™„å¸¶ä¸€æï¼ŒC#çš„æ¨™æº–è¦æ ¼ä¹Ÿæ˜¯ECMAåˆ¶å®šçš„ï¼‰ åˆæ¢ ES6ï¼ˆ1ï¼‰Harmony çš„é»‘æ­·å² by fillano | CodeData 2015 å¹´çš„ ECMAScript æ˜¯ä¸€å€‹é¡¯è‘—çš„æ›´æ–°ã€‚ä¸Šä¸€æ¬¡ç‰ˆæœ¬ ES5 çš„æ¨™æº–æ˜¯åœ¨ 2009 å¹´è¨‚å®šçš„ï¼ŒAngularJS, Aurelia, ReactJS, Ionic éƒ½æ˜¯æ¶æ§‹åœ¨ ES5 çš„åŸºç¤ä¸Šï¼Œ ä¸é ReactJS ä¹Ÿé–‹å§‹æ”¯æ´äº† ES6ï¼Œèº«ç‚ºä¸€å€‹å‰ç«¯çš„å·¥ç¨‹å¸«ä¹Ÿæ˜¯æ™‚å€™é–‹å§‹å­¸ç¿’äº† ECMAScript 2015 (ES6) ES6 åŒ…å«äº†å¾ˆå¤šçš„æ–°ç‰¹æ€§ï¼Œæ›´è©³ç´°çš„èªªæ˜è«‹åƒç…§ Reference - ES6ï¼Œæœ¬æ¬¡çš„ Simple åªç”¨åˆ°å¹¾å€‹ ES6 æœ€åŸºæœ¬ç”¨æ³• arrow classes enhanced object literals template strings destructuring default + rest + spread let + const iterators + for..of generators unicode modules module loaders map + set + weakmap + weakset proxies symbols subclassable built-ins promises math + number + string + object APIs binary and octal literals reflect api tail calls Setting Started # clone webpack-es6 repo $ git clone https://github.com/cage1016/webpack-es6-demo # install node package $ npm install # complie js $ npm run watch # open index.html $ open -a 'Google Chrome' index.html ","date":"2015-08-14","objectID":"/posts/webpack-es6-demo/:0:0","tags":["webpack","es6"],"title":"webpack es6 demo","uri":"/posts/webpack-es6-demo/"},{"categories":null,"content":"webpack ç›®å‰ Browser é‚„æ²’æœ‰å…¨é¢æ”¯æ´ ES6ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨æ™‚å€™å°±å¿…éœ€é€²è¡Œè½‰è­¯ï¼Œé€™é‚Šæˆ‘å€‘ä½¿ç”¨çš„æ˜¯ shama/es6-loader çš„è½‰è­¯å™¨ webpack.config.js é€²è¡Œ webpack.config.js æª”æ¡ˆçš„é…ç½®: è¨­ç½® webpack é€²å…¥é». ./app/entry.js è¨­ç½®è½‰è­¯å¾Œæª”æ¡ˆ bundle.js (æœ€å¾Œéœ€è¦åœ¨ index.html ä¸­å¼•ç”¨ bundle.js) è¨­ç½® babel-loader æ¨¡çµ„ä¾†é€²è¡Œ ES6 çš„è½‰è­¯ var path = require('path'); var webpack = require('webpack'); module.exports = { entry: './app/entry.js', output: { path: __dirname, filename: 'bundle.js', }, module: { loaders: [{ test: path.join(__dirname, 'app'), loader: 'babel-loader', exclude: /node_modules/, }, ], }, plugins: [ // Avoid publishing files when compilation failed new webpack.NoErrorsPlugin(), ], stats: { // Nice colored output colors: true, }, // Create Sourcemaps for the bundle devtool: 'source-map', }; ","date":"2015-08-14","objectID":"/posts/webpack-es6-demo/:1:0","tags":["webpack","es6"],"title":"webpack es6 demo","uri":"/posts/webpack-es6-demo/"},{"categories":null,"content":"Polygon app/Polygon.js åœ¨ app/Polygon.js ä¸­ä½¿ç”¨åˆ°äº† ES6 ä¸­ä¸‰å€‹æ–°çš„ç‰¹æ€§: classes/inheritance/static module arrow strings class Polygon { constructor(points) { this.points = points; } getArea() { let area = 0; let j = this.points.length - 1; for (let i = 0; i \u003c this.points.length; i++) { area = area + (this.points[j][0] + this.points[i][0]) * (this.points[j][1] - this.points[i][1]); j = i; } return Math.abs(area / 2); } getPoints() { return this.points.map(n =\u003e `(${n[0]},${n[1]})`).join(','); } toString() { return `I am ${this.name}, area = ${this.getArea()}` } } class Rectangle extends Polygon { constructor(points) { super(points, 'Rectanger'); this.name = 'Rectanger' } } class Triangle extends Polygon { constructor(points) { super(points, 'Triangle'); this.name = 'Triangle'; } static create(points) { return new Triangle(points); } } export { Triangle, Polygon, Rectangle } ","date":"2015-08-14","objectID":"/posts/webpack-es6-demo/:2:0","tags":["webpack","es6"],"title":"webpack es6 demo","uri":"/posts/webpack-es6-demo/"},{"categories":null,"content":"Entry app/entry.js åœ¨ app/entry.js ä¸­ä½¿ç”¨åˆ°äº† ES6 ä¸­æ–°çš„ç‰¹æ€§: module å¼•ç”¨çš„æ–¹å¼ let (é¡ä¼¼ ES5 ä¸­çš„ varï¼Œä¸é let æœƒæŠŠ scope å€éš”é–‹ä¾†) import { Rectangle, Triangle } from './Polygon'; let r = new Rectangle([ [4, 4], [4, -4], [-4, -4], [-4, 4], ]); let t = Triangle.create([ [4, 6], [4, -4], [8, -4], ]) let body = document.querySelector('body'); body.innerHTML = [ r.toString(), r.getPoints(), t.toString(), t.getPoints(), ].join('\u003cbr/\u003e'); æœ€å¾Œåœ¨ Browser ä¸­çœ‹åˆ°ä¸‰çµæœ I am Rectanger, area = 64 (4,4),(4,-4),(-4,-4),(-4,4) I am Triangle, area = 20 (4,6),(4,-4),(8,-4) Reference ","date":"2015-08-14","objectID":"/posts/webpack-es6-demo/:3:0","tags":["webpack","es6"],"title":"webpack es6 demo","uri":"/posts/webpack-es6-demo/"},{"categories":null,"content":"ES6 ECMAScript 6å…¥é—¨ es6-guide - GitBook ES6 In Depth: An Introduction âœ© Mozilla Hacks â€“ the Web developer blog Classes - JavaScript | MDN ","date":"2015-08-14","objectID":"/posts/webpack-es6-demo/:4:0","tags":["webpack","es6"],"title":"webpack es6 demo","uri":"/posts/webpack-es6-demo/"},{"categories":null,"content":"webpack tutorials/getting-started shama/es6-loader Babel Â· The compiler for writing next generation JavaScript ","date":"2015-08-14","objectID":"/posts/webpack-es6-demo/:5:0","tags":["webpack","es6"],"title":"webpack es6 demo","uri":"/posts/webpack-es6-demo/"},{"categories":null,"content":"æœ€è¿‘çš„å°ˆæ¡ˆå¸¸å¸¸éœ€è¦åœ¨ GAE - Python è·Ÿå¤§ CSV (40MB)æª”æ‰“äº¤é“ã€‚åœ¨ Python ä¸­åˆ©ç”¨ `csv.reader` \u0026 `csv.DictReader` å¯ä»¥å¾ˆå®¹æ˜“çš„è™•ç† `csv` è®€å–çš„å‹•ä½œã€‚ä½†æ˜¯åœ¨ GAE å¹³å°ä¸Šä¸€èˆ¬ Request æ™‚é–“åªæœ‰ **60s**ï¼Œè€Œ Tasks Request å‰‡æœ‰ **10mins** çš„é™åˆ¶[3]ï¼Œè€Œåœ¨ GAE ä¸Šè™•ç†è¶…å¤§æª”æ¡ˆçš„æ™‚å€™é™¤äº†æœƒé‡åˆ° `DeadlineExceededErrors` çš„é›·ä¹Ÿæœƒè¸©åˆ° `Exceeded soft private memory limit` çš„å•é¡Œ(é è¨­ instance çš„è¨˜æ†¶é«”åªæœ‰ **128MB**ï¼Œåœ¨è™•ç†å¤§ CSV æª”å¾ˆå®¹æ˜“è¸©åˆ°çš„é›·)","date":"2015-07-28","objectID":"/posts/gcsiterator/","tags":["GCS","GAE","csv","Python"],"title":"GCSIterator (Python CSV iterator for Google Cloud Storage) via GAE","uri":"/posts/gcsiterator/"},{"categories":null,"content":"æœ€è¿‘çš„å°ˆæ¡ˆå¸¸å¸¸éœ€è¦åœ¨ GAE - Python è·Ÿå¤§ CSV (40MB)æª”æ‰“äº¤é“ã€‚åœ¨ Python ä¸­åˆ©ç”¨ csv.reader \u0026 csv.DictReader å¯ä»¥å¾ˆå®¹æ˜“çš„è™•ç† csv è®€å–çš„å‹•ä½œã€‚ä½†æ˜¯åœ¨ GAE å¹³å°ä¸Šä¸€èˆ¬ Request æ™‚é–“åªæœ‰ 60sï¼Œè€Œ Tasks Request å‰‡æœ‰ 10mins çš„é™åˆ¶[3]ï¼Œè€Œåœ¨ GAE ä¸Šè™•ç†è¶…å¤§æª”æ¡ˆçš„æ™‚å€™é™¤äº†æœƒé‡åˆ° DeadlineExceededErrors çš„é›·ä¹Ÿæœƒè¸©åˆ° Exceeded soft private memory limit çš„å•é¡Œ(é è¨­ instance çš„è¨˜æ†¶é«”åªæœ‰ 128MBï¼Œåœ¨è™•ç†å¤§ CSV æª”å¾ˆå®¹æ˜“è¸©åˆ°çš„é›·) æ‰€ä»¥åœ¨è™•ç†å¤§ CSV æª”æœ€å¥½ä¸è¦ä¸€æ¬¡å°±æŠŠæ‰€æœ‰çš„è³‡æ–™è®€åˆ°è¨˜æ†¶é«”ä¸­ï¼Œè€Œ GAE ä¸Šåˆæœ‰æª”æ¡ˆå­˜å–çš„é™åˆ¶ï¼Œæ‰€ä»¥å¤§éƒ¨ä»½æœƒæ­é… GCS ä¸€èµ·ä½¿ç”¨ï¼Œ æŠŠæª”æ¡ˆæ”¾åœ¨ GCS ä¸Šï¼Œç”± GAE é€é google-api-python-client åˆ° GCS é€²è¡Œæª”æ¡ˆçš„å­˜å– google-api-python-client ä¸­å¯¦ä½œäº† GCS JSON API çš„ chunks ä¸‹è¼‰(MediaIoBaseDownload [4])ï¼Œåœ¨ chunks ä¸‹è¼‰æ™‚å°±å¿…éœ€å¦å¤–è™•ç†æ–·è¡Œçš„å•é¡Œ(å¯¦ä½œ Python csv.DictReader iterator å…§è§£æ±ºæ–·è¡Œå•é¡Œ) ","date":"2015-07-28","objectID":"/posts/gcsiterator/:0:0","tags":["GCS","GAE","csv","Python"],"title":"GCSIterator (Python CSV iterator for Google Cloud Storage) via GAE","uri":"/posts/gcsiterator/"},{"categories":null,"content":"GCSIterator.py # GCSIterator.py import random import re import logging import time from apiclient.errors import HttpError DEFAULT_CHUNK_SIZE = 512 * 1024 class GCSIterator(object): \"\"\" Reference: Parsing Large CSV Blobs on Google App Engine by Daniel Thompson @ d4nt http://d4nt.com/parsing-large-csv-blobs-on-google-app-engine Implement Google Cloud Storage csv.DictReader Iterator \"\"\" def __init__(self, request, progress=0, chunksize=DEFAULT_CHUNK_SIZE): self._request = request self._uri = request.uri self._chunksize = chunksize self._progress = progress self._init_progress = progress self._total_size = None self._done = False self._last_line = \"\" self._line_num = 0 self._lines = [] self._buffer = None self._done = False self._done_and_last_line = False self._bytes_read = 0 # Stubs for testing. self._sleep = time.sleep self._rand = random.random def __iter__(self): return self def next(self): if (not self._buffer or len(self._lines) == (self._line_num + 1)) and not self._done_and_last_line: if self._lines: self._last_line = self._lines[self._line_num] if not self._done: self._buffer, self._done = self.read(3) else: self._buffer = '' self._lines = re.split('\\r|\\n|\\r\\n', self._buffer) self._line_num = 0 # Handle special case where our block just happens to end on a new line if self._buffer[-1:] == \"\\n\" or self._buffer[-1:] == \"\\r\": self._lines.append(\"\") if not self._buffer: if self._done and not self._last_line: raise StopIteration else: self._done_and_last_line = True if self._line_num == 0 and len(self._last_line) \u003e 0: # print 'fixing' result = self._last_line + self._lines[self._line_num] + \"\\n\" else: result = self._lines[self._line_num] + \"\\n\" # check csv header if self._bytes_read == 0 and self._init_progress == 0: # if not re.match('email', result.lower().replace('\"', '')): # raise ValueError('csv header must contain \"email or EMAIL\" property.') # # else: result = result.lower() self._bytes_read += len(result) if not self._done_and_last_line: self._line_num += 1 else: self._last_line = '' return result def read(self, num_retries=0): \"\"\"Get the next chunk of the download. Args: num_retries: Integer, number of times to retry 500's with randomized exponential backoff. If all retries fail, the raised HttpError represents the last request. If zero (default), we attempt the request only once. Returns: (status, done): (MediaDownloadStatus, boolean) The value of 'done' will be True when the media has been fully downloaded. Raises: apiclient.errors.HttpError if the response was not a 2xx. httplib2.HttpLib2Error if a transport error has occured. \"\"\" try: headers = { 'range': 'bytes=%d-%d' % ( self._progress, self._progress + self._chunksize) } http = self._request.http msg = 'read bytes={:d}-{:d}/{}'.format(self._progress, (self._progress + self._chunksize), str(self._total_size) if self._total_size else '*') logging.info(msg) print msg for retry_num in xrange(num_retries + 1): if retry_num \u003e 0: self._sleep(self._rand() * 2 ** retry_num) logging.warning( 'Retry #%d for media download: GET %s, following status: %d' % (retry_num, self._uri, resp.status)) resp, content = http.request(self._uri, headers=headers) if resp.status \u003c 500: break if resp.status in [200, 206]: if 'content-location' in resp and resp['content-location'] != self._uri: self._uri = resp['content-location'] self._progress += len(content) if 'content-range' in resp: content_range = resp['content-range'] length = content_range.rsplit('/', 1)[1] self._total_size = int(length) if self._progress == self._total_size: self._done = True return content, self._done else: raise HttpError(resp, content, uri=self._uri) except Exception as e: logging.warning('gcs iterator error manual retry') logging.error(e.message) self._sleep(self._rand() * 2 ** 2) self.read() åœ¨ GCSIterator.py ä¸­æŠŠ GCS JSON API çš„ chunks ä¸‹è¼‰ csv è³‡æ–™çš„ç¨‹å¼ç¢¼æ¤å…¥ iterator ä¸¦è§£æ±ºæ–·è¡Œçš„å•é¡Œã€‚ ","date":"2015-07-28","objectID":"/posts/gcsiterator/:1:0","tags":["GCS","GAE","csv","Python"],"title":"GCSIterator (Python CSV iterator for Google Cloud Storage) via GAE","uri":"/posts/gcsiterator/"},{"categories":null,"content":"Getting Started # Get gcloud $ curl https://sdk.cloud.google.com | bash # Get App Engine component $ gcloud components update app $ gcloud components update gae-python # Clone repo from github $ git clone https://github.com/cage1016/GCSIterator # Install pip packages $ sudo pip install -r requirements.txt -t lib Replace your bucket-name and object-name. You may also modify chunksize at line 24 in main.py file. # main.py ... def get_authenticated_service(): credentials = GoogleCredentials.get_application_default() http = credentials.authorize(httplib2.Http()) return discovery_build('storage', 'v1', http=http) gcs_service = get_authenticated_service() bucket_name = '\u003cyour-bucket-name\u003e' # waldo-gcp-file object_name = '\u003cyour-object-name\u003e' # kaichu_1016_00000100.csv request = gcs_service.objects().get_media(bucket=bucket_name, object=object_name.encode('utf8')) iterator = GCSIterator(request, chunksize=512) reader = csv.DictReader(iterator, skipinitialspace=True, delimiter=',') for row in reader: print row Execute main.py # sample output $ python main.py read bytes=0-512/* {'email': 'kaichu_1016+00000000@gmail.com', 'name': 'cage00000000'} {'email': 'kaichu_1016+00000001@gmail.com', 'name': 'cage00000001'} {'email': 'kaichu_1016+00000002@gmail.com', 'name': 'cage00000002'} {'email': 'kaichu_1016+00000003@gmail.com', 'name': 'cage00000003'} {'email': 'kaichu_1016+00000004@gmail.com', 'name': 'cage00000004'} {'email': 'kaichu_1016+00000005@gmail.com', 'name': 'cage00000005'} {'email': 'kaichu_1016+00000006@gmail.com', 'name': 'cage00000006'} {'email': 'kaichu_1016+00000007@gmail.com', 'name': 'cage00000007'} {'email': 'kaichu_1016+00000008@gmail.com', 'name': 'cage00000008'} {'email': 'kaichu_1016+00000009@gmail.com', 'name': 'cage00000009'} {'email': 'kaichu_1016+00000010@gmail.com', 'name': 'cage00000010'} read bytes=513-1025/4411 {'email': 'kaichu_1016+00000011@gmail.com', 'name': 'cage00000011'} {'email': 'kaichu_1016+00000012@gmail.com', 'name': 'cage00000012'} {'email': 'kaichu_1016+00000013@gmail.com', 'name': 'cage00000013'} {'email': 'kaichu_1016+00000014@gmail.com', 'name': 'cage00000014'} {'email': 'kaichu_1016+00000015@gmail.com', 'name': 'cage00000015'} {'email': 'kaichu_1016+00000016@gmail.com', 'name': 'cage00000016'} {'email': 'kaichu_1016+00000017@gmail.com', 'name': 'cage00000017'} {'email': 'kaichu_1016+00000018@gmail.com', 'name': 'cage00000018'} {'email': 'kaichu_1016+00000019@gmail.com', 'name': 'cage00000019'} {'email': 'kaichu_1016+00000020@gmail.com', 'name': 'cage00000020'} {'email': 'kaichu_1016+00000021@gmail.com', 'name': 'cage00000021'} {'email': 'kaichu_1016+00000022@gmail.com', 'name': 'cage00000022'} read bytes=1026-1538/4411 {'email': 'kaichu_1016+00000023@gmail.com', 'name': 'cage00000023'} {'email': 'kaichu_1016+00000024@gmail.com', 'name': 'cage00000024'} ... ","date":"2015-07-28","objectID":"/posts/gcsiterator/:2:0","tags":["GCS","GAE","csv","Python"],"title":"GCSIterator (Python CSV iterator for Google Cloud Storage) via GAE","uri":"/posts/gcsiterator/"},{"categories":null,"content":"Reference GAE - Python 13.1. csv â€” CSV File Reading and Writing â€” Python 2.7.10 documentation Dealing with DeadlineExceededErrors - App Engine â€” Google Cloud Platform google-api-python-client/http.py at 80da1eff23d7dc02d9f66f82754aa86b55f73be6 Â· google/google-api-python-client cage1016/GCSIterator ","date":"2015-07-28","objectID":"/posts/gcsiterator/:3:0","tags":["GCS","GAE","csv","Python"],"title":"GCSIterator (Python CSV iterator for Google Cloud Storage) via GAE","uri":"/posts/gcsiterator/"},{"categories":null,"content":"æœ€è¿‘éœ€è¦å¹«å…§éƒ¨åŸºæ–¼ GAE - Python å¹³å°ä¸Šå°å…¥å‰ç«¯çš„æ¡†æ¶ï¼ŒTodoMVC æ˜¯ä¸€å€‹éå¸¸é©åˆæ‹¿ä¾†å­¸ç¿’å‰ç«¯æ¡†æ¶çš„è³‡æºï¼Œå®ƒä»¥**TodoMVC**çš„é¡Œç›®å¯¦ä½œç›®å‰ä¸»æµçš„å‰ç«¯æ¡†æ¶(**React**ã€**Angular**ã€**Vuejs**ã€**Ember.js**ã€**Polymer** ç­‰ç­‰)ï¼Œä½ å¯ä»¥çœ‹åˆ°ä¸åŒæ¡†æ¶çš„å„ªç¼ºé»ï¼Œé¸æ“‡ä¸€å€‹æœ€é©åˆä½ çš„æ¡†æ¶ä¾†å­¸ç¿’ã€‚","date":"2015-07-27","objectID":"/posts/gae-todomvc/","tags":["Front-end","GAE","todomvc"],"title":"GAE-todomvc","uri":"/posts/gae-todomvc/"},{"categories":null,"content":"æœ€è¿‘éœ€è¦å¹«å…§éƒ¨åŸºæ–¼GAE - Pythonå¹³å°ä¸Šå°å…¥å‰ç«¯çš„æ¡†æ¶ï¼ŒTodoMVC æ˜¯ä¸€å€‹éå¸¸é©åˆæ‹¿ä¾†å­¸ç¿’å‰ç«¯æ¡†æ¶çš„è³‡æºï¼Œå®ƒä»¥TodoMVCçš„é¡Œç›®å¯¦ä½œç›®å‰ä¸»æµçš„å‰ç«¯æ¡†æ¶(Reactã€Angularã€Vuejsã€Ember.jsã€Polymer ç­‰ç­‰)ï¼Œ ä½ å¯ä»¥çœ‹åˆ°ä¸åŒæ¡†æ¶çš„å„ªç¼ºé»ï¼Œé¸æ“‡ä¸€å€‹æœ€é©åˆä½ çš„æ¡†æ¶ä¾†å­¸ç¿’ã€‚ åœ¨ cage1016/gae-todomvc ä¸­å‰‡é¸ç”¨äº† Reactjs (Flux)ã€AnguarJsã€Vue.js ä¸‰å€‹å‰ç«¯æ¡†æ¶ä¾†æ­é… GAE-Python + Datastore + Endpoints APIsã€‚ ","date":"2015-07-27","objectID":"/posts/gae-todomvc/:0:0","tags":["Front-end","GAE","todomvc"],"title":"GAE-todomvc","uri":"/posts/gae-todomvc/"},{"categories":null,"content":"Spec Front-end: Reactjs (Flux)ã€AnguarJsã€Vue.js back-end: GAE-Python (webapp2) + Datastore +ã€€Endpoints APIs ","date":"2015-07-27","objectID":"/posts/gae-todomvc/:0:1","tags":["Front-end","GAE","todomvc"],"title":"GAE-todomvc","uri":"/posts/gae-todomvc/"},{"categories":null,"content":"Getting Started ä¸‰å€‹å‰ç«¯æ¡†æ¶çš„ç¨‹å¼ç¢¼éƒ½æ˜¯åŸºæ–¼ TodoMVC ç‰ˆæœ¬ clone å¾Œç¨ä½œä¿®æ”¹ (ä»¥ç¬¦åˆ Endpoints RESTFul APIs) todomvc/examples/angularjs-perf at gh-pages Â· tastejs/todomvc flux/examples/flux-todomvc at master Â· facebook/flux todomvc/examples/vue at gh-pages Â· tastejs/todomvc GAE todomvc çš„ gcloud SDK ç‚º 0.9.64 # Get gcloud $ curl https://sdk.cloud.google.com | bash # Get App Engine component $ gcloud components update app $ gcloud components update gae-python # Clone repo from github $ git clone https://github.com/cage1016/gae-todomvc # Install pip packages $ sudo pip install -r requirements.txt -t lib # Install npm packages $ npm install # Install bower packages $ bower install GAE todomvc ä¸­ Vue.js ç¯„ä¾‹ä¸­ä½¿ç”¨åˆ°äº† vue-resource libraryï¼Œå› ç‚º vue-resource æ¨¡çµ„é è¨­æ²’æœ‰ update: {method: 'put'} methodï¼Œæ‰€ä»¥åœ¨åŸ·è¡Œ gulp æ™‚ï¼Œéœ€è‡ªå·±ç¨ä½œä¿®æ”¹ã€‚ # switch to bower_components $ cd bower_components # clone vue-resource repo from github $ git clone https://github.com/vuejs/vue-resource # switch to vue-resource folder $ cd vue-resource # install vue-resource require packages $ npm install # add update method # /bower_components/vue-resource/src/resource.js # add \"update: {method: 'put'}\" at line 109 # rebuild vue-resource $ npm run build # go back $ cd ../.. # Build $ gulp # Run GAE locally $ dev_appserver.py app.yaml ç€è¦½ http://localhost:8080 å³å¯ä»¥çœ‹åˆ°çµæœã€‚ ","date":"2015-07-27","objectID":"/posts/gae-todomvc/:0:2","tags":["Front-end","GAE","todomvc"],"title":"GAE-todomvc","uri":"/posts/gae-todomvc/"},{"categories":null,"content":"Screencapture ","date":"2015-07-27","objectID":"/posts/gae-todomvc/:0:3","tags":["Front-end","GAE","todomvc"],"title":"GAE-todomvc","uri":"/posts/gae-todomvc/"},{"categories":null,"content":"GAE Endpoints APIs GAE Endpoints APIs è©³ç´°çš„ä½¿ç”¨æ–¹å¼å¯ä»¥åƒè€ƒ Creating an Endpoints APIï¼Œ GAE-todomvc å‰‡æ˜¯ä½¿ç”¨ GoogleCloudPlatform/endpoints-proto-datastore ä¾†ç›´æ¥å­˜å– Datastore çš„ Modelã€‚å¦å¤– GAE Endpoints APIs ä¹Ÿæä¾›äº†æœ¬åœ°é–‹ç™¼æ¸¬è©¦çš„Url http://localhost:8080/_ah/api/explorer ","date":"2015-07-27","objectID":"/posts/gae-todomvc/:0:4","tags":["Front-end","GAE","todomvc"],"title":"GAE-todomvc","uri":"/posts/gae-todomvc/"},{"categories":null,"content":"Reference TodoMVC Web Starter Kit â€” Web Fundamentals [React] è³‡æºæ•´ç† Â« Huliâ€™s Blog React \u0026 Flux Workshop Reactjs-JQuery-Vuejs-Extjs-Angularjså¯¹æ¯” - ã€å½“è€ç‰¹ã€‘ - åšå®¢å›­ æ·±å…¥æµ…å‡ºReactï¼ˆä¸€ï¼‰ï¼šReactçš„è®¾è®¡å“²å­¦ - ç®€å•ä¹‹ç¾ æ·±å…¥æµ…å‡ºReactï¼ˆäºŒï¼‰ï¼šReactå¼€å‘ç¥å™¨Webpack ","date":"2015-07-27","objectID":"/posts/gae-todomvc/:0:5","tags":["Front-end","GAE","todomvc"],"title":"GAE-todomvc","uri":"/posts/gae-todomvc/"},{"categories":null,"content":"ä»Šå¤© Google å…¬ä½ˆäº† Application Default Credentials (ADC), ä¸€å€‹å¯ä»¥è®“ä½¿ç”¨è€…æ›´æ–¹ä¾¿åœ¨ GCP ä¸Šå»ç•Œæ¥å…¶ä»–çš„éœ€è¦ä½¿ç”¨ OAuth å­˜å–çš„æœå‹™","date":"2015-07-21","objectID":"/posts/adc/","tags":["APIs","GCP","ADC","GAE"],"title":"Google Announce Application Default Credentials (ADC)","uri":"/posts/adc/"},{"categories":null,"content":"ä»Šå¤© Google å…¬ä½ˆäº† Application Default Credentials (ADC)ï¼Œä¸€å€‹å¯ä»¥è®“ä½¿ç”¨è€…æ›´æ–¹ä¾¿åœ¨ GCP ä¸Šå»ç•Œæ¥å…¶ä»–çš„éœ€è¦ä½¿ç”¨ OAuth å­˜å–çš„æœå‹™å¦‚ Google Cloud Storageã€Google BigQueryã€‚é€™å°å¸¸å¸¸å¯« GAE çš„æˆ‘ä¾†èªªåˆæ›´æ–¹ä¾¿äº†ã€‚ åœ¨ GCP å°ˆæ¡ˆå»ºç«‹ä¹‹å¾Œï¼Œé è¨­æœƒè‡ªå‹•ç”¢ç”Ÿ Service Accountsï¼Œ é€™äº›å…§å»ºçš„ Service Accounts åœ¨é€²è¡Œ Server to Server çš„å­˜å–æ™‚åªéœ€è¦æ‡‰ç”¨ç¨‹å¼æœ¬èº«çš„èªè¨¼ï¼Œç›´æ¥ä½¿ç”¨ AppAssertionCredentials å¯ä»¥ä¸éœ€é€é Flow ä¾†å»ºç«‹ Credentialsç‰©ä»¶ import httplib2 from google.appengine.api import memcache from apiclient.discovery import build from oauth2client.appengine import AppAssertionCredentials credentials = AppAssertionCredentials(scope='https://www.googleapis.com/auth/devstorage.full_control') http = credentials.authorize(httplib2.Http(memcache)) gcs_service = build('storage', 'v1', http=http, developerKey=DEVELOPER_KEY) æˆ‘å€‘å¯ä»¥ç›´æ¥ä½¿ç”¨ AppAssertionCredentials ç”¢ç”Ÿçš„ credentials ä¾†å»ºç«‹ gcs_service é€£ç·šï¼Œé€™æ®µç¨‹å¼åœ¨ä¸Šå‚³åˆ° GAE ä¸Šå¯ä»¥è·‘çš„å¾ˆå¥½ï¼Œ ä¸éå¦‚æœä½ æƒ³è¦åœ¨æœ¬åœ°æ¸¬è©¦çš„æ™‚å€™å°±éœ€è¦ç‰¹åˆ¥æŒ‡å®š Server Accounts çš„ credentials ","date":"2015-07-21","objectID":"/posts/adc/:0:0","tags":["APIs","GCP","ADC","GAE"],"title":"Google Announce Application Default Credentials (ADC)","uri":"/posts/adc/"},{"categories":null,"content":"Service Accounts Create Service Account Click APIs \u0026 Auth \u003e credential. Click Click new Client ID. Choose Service Account. Key type : P12 Key Click Create Client ID P12.Key file will be downloaded. You have to convert p12 to pem cause PKCS12 format is not supported by the PyCrypto library. (openssl pkcs12 -in xxxxx.p12 -nodes -nocerts \u003e privatekey.pem) åœ¨æœ¬åœ°æ¸¬è©¦ç¨‹å¼æ™‚é‚„éœ€å°‡ --appidentity_email_address åŠ --appidentity_private_key_path å¸¶åˆ° dev_appserver.py åƒæ•¸ä¸­ã€‚ å¦‚æœæ²’æœ‰å¸¶å…¥é€™äºŒå€‹åƒæ•¸æœ¬åœ°æ¸¬è©¦æœƒå¾—åˆ° 401 Unauthorized çš„éŒ¯èª¤è¨Šæ¯ï¼Œä¸éä¸Šå‚³åˆ° GAE å› ç‚ºæœƒé€éæ‡‰ç”¨ç¨‹å¼æœ¬èº«çš„èªè¨¼æ‰€ä»¥ä¸æœƒå‡ºéŒ¯ã€‚ # gae run locally. dev_appserver.py yaml_or_war_path --appidentity_email_address=\u003cservice-account-email\u003e --appidentity_private_key_path=\u003cprivatekey.pem-path\u003e ","date":"2015-07-21","objectID":"/posts/adc/:1:0","tags":["APIs","GCP","ADC","GAE"],"title":"Google Announce Application Default Credentials (ADC)","uri":"/posts/adc/"},{"categories":null,"content":"Application Default Credentials (ADC) è€Œ Application Default Credentials å‰‡æä¾›äº†æ›´ç°¡ä¾¿çš„ä½œæ³• from oauth2client.client import GoogleCredentials from apiclient.discovery import build credentials = GoogleCredentials.get_application_default() gcs_service = build('storage', 'v1', credentials=credentials) Application Default Credentials (ADC) çš„æ–¹å¼åœ¨æœ¬åœ°æ¸¬è©¦æ™‚å› ç‚ºç›´æ¥ä½¿ç”¨äº† gcloud auth login çš„ credentialsï¼Œæ‰€ä»¥åœ¨é–‹ç™¼ä¸Šæ›´æ–¹ä¾¿æ›´ç›´è¦ºã€‚ æ³¨æ„äº‹é …: Google APIs Client Library for Python ä¸­ 1.3 ä»¥ä¸Šæ‰æ”¯æ´ default credentials $ gcloud -v ç¢ºèª Google Cloud SDK ç‰ˆæœ¬åœ¨ 0.9.51 ä»¥ä¸Šï¼ŒGoogle App Engine SDK ç‰ˆæœ¬åœ¨ 1.9.18 ä»¥ä¸Š ","date":"2015-07-21","objectID":"/posts/adc/:2:0","tags":["APIs","GCP","ADC","GAE"],"title":"Google Announce Application Default Credentials (ADC)","uri":"/posts/adc/"},{"categories":null,"content":"åƒè€ƒè³‡æ–™ Google Cloud Platform Blog: Easier Auth for Google Cloud APIs. Introducing the Application Default Credentials feature. Google Application Default Credentials | Google Identity Platform | Google Developers Using Google App Engine | API Client Library for Python | Google Developers ","date":"2015-07-21","objectID":"/posts/adc/:3:0","tags":["APIs","GCP","ADC","GAE"],"title":"Google Announce Application Default Credentials (ADC)","uri":"/posts/adc/"},{"categories":null,"content":"å¦‚åœ¨ Github Pages å»ºç«‹ Hugo éœæ…‹ç¶²ç«™","date":"2015-07-12","objectID":"/posts/my-first-post/","tags":["hugo","github"],"title":"å¦‚åœ¨ Github Pages å»ºç«‹ Hugo éœæ…‹ç¶²ç«™","uri":"/posts/my-first-post/"},{"categories":null,"content":"åŸç”± é¢±é¢¨å¤©é‚£éƒ½ä¸èƒ½å»ï¼Œåªå¥½ç¹¼çºŒ Coding äººç”Ÿã€çœ‹çœ‹ Pocket æœªè®€çš„æ–‡ç« ã€‚ä¸éä¹Ÿå› æ­¤ç™¼ç¾å¥½å¹¾å€‹ä¸éŒ¯çš„æ±è¥¿ Supercharging the Atom Editor for Go Development Â· marcio.ioï¼Œæœ€è¿‘ä¹Ÿé–‹å§‹ç”¨ Atom ä¹Ÿé–‹å§‹å­¸ç¿’ Golang èªè¨€ã€‚é€™ä¸€ç¯‡ä½œè€…èªªæ˜äº†ä»–è‡ªå·±çš„ä½¿ç”¨ç¶“é©—ã€‚ ä½¿ç”¨Hugoæ­å»ºå…è´¹ä¸ªäººBlog Â· Ulric Qin é€™ä¸€ç¯‡æ–‡ç« çœ‹åˆ° Hugoï¼Œç™¼ç¾åœ¨ä»–çš„ Blog ä¹Ÿæ˜¯ç”¨ Hugo æ¶çš„ åœ¨ Ulric Quin çš„æ–‡ç« ä¸­å¾—çŸ¥ä»–è‡ªå·±çš„ Blog æ˜¯æ¶åœ¨å¤§é™¸çš„GitCafeï¼ŒHugo å¯ä»¥ç›´æ¥ç™¼ä½ˆåˆ° GitCafe \u0026 Github çš„ Page å…è²»ï¼Œç•¶ç„¶æ˜¯ç«‹åˆ»è‡ªå·±å‹•æ‰‹ç©ä¸€ç© åœ¨ Hosting on GitHub Pages çš„èªªæ˜æ–‡ä»¶ä¸­æœ‰å¦‚ä½•æŠŠ Hugo éœæ…‹ç¶²ç«™ä½ˆç½²åˆ° Github Pages ä¸­ã€‚ä½†å› ç‚º GitHub Pages æä¾›äº†äºŒç¨®ä¸åŒå½¢æ…‹çš„é é¢ User or organization site \u0026 Project Siteã€‚å…¶ä¸­å€‹äººä¸»é ä¸€å€‹å¸³è™Ÿåªèƒ½æœ‰ä¸€å€‹ã€è€Œå°ˆæ¡ˆé é¢å‰‡å¯ä»¥å¾ˆå¤šå€‹ã€‚ æ‰€ä»¥åœ¨ä½ˆç½² Hugo éœæ…‹ç¶²ç«™ä¹Ÿå› ç‚ºå°æ‡‰åˆ°ä¸åŒçš„å‹æ…‹çš„ Github Pages è€Œæœ‰æ‰€ä¸åŒã€‚ ç¬¬ä¸€ç¨®æ–¹å¼æ˜¯å°‡ Hugo éœæ…‹ç¶²ç«™ä½ˆç½²åˆ° Github Page Project Site é¢é ä¸­. åªéœ€è¦åœ¨ github ä¸Šå»ºç«‹ä¸€å€‹ repoï¼Œä½†æ˜¯åˆ©ç”¨ git ä¸­ subtree çš„æ¦‚å¿µå°‡ public è³‡æ–™å¤¾é€£çµåˆ° gh-pages çš„åˆ†æ”¯ä¸Šï¼Œgit æ“ä½œéç¨‹è¼ƒç‚ºç¹é– Url ä¸Šçš„å·®ç•° # project site url http://github.com/\u003cyour-github-account\u003e/\u003chugo-project-name\u003e # github pages host url http://\u003cyour-github-account\u003e.github.io Project Site Step1 - å®‰è£ Hugo ä¸¦å»ºç«‹æ–°å°ˆæ¡ˆ åœ¨å®‰è£(è©³ç´°æ­¥é©Ÿè«‹çœ‹é€™)å¥½ Hugo å¾Œï¼Œç›´æ¥å»ºç«‹æ–°çš„ Hugo å°ˆæ¡ˆ # å»ºç«‹ Hugo æ–°å°ˆæ¡ˆï¼Œ-f æ˜¯æŒ‡å®š yaml æ ¼å¼ï¼Œé è¨­ç‚º toml:frontmatter format $ hugo new site hugo_blog -f yaml # change directory $ cd hugo_blog # git initialized $ git init $ echo .DS_Store \u003e\u003e .gitignore # add git remote repo $ git remote add origin git@github.com:\u003cyour-github-account\u003e/hugo_blog.git æª¢è¦–æ–°å°ˆæ¡ˆè³‡æ–™æ¶æ§‹ # \u003cproject-name\u003e file structure â”œâ”€â”€ archetypes â”œâ”€â”€ config.toml â”œâ”€â”€ content â”œâ”€â”€ data â”œâ”€â”€ layouts â””â”€â”€ static Step2 - å®‰è£æ–°çš„ Themes Hugo Themes repository æœ¬ä¾†å®‰è£ themes å¯ç›´æ¥æ–°å»º themes è³‡æ–™å¤¾ä¸¦ä½¿ç”¨ git clone \u003cthemes-url\u003eï¼Œä¸éæ­¤æ–¹æ³•åœ¨å¾Œé¢ push åˆ° Github Pages å‡ºï¼ŒGithub æœƒå›å ± The page build failed with the following error: The submodule themes/hyde was not properly initialized with a .gitmodules file. For more information, see \u003ehttps://help.github.com/articles/page-build-failed-missing-submodule. If you have any questions you can contact us by replying to this email. æ‰€ä»¥é€™é‚Šç›´æ¥ä½¿ç”¨ git submodule çš„æ–¹å¼ä¾†å®‰è£ themes # add hugo themes to project as submodule # git submodule add \u003crepository\u003e [\u003cpath\u003e] $ git submodule add https://github.com/spf13/hyde themes/hyde Step3 - ç·¨è¼¯å°ˆæ¡ˆè¨­å®šæª” baseurl : \"http://\u003cyour-github-account\u003e.github.com/hugo_blog\" languageCode : \"en-us\" title : \"My New Hugo Site\" # æ–°å¢ theme çš„åç¨± theme : 'hyde' ... Step4 - æ–°å¢æ–°çš„æ–‡ç«  åœ¨ content/posts å»ºç«‹ first-post.md # æœƒåœ¨å°ˆæ¡ˆ content/posts ä¸‹ç”¢ç”Ÿ first-post.md æª”æ¡ˆ # -f ä½¿ç”¨ yaml æª”æ¡ˆæ ¼å¼ $ hugo new posts/first-post.md -f yaml ç·¨è¼¯ first-post.md --- date: 2015-07-16T23:01:57+08:00 title: first post --- This is my first post. Step5 - é è¦½ æ­¤æ™‚å°±å¯ä»¥åœ¨ Local åŸ·è¡Œï¼Œ http://127.0.0.1:1313/hugo_blog/ # -w watch filesystem for changes and recreate as needed # -D include content marked as draft # Press Ctrl+C to stop $ hugo server -w æ‡‰è©²å¯ä»¥çœ‹åˆ°ä¸‹é¢æ“·åœ–çš„æ¨£å¼ Step6 - ç™¼ä½ˆ Hugo éœæ…‹ç¶²ç«™è‡³ Github Pages æ¥ä¸‹ä¾†çš„å‹•ä½œæ˜¯ä¸€é€£ä¸²çš„ git æ“ä½œï¼ŒæŠŠ Hugo ç”¢ç”Ÿçš„ public è³‡æ–™å¤¾æ¨é€è‡³ Github Pages # remove, public folder will created later $ rm -rf public $ git add . $ git commit -m 'hugo project init' # push $ git push -u origin master # Create a new orphand branch (no commit history) named gh-pages $ git checkout --orphan gh-pages # Unstage all files # -rf themes/hyde $ git rm -rf --cached $(git ls-files) # Add and commit that file $ git add . $ git commit -m \"INIT: initial commit on gh-pages branch\" # Push to remote gh-pages branch $ git push origin gh-pages # Return to master branch $ git checkout master # Remove the public folder to make room for the gh-pages subtree $ rm -rf public # Add the gh-pages branch of the repository. It will look like a folder named public $ git subtree add --prefix=public git@github.com:\u003cyour-github-account\u003e/hugo_blog.git gh-pages --squash # Pull down the file we just committed. This helps avoid merge conflicts $ git subtree pull --prefix=public git@github.com:\u003cyour-github-account\u003e/hugo_blog.git gh-pages # Run hugo. Generated site will be placed in public directory (or omit -t ThemeName if you're not using a theme) $ hugo # Add everything $ git add -A # Commit and push to master $ git commit -m \"Updating site\" \u0026\u0026 git push origin master # Push the public subtree to the gh-pages branch $ git subtree push --prefix=public git@github.com:\u003cyour-github-account\u003e/hugo_blog.git gh-pages é€™æ™‚å€™ï¼Œè¨ªå• http://your-github-account","date":"2015-07-12","objectID":"/posts/my-first-post/:0:1","tags":["hugo","github"],"title":"å¦‚åœ¨ Github Pages å»ºç«‹ Hugo éœæ…‹ç¶²ç«™","uri":"/posts/my-first-post/"},{"categories":null,"content":"Organization site Github Pages é™¤äº†æä¾›å°ˆæ¡ˆä¸»é (å¯ä»¥å¤šå€‹)ä¹‹å¤–ï¼Œä¹Ÿæä¾›äº†å€‹äººä¸»é (æ¯ä¸€å€‹ github å¸³è™Ÿåªæœ‰ä¸€å€‹)çš„æ–¹å¼ã€‚å°‡ Hugo éœæ…‹ç¶²ç«™ç™¼ä½ˆåˆ°å€‹äººä¸»é çš„æ–¹å¼æ¯”ç™¼ä½ˆåˆ°å°ˆæ¡ˆä¸»é ç°¡å–® åœ¨å€‹äººä¸»é ä¸­ Github repo å¿…éœ€å–å£ .github.io master åˆ†æ”¯ä¸­çš„å…§å®¹æœƒè¢« Build åŠç™¼ä½ˆåˆ°ä½ çš„ Github Pageä¸­ (å°ˆæ¡ˆä¸»é æ˜¯åˆ©ç”¨ gh-pages åˆ†æ”¯ï¼Œé€™é»ä¸å¤ªä¸€æ¨£) Step1 - å»ºç«‹ Hugo repos å»ºç«‹ \u003cgithub-project\u003e-hugo repo (ç”¨ä¾† host Hugo çš„å…§å®¹) å»ºç«‹ \u003cyour-github-account\u003e.github.io repo (Hugo public ä¸­éœæ…‹ç¶²é çš„å…§å®¹) Step2 - å»ºç«‹ Hugo æ–°å°ˆæ¡ˆ $ hugo new site \u003cgithub-project\u003e-hugo -f yaml # change directory $ cd \u003cgithub-project\u003e-hugo # git initialized $ git init $ echo .DS_Store \u003e\u003e .gitignore # add git remote repo $ git remote add origin git@github.com:\u003cyour-github-account\u003e/\u003cgithub-project\u003e-hugo.git Step3 - å®‰è£ Themes $ git submodule add https://github.com/spf13/hyde themes/hyde Step4 - ç·¨è¼¯å°ˆæ¡ˆè¨­å®šæª” baseurl: 'http://\u003cyour-github-account\u003e.github.com/' languageCode: 'en-us' title: 'My New Hugo Site' theme: 'hyde' ... Step5 - æ–°å¢æ–‡ç«  $ hugo new posts/first-post.md -f yaml --- date: 2015-07-19T17:32:25+08:00 title: first post --- This is my first hugo post Step6 - é è¦½ æ­¤æ™‚å°±å¯ä»¥åœ¨ Local åŸ·è¡Œï¼Œ http://127.0.0.1:1313/hugo_blog/ # -w watch filesystem for changes and recreate as needed # -D include content marked as draft # Press Ctrl+C to stop $ hugo server -w Step7 - ç§»é™¤ public # it will created by `hugo` command after we executed `deploy.sh` $ rm -rf public ","date":"2015-07-12","objectID":"/posts/my-first-post/:0:2","tags":["hugo","github"],"title":"å¦‚åœ¨ Github Pages å»ºç«‹ Hugo éœæ…‹ç¶²ç«™","uri":"/posts/my-first-post/"},{"categories":null,"content":"Step8 - æ–°å¢ .github.io public as submodule $ git submodule add git@github.com:\u003cyour-github-account\u003e/\u003cyour-github-account\u003e.github.io.git public Step8 - ç™¼ä½ˆ #deploy.sh #!/bin/bash echo -e \"\\033[0;32mDeploying updates to GitHub...\\033[0m\" # Build the project. hugo # if using a theme, replace by `hugo -t \u003cyourtheme\u003e` # Go To Public folder cd public # Add changes to git. git add -A # Commit changes. msg=\"rebuilding site `date`\" if [ $# -eq 1 ] then msg=\"$1\" fi git commit -m \"$msg\" # Push source and build repos. git push origin master # Come Back cd .. åŸ·è¡Œç™¼ä½ˆshellå¾Œï¼Œå…§å®¹æœƒè¢«æ¨é€åˆ° \u003cyour-github-account\u003e-hugoï¼Œè€Œ public æœƒè¢«æ¨é€åˆ° \u003cyour-github-account\u003e.github.io $ deploy.sh 'your commit message' å¾… Github Page ç·¨è­¯ç™¼ä½ˆå¾Œï¼Œè¨ªå• http://your-github-account.github.io å°±æœƒçœ‹åˆ°çµæœ! ","date":"2015-07-12","objectID":"/posts/my-first-post/:1:0","tags":["hugo","github"],"title":"å¦‚åœ¨ Github Pages å»ºç«‹ Hugo éœæ…‹ç¶²ç«™","uri":"/posts/my-first-post/"},{"categories":null,"content":"åƒè€ƒè³‡æ–™ å¿«é€Ÿæ­å»ºgohugoåšå®¢ Â· Mac Zealot - A.C Che Hosting on GitHub Pages GitHub Pages + GoDaddy â€” Medium ","date":"2015-07-12","objectID":"/posts/my-first-post/:1:1","tags":["hugo","github"],"title":"å¦‚åœ¨ Github Pages å»ºç«‹ Hugo éœæ…‹ç¶²ç«™","uri":"/posts/my-first-post/"},{"categories":null,"content":"Facebook è¨±å¤šäººéƒ½æœ‰è½‰è¼‰ä¸€äº›æ–‡ç« ï¼Œçœ‹åˆ°æœ‰äº›ä¸éŒ¯çš„æ–‡ç« ï¼Œæœƒæƒ³ä¿å­˜åˆ° Evernote ä¸Šï¼ŒEvernote æä¾›äº† Evernote Web Clipper - Chrome Web Store åŠ Clearly - Chrome Web Store å¯ä»¥æ–¹ä¾¿ä½¿ç”¨ç›´æ¥æŠŠé¢é çš„æ–‡ç« å¿«é€Ÿçš„å­˜åˆ°è‡ªå·±çš„ Notebook ä¸­ã€‚ life.com æ˜¯ç¶²å‹æ»¿å¸¸è½‰è¼‰çš„ä¸€å€‹åª’é«”ä¹‹ä¸€ã€‚ä¸éå¾Œä¾†ç™¼ç¾ Life.com æŠŠæ–‡ç« å…§å®¹çš„é¸å–åŠè¤‡è£½åŠŸèƒ½éƒ½é—œé–‰äº†ã€‚ æŸ¥çœ‹åŸå§‹ç¢¼ç™¼ç¾æ–‡ç« å…§å®¹è¢«åŒ…åœ¨iframeä¸­ \u003ciframe src=\"about:blank\" frameborder=\"0\" border=\"0\" cellspacing=\"0\" style=\"width: 600px; border: 0px; height: 4887px;\"\u003e \u003chtml\u003e \u003chead\u003e \u003cstyle type=\"text/css\"\u003e...\u003c/style\u003e \u003c/head\u003e \u003cbody\u003e .... \u003c/body\u003e \u003c/html\u003e \u003c/iframe\u003e ","date":"2015-07-05","objectID":"/posts/life-dot-com-text-copy/:0:0","tags":["chrome","extension"],"title":"Life.com text copy","uri":"/posts/life-dot-com-text-copy/"},{"categories":null,"content":"å¿«é€Ÿçš„è§£æ±ºæ–¹æ³• ç”±æ–¼ç¶²é æœ¬èº«æœ‰æˆ´å…¥ jQueryï¼Œæ‰€ä»¥åœ¨ Chrome çš„ console ä¸­ç›´æ¥åŸ·è¡Œ // enable iframe select and contextmenu feature. jQuery('iframe[src=\"about:blank\"]')[0].contentDocument.oncontextmenu = function(){return true;} jQuery('iframe[src=\"about:blank\"]')[0].contentDocument.onselectstart = function(){return true;} ä»¥ä¸Šçš„æ–¹æ³•é›–ç„¶å¯ä»¥è§£æ±ºé¸å–åŠè¤‡è£½ï¼Œä¸é Evernote-web-clipper åŠ Clearly é‚„æ˜¯æ²’æœ‰è®€å– iframe ä¸­çš„å…§å®¹ã€‚ ","date":"2015-07-05","objectID":"/posts/life-dot-com-text-copy/:0:1","tags":["chrome","extension"],"title":"Life.com text copy","uri":"/posts/life-dot-com-text-copy/"},{"categories":null,"content":"Chrome extension è§£æ±ºæ–¹æ³• ä¸€å‹æ°¸é€¸çš„æ–¹å¼å°±æ˜¯é€éç¨‹å¼æŠŠ iframe ä¸­çš„å…§å®¹ unwrap å‡ºä¾† (Trick: å‰ææ˜¯ iframe ä¸­ src=â€œabout:blankâ€ï¼Œiframe æœ‰å…¶ä»–çš„é™åˆ¶)ã€‚ åŸä¾†çš„ html \u003cdiv aricle-detail-main=\"\" class=\"aricle-detail-mainin\" id=\"mainContent\"\u003e \u003ciframe src=\"about:blank\" frameborder=\"0\" border=\"0\" cellspacing=\"0\" style=\"width: 600px; border: 0px; height: 4887px;\"\u003e \u003chtml\u003e \u003chead\u003e \u003cstyle type=\"text/css\"\u003e...\u003c/style\u003e \u003c/head\u003e \u003cbody\u003e .... \u003c/body\u003e \u003c/html\u003e \u003c/iframe\u003e \u003c/div\u003e unwrap å¾Œçš„ htmlï¼Œiframe ä¸­çš„ style å‰‡å¯«åˆ° head ä¸­ã€‚ \u003cdiv aricle-detail-main=\"\" class=\"aricle-detail-mainin\" id=\"mainContent\"\u003e \u003cdiv id=\"life-dot-com-copy\"\u003e ...åŸä¾† iframe ä¸­ body çš„å…§å®¹... \u003c/div\u003e \u003c/div\u003e çµæœ Evernote-web-clipper åŠ Clearly éƒ½å¯ä»¥æ­£å¸¸çš„è®€åˆ°å…§å®¹ã€‚ ","date":"2015-07-05","objectID":"/posts/life-dot-com-text-copy/:0:2","tags":["chrome","extension"],"title":"Life.com text copy","uri":"/posts/life-dot-com-text-copy/"},{"categories":null,"content":"Installing life.com text copy - Chrome Web Store ","date":"2015-07-05","objectID":"/posts/life-dot-com-text-copy/:0:3","tags":["chrome","extension"],"title":"Life.com text copy","uri":"/posts/life-dot-com-text-copy/"},{"categories":null,"content":"Contribute # Clone repo from github $ git clone https://github.com/cage1016/life.com-text-copy # Install npm package $ npm install # debug $ grunt debug # build extension $ grunt ","date":"2015-07-05","objectID":"/posts/life-dot-com-text-copy/:0:4","tags":["chrome","extension"],"title":"Life.com text copy","uri":"/posts/life-dot-com-text-copy/"}]