<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="KaiChu"><title>GoPherCon 2020 TW: 如何透過 Go-kit 快速搭建微服務架構應用程式實戰 ｜ KaiChu</title><meta name=description content="Golang 也因為開源、程式語法的簡潔開始受到程式開發人員的喜好。也因些在搭建微服務架構應用程式的時候有很多選擇，在 Web 框架中就有 Gin, Echo, Beego 等等，每一個 Web 框架都有其不同的特性，而 Go-Kit 是一個微服務開發的工具鏈，本場次將基於 Kuberentes/Istio 透過 Go-kit 搭建微服務架構應用程式實戰中的工程項目進行說明
 在第一屆的 GopherCon TW 中分享 如何透過 Go-kit 快速搭建微服務架構應用程式實戰"><meta name=keywords content="Hugo,theme,zozo"><link rel="shortcut icon" href=https://kaichu.io/images/favicon.ico><link rel=stylesheet type=text/css media=screen href=https://kaichu.io/css/normalize.css><link rel=stylesheet type=text/css media=screen href=https://cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css><link rel=stylesheet type=text/css media=screen href=https://kaichu.io/css/zozo.css><link rel=stylesheet type=text/css media=screen href=https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css><link rel=stylesheet type=text/css media=screen href=https://kaichu.io/css/highlight.css><link rel=stylesheet href=https://kaichu.io/css/add-on.css><link rel=stylesheet href=/css/prism-ghcolors.css></head><body><div class="main animate__animated animate__fadeInDown"><div class="nav_container animated fadeInDown"><div class=site_nav id=site_nav><ul><li><a href=/>Home</a></li><li><a href=/posts/>Archive</a></li><li><a href=/tags/>Tags</a></li><li><a href=/about/>About</a></li></ul></div><div class=menu_icon><a id=menu_icon><i class=ri-menu-line></i></a></div></div><div class="header animated fadeInDown"><div class=site_title_container><div class=site_title><h1><a href=https://kaichu.io/><span>KaiChu</span></a></h1></div><div class=description><p class=sub_title>Life is unique by how you shape it</p><div class=my_socials><a href=https://github.com/cage1016 title=github target=_blank><i class=ri-github-fill></i></a><a href=https://www.instagram.com/cage1016/ title=instagram target=_blank><i class=ri-instagram-fill></i></a><a href=https://www.linkedin.com/in/kaichuchung title=linkedin target=_blank><i class=ri-linkedin-fill></i></a><a href=https://www.slideshare.net/cagechung title=slideshow target=_blank><i class=ri-slideshow-fill></i></a><a href=https://twitter.com/CageChung title=twitter target=_blank><i class=ri-twitter-fill></i></a><a href=https://kaichu.io/index.xml type=application/rss+xml title=rss target=_blank><i class=ri-rss-fill></i></a></div></div></div></div><div class=content><div class=post_page><div class="post animate__animated animate__fadeInDown"><div class="post_title post_detail_title"><h2><a href=/posts/gokit-engineering-operation/>GoPherCon 2020 TW: 如何透過 Go-kit 快速搭建微服務架構應用程式實戰</a></h2><span class=date>2020.11.16</span></div><div class="post_content markdown"><blockquote><p>Golang 也因為開源、程式語法的簡潔開始受到程式開發人員的喜好。也因些在搭建微服務架構應用程式的時候有很多選擇，在 Web 框架中就有 Gin, Echo, Beego 等等，每一個 Web 框架都有其不同的特性，而 Go-Kit 是一個微服務開發的工具鏈，本場次將基於 Kuberentes/Istio 透過 Go-kit 搭建微服務架構應用程式實戰中的工程項目進行說明</p></blockquote><p>在第一屆的 GopherCon TW 中分享 <strong>如何透過 Go-kit 快速搭建微服務架構應用程式實戰</strong></p><h3 id=aganda>Aganda</h3><ul><li>Go-kit</li><li>Layout</li><li>Test</li><li>Toolchain</li></ul><p>簡單的內容總結。第一部份還是簡單的說明 Go-kit 作為一個微服務工具包的設計理念及其中的模型分層 <code>Service</code>, <code>Endpoint</code> & <code>Transport</code>
，在小型的應用中進行架構強制分離會覺得有一點把問題複雜化。不過在微服務數量開始變多，開發人員變多的狀況下，架構強制分離好處效益就會出現。
進而在導入 Istio Service mesh 可以讓 Go-kit 核心概念保留，把微服務組件下放至 Istio 中進行處理，使單一微服務只需要專注商業邏輯開發</p><p>Layout 的部份就是基於 <a href=https://github.com/golang-standards/project-layout>golang-standards/project-layout: Standard Go Project Layout</a> 進行一些檔案配置的安排, 配合架構強制分離讓開發者知道什麼東西該放在那裡</p><p>Test 部份依照 <code>Service</code>, <code>Transport</code> 分別進行相對應的 unitest，採用 table case 及 mock 概念</p><p>Toolchain 則強調，架構強制分離配合程式碼產生器可以加快開發的速度</p><h3 id=補充資料>補充資料</h3><p><a href=https://buildpacks.io/>Cloud Native Buildpacks · Cloud Native Buildpacks</a> 是 CNCF 下面的一個專案，簡單來說就是透過 container 的方式來幫你從原始碼打包 container image 而不需要編寫 Dockerfile, Google 也在今年的 Cloud Next 20' OnAir 上宣佈 <code>Cloud Build</code>, <code>Cloud Run</code>, <code>Cloud Shell</code>, <code>Cloud Function</code>, <code>Cloud Code</code> & <code>Skafflold</code> 都已經原生支援 <a href=https://github.com/GoogleCloudPlatform/buildpacks>GoogleCloudPlatform/buildpacks</a></p><pre><code class=language-shell>Suggested builders:
	Google:                gcr.io/buildpacks/builder:v1      Ubuntu 18 base image with buildpacks for .NET, Go, Java, Node.js, and Python
	Heroku:                heroku/buildpacks:18              heroku-18 base image with buildpacks for Ruby, Java, Node.js, Python, Golang, &amp; PHP
	Paketo Buildpacks:     paketobuildpacks/builder:base     Ubuntu bionic base image with buildpacks for Java, NodeJS and Golang
	Paketo Buildpacks:     paketobuildpacks/builder:full     Ubuntu bionic base image with buildpacks for Java, .NET, NodeJS, Golang, PHP, HTTPD and NGINX
	Paketo Buildpacks:     paketobuildpacks/builder:tiny     Tiny base image (bionic build image, distroless run image) with buildpacks for Golang
</code></pre><p>上面列出的是目前建議的實作 buildpack 的 builders，每一家 builder 提供的參數可能有些不一樣，就請大家參照各別的說明文件</p><h3 id=投影片>投影片</h3><p><a href=https://www2.slideshare.net/cagechung/gokit-239269720>https://www2.slideshare.net/cagechung/gokit-239269720</a></p><iframe style=width:100%;height:500px frameborder=0 marginwidth=0 marginheight=0 scrolling=no src="http://www.slideshare.net/slideshow/embed_code/239269720?rel=0" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe><br><br><h3 id=投影片中相關的-demo>投影片中相關的 demo</h3><ul><li><a href=https://github.com/cage1016/gokit-workshop>cage1016/gokit-workshop</a> Simple tutorial from http/net to Gokit skeleton</li><li><a href=https://github.com/cage1016/ms-demo>cage1016/ms-demo: gokit microservice demo</a> gokit microservice demo</li><li><a href=https://github.com/cage1016/gk/tree/feature/gokitconsulk8sistio>cage1016/gk at feature/gokitconsulk8sistio</a> gokit toolchain</li></ul></div><div class=post_footer><div class="post_content markdown"><h3>See Also</h3><ul><li><a href=/posts/gokit-ms-demo/>Gokit microservice demo</a></li><li><a href=/posts/skaffold-debug-goland/>Skaffold debug goland</a></li></ul></div><div class=meta><div class=info><span class="field tags"><i class=ri-stack-line></i><a href=https://kaichu.io/tags/gokit/>gokit</a>
<a href=https://kaichu.io/tags/kubernetes/>kubernetes</a>
<a href=https://kaichu.io/tags/microservices/>microservices</a>
<a href=https://kaichu.io/tags/istio/>istio</a>
<a href=https://kaichu.io/tags/toolchain/>toolchain</a>
<a href=https://kaichu.io/tags/gophercon/>gophercon</a></span></div></div></div></div><div class=doc_comments><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"kaichuio"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div></div></div><a id=back_to_top href=# class=back_to_top><i class=ri-arrow-up-s-line></i></a><footer class=footer><div class=powered_by><a href=https://varkai.com>Designed by VarKai,</a>
<a href=http://www.gohugo.io/>Proudly published with Hugo</a></div><div class=footer_slogan><span>My spiritual home</span></div></footer><script src=https://kaichu.io/js/jquery-3.5.1.min.js></script><link href=https://kaichu.io/css/fancybox.min.css rel=stylesheet><script src=https://kaichu.io/js/fancybox.min.js></script><script src=https://kaichu.io/js/zozo.js></script><script type=text/javascript async src="https://cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML">MathJax.Hub.Config({tex2jax:{inlineMath:[['$','$'],['\\(','\\)']],displayMath:[['$$','$$'],['\[\[','\]\]']],processEscapes:true,processEnvironments:true,skipTags:['script','noscript','style','textarea','pre'],TeX:{equationNumbers:{autoNumber:"AMS"},extensions:["AMSmath.js","AMSsymbols.js"]}}});MathJax.Hub.Queue(function(){var all=MathJax.Hub.getAllJax(),i;for(i=0;i<all.length;i+=1){all[i].SourceElement().parentNode.className+=' has-jax';}});</script><style>code.has-jax{font:inherit;font-size:100%;background:inherit;border:inherit;color:#515151}</style><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-65308340-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script src=/js/add-on.js></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-numbers/prism-line-numbers.css crossorigin=anonymous onload="if(media!='all')media='all'"><script defer src=https://cdn.jsdelivr.net/npm/prismjs@1.23.0/components/prism-core.min.js crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/autoloader/prism-autoloader.min.js crossorigin=anonymous onload="Prism.plugins.autoloader.languages_path='https://cdn.jsdelivr.net/npm/prismjs@1.23.0/components/';"></script><script defer src=https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-numbers/prism-line-numbers.min.js crossorigin=anonymous onload="document.querySelectorAll('pre>code').forEach(function(e){e.classList.add('line-numbers')});"></script></body></html>